
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Chapter 8 - spaCy and textaCy &#8212; Text Analysis and Machine Learning (TAML) Group</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Chapter 9 - New Developments: Topic Modeling with BERTopic!" href="9_BERTopic.html" />
    <link rel="prev" title="Chapter 7 - English text preprocessing basics" href="7_English_text_preprocessing_basics.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Text Analysis and Machine Learning (TAML) Group</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome to TAML!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Python Basics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1_How_to_use_this_book.html">
   Chapter 1 - How to use this book
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2_Python_environments.html">
   Chapter 2 - Python environments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3_Basic_Python_syntax.html">
   Chapter 3 - Basic Python syntax
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="4_Numeric_data_wrangling.html">
   Chapter 4 - Numeric data wrangling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5_Data_visualization_essentials.html">
   Chapter 5 - Data visualization essentials
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Text analysis and machine learning
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="6_Core_concepts_vocabularies.html">
   Chapter 6 - Core machine learning concepts; building text vocabularies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="7_English_text_preprocessing_basics.html">
   Chapter 7 - English text preprocessing basics
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Chapter 8 - spaCy and textaCy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="9_BERTopic.html">
   Chapter 9 - New Developments: Topic Modeling with BERTopic!
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix.html">
   <strong>
    Appendix
   </strong>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Solutions.html">
   Solutions
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/EastBayEv/SSDS-TAML/master?urlpath=tree/fall2022/8_spaCy_textaCy.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        
<button onclick="initThebeSBT()"
  class="headerbtn headerbtn-launch-thebe"
  data-toggle="tooltip"
data-placement="left"
title="Launch Thebe"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="headerbtn__text-container">Live Code</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/EastBayEv/SSDS-TAML"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/EastBayEv/SSDS-TAML/issues/new?title=Issue%20on%20page%20%2Ffall2022/8_spaCy_textaCy.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/fall2022/8_spaCy_textaCy.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Chapter 8 - spaCy and textaCy
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-spacy-and-textacy">
     Why spaCy and textacy?
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#topics">
       Topics
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-brief-word-about-terms">
       A brief word about terms
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#document-level-analysis-with-spacy">
   Document-level analysis with
   <code class="docutils literal notranslate">
    <span class="pre">
     spaCy
    </span>
   </code>
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tokenization">
     Tokenization
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#filtering-tokens">
       Filtering tokens
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#counting-tokens">
       Counting tokens
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#part-of-speech-tagging">
     Part-of-speech tagging
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#parsing">
       Parsing
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#named-entity-recognition">
     Named-entity recognition
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#visualizing-parses">
       Visualizing Parses
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#corpus-level-analysis-with-textacy">
   Corpus-level analysis with
   <code class="docutils literal notranslate">
    <span class="pre">
     textacy
    </span>
   </code>
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#generating-corpora">
     Generating corpora
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#finding-important-words-in-the-corpus">
     Finding important words in the corpus
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#keyword-in-context">
     Keyword in context
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vectorization">
     Vectorization
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-topic-modeling">
     Exercise - topic modeling
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#document-similarity-with-word2vec-and-clustering">
     Document similarity with word2vec and clustering
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-spacy101">
     Exercise - spacy101
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#topic-modeling-going-further">
     Topic modeling - going further
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Chapter 8 - spaCy and textaCy</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Chapter 8 - spaCy and textaCy
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-spacy-and-textacy">
     Why spaCy and textacy?
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#topics">
       Topics
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-brief-word-about-terms">
       A brief word about terms
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#document-level-analysis-with-spacy">
   Document-level analysis with
   <code class="docutils literal notranslate">
    <span class="pre">
     spaCy
    </span>
   </code>
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tokenization">
     Tokenization
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#filtering-tokens">
       Filtering tokens
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#counting-tokens">
       Counting tokens
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#part-of-speech-tagging">
     Part-of-speech tagging
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#parsing">
       Parsing
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#named-entity-recognition">
     Named-entity recognition
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#visualizing-parses">
       Visualizing Parses
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#corpus-level-analysis-with-textacy">
   Corpus-level analysis with
   <code class="docutils literal notranslate">
    <span class="pre">
     textacy
    </span>
   </code>
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#generating-corpora">
     Generating corpora
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#finding-important-words-in-the-corpus">
     Finding important words in the corpus
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#keyword-in-context">
     Keyword in context
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vectorization">
     Vectorization
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-topic-modeling">
     Exercise - topic modeling
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#document-similarity-with-word2vec-and-clustering">
     Document similarity with word2vec and clustering
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-spacy101">
     Exercise - spacy101
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#topic-modeling-going-further">
     Topic modeling - going further
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="chapter-8-spacy-and-textacy">
<h1>Chapter 8 - spaCy and textaCy<a class="headerlink" href="#chapter-8-spacy-and-textacy" title="Permalink to this headline">#</a></h1>
<p>2022 August 22</p>
<blockquote>
<div><p>These abridged materials are borrowed from the CIDR Workshop <a class="reference external" href="https://github.com/sul-cidr/Workshops/tree/master/Text_Analysis_with_Python">Text Analysis with Python</a></p>
</div></blockquote>
<a target="_blank" href="https://colab.research.google.com/github/EastBayEv/SSDS-TAML/blob/main/fall2022/9_spaCy_textaCy.ipynb">
  <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/>
</a><section id="why-spacy-and-textacy">
<h2>Why spaCy and textacy?<a class="headerlink" href="#why-spacy-and-textacy" title="Permalink to this headline">#</a></h2>
<p>The language processing features of spaCy and the corpus analysis methods of textacy together offer a wide range of functionality for text analysis in a well-maintained and well-documented software package that incorporates cutting-edge techniques as well as standard approaches.</p>
<p>The “C” in spaCy (and textacy) stands for Cython, which is Python that is compiled to C code and thus offers some performance advantages over interpreted Python, especially when working with large machine-learning models. The use of machine-learning models, including neural networks, is a key feature of spaCy and textacy. The writers of these libraries also have developed <a class="reference external" href="https://prodi.gy/">Prodigy</a>, a similarly leading-edge but approachable tool for training custom machine-learning models for text analysis, among other uses.</p>
<p>Check out the <a class="reference external" href="https://spacy.io/usage/spacy-101">spaCy 101</a> to learn more.</p>
<section id="topics">
<h3>Topics<a class="headerlink" href="#topics" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Document Tokenization</p></li>
<li><p>Part-of-Speech (POS) Tagging</p></li>
<li><p>Named-Entity Recognition (NER)</p></li>
<li><p>Corpus Vectorization</p></li>
<li><p>Topic Modeling</p></li>
<li><p>Document Similarity</p></li>
<li><p>Stylistic Analysis</p></li>
</ul>
<p><strong>Note:</strong> The examples from this workshop use English texts, but all of the methods are applicable to other languages. The availability of specialized resources (parsing rules, dictionaries, trained models) can vary considerably by language, however.</p>
</section>
<section id="a-brief-word-about-terms">
<h3>A brief word about terms<a class="headerlink" href="#a-brief-word-about-terms" title="Permalink to this headline">#</a></h3>
<p><strong>Text analysis</strong> involves extraction of information from significant amounts  of free-form text, e.g., literature (prose, poetry), historical records, long-form survey responses, legal documents. Some of the techniques used also are applicable to short-form text data, including documents that are already in tabular format.</p>
<p>Text analysis methods are built upon techniques for <strong>Natural Language Processing</strong> (NLP), which began as rule-based approaches to parsing human language and eventually incorporated statistical machine learning methods as well as, most recently, neural network/deep learning-based approaches.</p>
<p><strong>Text mining</strong> typically refers to the extraction of information from very large corpora of unstructured texts.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">spacy</span>
<span class="kn">import</span> <span class="nn">textacy</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="nn">Input In [1],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">spacy</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="kn">import</span> <span class="nn">textacy</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;spacy&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="document-level-analysis-with-spacy">
<h1>Document-level analysis with <code class="docutils literal notranslate"><span class="pre">spaCy</span></code><a class="headerlink" href="#document-level-analysis-with-spacy" title="Permalink to this headline">#</a></h1>
<p>Let’s start by learning how spaCy works and using it to begin analyzing a single text document. We’ll work with larger corpora later in the workshop.</p>
<p>For this workshop we will work with a pre-trained statistical and deep-learning model provided by spaCy to process text. spaCy’s <a class="reference external" href="https://spacy.io/models">models</a> are differentiated by language (21 languages are supported at present), capabilities, training text, and size. Smaller models are more efficient; larger models are more accurate. Here we’ll download and use a medium-sized English multi-task model, which supports part of speech tagging, entity recognition, and includes a word vector model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>python -m spacy download en_core_web_md
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Yellow">WARNING: Ignoring invalid distribution -ensorflow (/Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages)</span>
<span class=" -Color -Color-Yellow">WARNING: Ignoring invalid distribution -ensorflow (/Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages)</span>
Collecting en-core-web-md==3.3.0
  Downloading https://github.com/explosion/spacy-models/releases/download/en_core_web_md-3.3.0/en_core_web_md-3.3.0-py3-none-any.whl (33.5 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">33.5/33.5 MB</span> <span class=" -Color -Color-Red">40.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:00</span>00:0100:01
?25hRequirement already satisfied: spacy&lt;3.4.0,&gt;=3.3.0.dev0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from en-core-web-md==3.3.0) (3.3.1)
Requirement already satisfied: spacy-loggers&lt;2.0.0,&gt;=1.0.0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (1.0.1)
Requirement already satisfied: murmurhash&lt;1.1.0,&gt;=0.28.0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (1.0.7)
Requirement already satisfied: typer&lt;0.5.0,&gt;=0.3.0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (0.4.1)
Requirement already satisfied: preshed&lt;3.1.0,&gt;=3.0.2 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (3.0.6)
Requirement already satisfied: thinc&lt;8.1.0,&gt;=8.0.14 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (8.0.17)
Requirement already satisfied: srsly&lt;3.0.0,&gt;=2.4.3 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (2.4.4)
Requirement already satisfied: packaging&gt;=20.0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (21.3)
Requirement already satisfied: cymem&lt;2.1.0,&gt;=2.0.2 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (2.0.6)
Requirement already satisfied: blis&lt;0.8.0,&gt;=0.4.0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (0.7.7)
Requirement already satisfied: langcodes&lt;4.0.0,&gt;=3.2.0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (3.3.0)
Requirement already satisfied: spacy-legacy&lt;3.1.0,&gt;=3.0.9 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (3.0.10)
Requirement already satisfied: wasabi&lt;1.1.0,&gt;=0.9.1 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (0.10.1)
Requirement already satisfied: jinja2 in /Users/evanmuzzall/.local/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (3.1.2)
Requirement already satisfied: pydantic!=1.8,!=1.8.1,&lt;1.9.0,&gt;=1.7.4 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (1.8.2)
Requirement already satisfied: requests&lt;3.0.0,&gt;=2.13.0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (2.28.1)
Requirement already satisfied: catalogue&lt;2.1.0,&gt;=2.0.6 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (2.0.7)
Requirement already satisfied: setuptools in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (61.2.0)
Requirement already satisfied: numpy&gt;=1.15.0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (1.21.5)
Requirement already satisfied: tqdm&lt;5.0.0,&gt;=4.38.0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (4.64.0)
Requirement already satisfied: pathy&gt;=0.3.5 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (0.6.1)
Requirement already satisfied: pyparsing!=3.0.5,&gt;=2.0.2 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from packaging&gt;=20.0-&gt;spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (3.0.4)
Requirement already satisfied: smart-open&lt;6.0.0,&gt;=5.0.0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from pathy&gt;=0.3.5-&gt;spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (5.2.1)
Requirement already satisfied: typing-extensions&gt;=3.7.4.3 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from pydantic!=1.8,!=1.8.1,&lt;1.9.0,&gt;=1.7.4-&gt;spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (4.1.1)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (3.3)
Requirement already satisfied: certifi&gt;=2017.4.17 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (2022.6.15)
Requirement already satisfied: charset-normalizer&lt;3,&gt;=2 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (2.0.4)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (1.26.11)
Requirement already satisfied: click&lt;9.0.0,&gt;=7.1.1 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from typer&lt;0.5.0,&gt;=0.3.0-&gt;spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (7.1.2)
Requirement already satisfied: MarkupSafe&gt;=2.0 in /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages (from jinja2-&gt;spacy&lt;3.4.0,&gt;=3.3.0.dev0-&gt;en-core-web-md==3.3.0) (2.0.1)
<span class=" -Color -Color-Yellow">WARNING: Ignoring invalid distribution -ensorflow (/Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages)</span>
<span class=" -Color -Color-Yellow">WARNING: Ignoring invalid distribution -ensorflow (/Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages)</span>
<span class=" -Color -Color-Yellow">WARNING: Ignoring invalid distribution -ensorflow (/Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages)</span>
<span class=" -Color -Color-Yellow">WARNING: Ignoring invalid distribution -ensorflow (/Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages)</span>
<span class=" -Color -Color-C2">✔ Download and installation successful</span>
You can now load the package via spacy.load(&#39;en_core_web_md&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Once we&#39;ve installed the model, we can import it like any other Python library</span>
<span class="kn">import</span> <span class="nn">en_core_web_md</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This instantiates a spaCy text processor based on the installed model</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">en_core_web_md</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># From H.G. Wells&#39;s A Short History of the World, Project Gutenberg </span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;Even under the Assyrian monarchs and especially under</span>
<span class="s2">Sardanapalus, Babylon had been a scene of great intellectual</span>
<span class="s2">activity.  </span><span class="si">{111}</span><span class="s2"> Sardanapalus, though an Assyrian, had been quite</span>
<span class="s2">Babylon-ized.  He made a library, a library not of paper but of</span>
<span class="s2">the clay tablets that were used for writing in Mesopotamia since</span>
<span class="s2">early Sumerian days.  His collection has been unearthed and is</span>
<span class="s2">perhaps the most precious store of historical material in the</span>
<span class="s2">world.  The last of the Chaldean line of Babylonian monarchs,</span>
<span class="s2">Nabonidus, had even keener literary tastes.  He patronized</span>
<span class="s2">antiquarian researches, and when a date was worked out by his</span>
<span class="s2">investigators for the accession of Sargon I he commemorated the</span>
<span class="s2">fact by inscriptions.  But there were many signs of disunion in</span>
<span class="s2">his empire, and he sought to centralize it by bringing a number of</span>
<span class="s2">the various local gods to Babylon and setting up temples to them</span>
<span class="s2">there.  This device was to be practised quite successfully by the</span>
<span class="s2">Romans in later times, but in Babylon it roused the jealousy of</span>
<span class="s2">the powerful priesthood of Bel Marduk, the dominant god of the</span>
<span class="s2">Babylonians.  They cast about for a possible alternative to</span>
<span class="s2">Nabonidus and found it in Cyrus the Persian, the ruler of the</span>
<span class="s2">adjacent Median Empire.  Cyrus had already distinguished himself</span>
<span class="s2">by conquering Croesus, the rich king of Lydia in Eastern Asia</span>
<span class="s2">Minor.  </span><span class="si">{112}</span><span class="s2"> He came up against Babylon, there was a battle</span>
<span class="s2">outside the walls, and the gates of the city were opened to him</span>
<span class="s2">(538 B.C.).  His soldiers entered the city without fighting.  The</span>
<span class="s2">crown prince Belshazzar, the son of Nabonidus, was feasting, the</span>
<span class="s2">Bible relates, when a hand appeared and wrote in letters of fire</span>
<span class="s2">upon the wall these mystical words: _&quot;Mene, Mene, Tekel,</span>
<span class="s2">Upharsin,&quot;_ which was interpreted by the prophet Daniel, whom he</span>
<span class="s2">summoned to read the riddle, as &quot;God has numbered thy kingdom and</span>
<span class="s2">finished it; thou art weighed in the balance and found wanting and</span>
<span class="s2">thy kingdom is given to the Medes and Persians.&quot;  Possibly the</span>
<span class="s2">priests of Bel Marduk knew something about that writing on the</span>
<span class="s2">wall.  Belshazzar was killed that night, says the Bible.</span>
<span class="s2">Nabonidus was taken prisoner, and the occupation of the city was</span>
<span class="s2">so peaceful that the services of Bel Marduk continued without</span>
<span class="s2">intermission.&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>By default, spaCy applies its entire NLP “pipeline” to the text as soon as it is provided to the model and outputs a processed “doc.”</p>
<img src="https://d33wubrfki0l68.cloudfront.net/3ad0582d97663a1272ffc4ccf09f1c5b335b17e9/7f49c/pipeline-fde48da9b43661abcdf62ab70a546d71.svg"><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="tokenization">
<h2>Tokenization<a class="headerlink" href="#tokenization" title="Permalink to this headline">#</a></h2>
<p>The doc created by spaCy immediately provides access to the word-level tokens of the text.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[:</span><span class="mi">15</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Even
under
the
Assyrian
monarchs
and
especially
under


Sardanapalus
,
Babylon
had
been
a
</pre></div>
</div>
</div>
</div>
<p>Each of these tokens has a number of properties, and we’ll look a bit more closely at them in a minute.</p>
<p>spaCy also automatically provides sentence-level segmenting (senticization).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">itertools</span>

<span class="k">for</span> <span class="n">sent</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">sents</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">--</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Even under the Assyrian monarchs and especially under
Sardanapalus, Babylon had been a scene of great intellectual
activity.
--

 {111} Sardanapalus, though an Assyrian, had been quite
Babylon-ized.
--

 He made a library, a library not of paper but of
the clay tablets that were used for writing in Mesopotamia since
early Sumerian days.
--

 His collection has been unearthed and is
perhaps the most precious store of historical material in the
world.
--

 The last of the Chaldean line of Babylonian monarchs,
Nabonidus, had even keener literary tastes.
--

 He patronized
antiquarian researches, and when a date was worked out by his
investigators for the accession of Sargon I he commemorated the
fact by inscriptions.
--

 But there were many signs of disunion in
his empire, and he sought to centralize it by bringing a number of
the various local gods to Babylon and setting up temples to them
there.
--

 This device was to be practised quite successfully by the
Romans in later times, but in Babylon it roused the jealousy of
the powerful priesthood of Bel Marduk, the dominant god of the
Babylonians.
--

 They cast about for a possible alternative to
Nabonidus and found it in Cyrus the Persian, the ruler of the
adjacent Median Empire.
--

 Cyrus had already distinguished himself
by conquering Croesus, the rich king of Lydia in Eastern Asia
Minor.
--
</pre></div>
</div>
</div>
</div>
<p>You’ll notice that the line breaks in the sample text are making the extracted sentences and also the word-level tokens a bit messy. The simplest way to avoid this is just to replace all single line breaks from the text with spaces before running it throug the spaCy pipeline, i.e., as a <strong>preprocessing</strong> step.</p>
<p>There are other ways to handle this within the spaCy pipeline; an important feature of spaCy is that every phase of the built-in pipeline can be replaced by a custom module. One could imagine, for example, writing a replacement sentencizer that takes advantage of the presence of two spaces between all sentences in the sample text. But we will leave that as an exercise for the reader.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">text_as_line</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">text_as_line</span><span class="p">)</span>

<span class="k">for</span> <span class="n">sent</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">sents</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">--</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Even under the Assyrian monarchs and especially under Sardanapalus, Babylon had been a scene of great intellectual activity.
--

 {111} Sardanapalus, though an Assyrian, had been quite Babylon-ized.
--

 He made a library, a library not of paper but of the clay tablets that were used for writing in Mesopotamia since early Sumerian days.
--

 His collection has been unearthed and is perhaps the most precious store of historical material in the world.
--

 The last of the Chaldean line of Babylonian monarchs, Nabonidus, had even keener literary tastes.
--

 He patronized antiquarian researches, and when a date was worked out by his investigators for the accession of Sargon I he commemorated the fact by inscriptions.
--

 But there were many signs of disunion in his empire, and he sought to centralize it by bringing a number of the various local gods to Babylon and setting up temples to them there.
--

 This device was to be practised quite successfully by the Romans in later times, but in Babylon it roused the jealousy of the powerful priesthood of Bel Marduk, the dominant god of the Babylonians.
--

 They cast about for a possible alternative to Nabonidus and found it in Cyrus the Persian, the ruler of the adjacent Median Empire.
--

 Cyrus had already distinguished himself by conquering Croesus, the rich king of Lydia in Eastern Asia Minor.
--
</pre></div>
</div>
</div>
</div>
<p>We can collect both words and sentences into standard Python data structures (lists, in this case).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sentences</span> <span class="o">=</span> <span class="p">[</span><span class="n">sent</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">sent</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">sents</span><span class="p">]</span>
<span class="n">sentences</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Even under the Assyrian monarchs and especially under Sardanapalus, Babylon had been a scene of great intellectual activity.&#39;,
 &#39; {111} Sardanapalus, though an Assyrian, had been quite Babylon-ized.&#39;,
 &#39; He made a library, a library not of paper but of the clay tablets that were used for writing in Mesopotamia since early Sumerian days.&#39;,
 &#39; His collection has been unearthed and is perhaps the most precious store of historical material in the world.&#39;,
 &#39; The last of the Chaldean line of Babylonian monarchs, Nabonidus, had even keener literary tastes.&#39;,
 &#39; He patronized antiquarian researches, and when a date was worked out by his investigators for the accession of Sargon I he commemorated the fact by inscriptions.&#39;,
 &#39; But there were many signs of disunion in his empire, and he sought to centralize it by bringing a number of the various local gods to Babylon and setting up temples to them there.&#39;,
 &#39; This device was to be practised quite successfully by the Romans in later times, but in Babylon it roused the jealousy of the powerful priesthood of Bel Marduk, the dominant god of the Babylonians.&#39;,
 &#39; They cast about for a possible alternative to Nabonidus and found it in Cyrus the Persian, the ruler of the adjacent Median Empire.&#39;,
 &#39; Cyrus had already distinguished himself by conquering Croesus, the rich king of Lydia in Eastern Asia Minor.&#39;,
 &#39; {112} He came up against Babylon, there was a battle outside the walls, and the gates of the city were opened to him (538 B.C.).&#39;,
 &#39; His soldiers entered the city without fighting.&#39;,
 &#39; The crown prince Belshazzar, the son of Nabonidus, was feasting, the Bible relates, when a hand appeared and wrote in letters of fire upon the wall these mystical words: _&quot;Mene, Mene, Tekel, Upharsin,&quot;_ which was interpreted by the prophet Daniel, whom he summoned to read the riddle, as &quot;God has numbered thy kingdom and finished it; thou art weighed in the balance and found wanting and thy kingdom is given to the Medes and Persians.&quot;&#39;,
 &#39; Possibly the priests of Bel Marduk knew something about that writing on the wall.&#39;,
 &#39; Belshazzar was killed that night, says the Bible.&#39;,
 &#39;Nabonidus was taken prisoner, and the occupation of the city was so peaceful that the services of Bel Marduk continued without intermission.&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">]</span>
<span class="n">words</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Even&#39;,
 &#39;under&#39;,
 &#39;the&#39;,
 &#39;Assyrian&#39;,
 &#39;monarchs&#39;,
 &#39;and&#39;,
 &#39;especially&#39;,
 &#39;under&#39;,
 &#39;Sardanapalus&#39;,
 &#39;,&#39;,
 &#39;Babylon&#39;,
 &#39;had&#39;,
 &#39;been&#39;,
 &#39;a&#39;,
 &#39;scene&#39;,
 &#39;of&#39;,
 &#39;great&#39;,
 &#39;intellectual&#39;,
 &#39;activity&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;{&#39;,
 &#39;111&#39;,
 &#39;}&#39;,
 &#39;Sardanapalus&#39;,
 &#39;,&#39;,
 &#39;though&#39;,
 &#39;an&#39;,
 &#39;Assyrian&#39;,
 &#39;,&#39;,
 &#39;had&#39;,
 &#39;been&#39;,
 &#39;quite&#39;,
 &#39;Babylon&#39;,
 &#39;-&#39;,
 &#39;ized&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;He&#39;,
 &#39;made&#39;,
 &#39;a&#39;,
 &#39;library&#39;,
 &#39;,&#39;,
 &#39;a&#39;,
 &#39;library&#39;,
 &#39;not&#39;,
 &#39;of&#39;,
 &#39;paper&#39;,
 &#39;but&#39;,
 &#39;of&#39;,
 &#39;the&#39;,
 &#39;clay&#39;,
 &#39;tablets&#39;,
 &#39;that&#39;,
 &#39;were&#39;,
 &#39;used&#39;,
 &#39;for&#39;,
 &#39;writing&#39;,
 &#39;in&#39;,
 &#39;Mesopotamia&#39;,
 &#39;since&#39;,
 &#39;early&#39;,
 &#39;Sumerian&#39;,
 &#39;days&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;His&#39;,
 &#39;collection&#39;,
 &#39;has&#39;,
 &#39;been&#39;,
 &#39;unearthed&#39;,
 &#39;and&#39;,
 &#39;is&#39;,
 &#39;perhaps&#39;,
 &#39;the&#39;,
 &#39;most&#39;,
 &#39;precious&#39;,
 &#39;store&#39;,
 &#39;of&#39;,
 &#39;historical&#39;,
 &#39;material&#39;,
 &#39;in&#39;,
 &#39;the&#39;,
 &#39;world&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;The&#39;,
 &#39;last&#39;,
 &#39;of&#39;,
 &#39;the&#39;,
 &#39;Chaldean&#39;,
 &#39;line&#39;,
 &#39;of&#39;,
 &#39;Babylonian&#39;,
 &#39;monarchs&#39;,
 &#39;,&#39;,
 &#39;Nabonidus&#39;,
 &#39;,&#39;,
 &#39;had&#39;,
 &#39;even&#39;,
 &#39;keener&#39;,
 &#39;literary&#39;,
 &#39;tastes&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;He&#39;,
 &#39;patronized&#39;,
 &#39;antiquarian&#39;,
 &#39;researches&#39;,
 &#39;,&#39;,
 &#39;and&#39;,
 &#39;when&#39;,
 &#39;a&#39;,
 &#39;date&#39;,
 &#39;was&#39;,
 &#39;worked&#39;,
 &#39;out&#39;,
 &#39;by&#39;,
 &#39;his&#39;,
 &#39;investigators&#39;,
 &#39;for&#39;,
 &#39;the&#39;,
 &#39;accession&#39;,
 &#39;of&#39;,
 &#39;Sargon&#39;,
 &#39;I&#39;,
 &#39;he&#39;,
 &#39;commemorated&#39;,
 &#39;the&#39;,
 &#39;fact&#39;,
 &#39;by&#39;,
 &#39;inscriptions&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;But&#39;,
 &#39;there&#39;,
 &#39;were&#39;,
 &#39;many&#39;,
 &#39;signs&#39;,
 &#39;of&#39;,
 &#39;disunion&#39;,
 &#39;in&#39;,
 &#39;his&#39;,
 &#39;empire&#39;,
 &#39;,&#39;,
 &#39;and&#39;,
 &#39;he&#39;,
 &#39;sought&#39;,
 &#39;to&#39;,
 &#39;centralize&#39;,
 &#39;it&#39;,
 &#39;by&#39;,
 &#39;bringing&#39;,
 &#39;a&#39;,
 &#39;number&#39;,
 &#39;of&#39;,
 &#39;the&#39;,
 &#39;various&#39;,
 &#39;local&#39;,
 &#39;gods&#39;,
 &#39;to&#39;,
 &#39;Babylon&#39;,
 &#39;and&#39;,
 &#39;setting&#39;,
 &#39;up&#39;,
 &#39;temples&#39;,
 &#39;to&#39;,
 &#39;them&#39;,
 &#39;there&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;This&#39;,
 &#39;device&#39;,
 &#39;was&#39;,
 &#39;to&#39;,
 &#39;be&#39;,
 &#39;practised&#39;,
 &#39;quite&#39;,
 &#39;successfully&#39;,
 &#39;by&#39;,
 &#39;the&#39;,
 &#39;Romans&#39;,
 &#39;in&#39;,
 &#39;later&#39;,
 &#39;times&#39;,
 &#39;,&#39;,
 &#39;but&#39;,
 &#39;in&#39;,
 &#39;Babylon&#39;,
 &#39;it&#39;,
 &#39;roused&#39;,
 &#39;the&#39;,
 &#39;jealousy&#39;,
 &#39;of&#39;,
 &#39;the&#39;,
 &#39;powerful&#39;,
 &#39;priesthood&#39;,
 &#39;of&#39;,
 &#39;Bel&#39;,
 &#39;Marduk&#39;,
 &#39;,&#39;,
 &#39;the&#39;,
 &#39;dominant&#39;,
 &#39;god&#39;,
 &#39;of&#39;,
 &#39;the&#39;,
 &#39;Babylonians&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;They&#39;,
 &#39;cast&#39;,
 &#39;about&#39;,
 &#39;for&#39;,
 &#39;a&#39;,
 &#39;possible&#39;,
 &#39;alternative&#39;,
 &#39;to&#39;,
 &#39;Nabonidus&#39;,
 &#39;and&#39;,
 &#39;found&#39;,
 &#39;it&#39;,
 &#39;in&#39;,
 &#39;Cyrus&#39;,
 &#39;the&#39;,
 &#39;Persian&#39;,
 &#39;,&#39;,
 &#39;the&#39;,
 &#39;ruler&#39;,
 &#39;of&#39;,
 &#39;the&#39;,
 &#39;adjacent&#39;,
 &#39;Median&#39;,
 &#39;Empire&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;Cyrus&#39;,
 &#39;had&#39;,
 &#39;already&#39;,
 &#39;distinguished&#39;,
 &#39;himself&#39;,
 &#39;by&#39;,
 &#39;conquering&#39;,
 &#39;Croesus&#39;,
 &#39;,&#39;,
 &#39;the&#39;,
 &#39;rich&#39;,
 &#39;king&#39;,
 &#39;of&#39;,
 &#39;Lydia&#39;,
 &#39;in&#39;,
 &#39;Eastern&#39;,
 &#39;Asia&#39;,
 &#39;Minor&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;{&#39;,
 &#39;112&#39;,
 &#39;}&#39;,
 &#39;He&#39;,
 &#39;came&#39;,
 &#39;up&#39;,
 &#39;against&#39;,
 &#39;Babylon&#39;,
 &#39;,&#39;,
 &#39;there&#39;,
 &#39;was&#39;,
 &#39;a&#39;,
 &#39;battle&#39;,
 &#39;outside&#39;,
 &#39;the&#39;,
 &#39;walls&#39;,
 &#39;,&#39;,
 &#39;and&#39;,
 &#39;the&#39;,
 &#39;gates&#39;,
 &#39;of&#39;,
 &#39;the&#39;,
 &#39;city&#39;,
 &#39;were&#39;,
 &#39;opened&#39;,
 &#39;to&#39;,
 &#39;him&#39;,
 &#39;(&#39;,
 &#39;538&#39;,
 &#39;B.C.&#39;,
 &#39;)&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;His&#39;,
 &#39;soldiers&#39;,
 &#39;entered&#39;,
 &#39;the&#39;,
 &#39;city&#39;,
 &#39;without&#39;,
 &#39;fighting&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;The&#39;,
 &#39;crown&#39;,
 &#39;prince&#39;,
 &#39;Belshazzar&#39;,
 &#39;,&#39;,
 &#39;the&#39;,
 &#39;son&#39;,
 &#39;of&#39;,
 &#39;Nabonidus&#39;,
 &#39;,&#39;,
 &#39;was&#39;,
 &#39;feasting&#39;,
 &#39;,&#39;,
 &#39;the&#39;,
 &#39;Bible&#39;,
 &#39;relates&#39;,
 &#39;,&#39;,
 &#39;when&#39;,
 &#39;a&#39;,
 &#39;hand&#39;,
 &#39;appeared&#39;,
 &#39;and&#39;,
 &#39;wrote&#39;,
 &#39;in&#39;,
 &#39;letters&#39;,
 &#39;of&#39;,
 &#39;fire&#39;,
 &#39;upon&#39;,
 &#39;the&#39;,
 &#39;wall&#39;,
 &#39;these&#39;,
 &#39;mystical&#39;,
 &#39;words&#39;,
 &#39;:&#39;,
 &#39;_&#39;,
 &#39;&quot;&#39;,
 &#39;Mene&#39;,
 &#39;,&#39;,
 &#39;Mene&#39;,
 &#39;,&#39;,
 &#39;Tekel&#39;,
 &#39;,&#39;,
 &#39;Upharsin&#39;,
 &#39;,&#39;,
 &#39;&quot;&#39;,
 &#39;_&#39;,
 &#39;which&#39;,
 &#39;was&#39;,
 &#39;interpreted&#39;,
 &#39;by&#39;,
 &#39;the&#39;,
 &#39;prophet&#39;,
 &#39;Daniel&#39;,
 &#39;,&#39;,
 &#39;whom&#39;,
 &#39;he&#39;,
 &#39;summoned&#39;,
 &#39;to&#39;,
 &#39;read&#39;,
 &#39;the&#39;,
 &#39;riddle&#39;,
 &#39;,&#39;,
 &#39;as&#39;,
 &#39;&quot;&#39;,
 &#39;God&#39;,
 &#39;has&#39;,
 &#39;numbered&#39;,
 &#39;thy&#39;,
 &#39;kingdom&#39;,
 &#39;and&#39;,
 &#39;finished&#39;,
 &#39;it&#39;,
 &#39;;&#39;,
 &#39;thou&#39;,
 &#39;art&#39;,
 &#39;weighed&#39;,
 &#39;in&#39;,
 &#39;the&#39;,
 &#39;balance&#39;,
 &#39;and&#39;,
 &#39;found&#39;,
 &#39;wanting&#39;,
 &#39;and&#39;,
 &#39;thy&#39;,
 &#39;kingdom&#39;,
 &#39;is&#39;,
 &#39;given&#39;,
 &#39;to&#39;,
 &#39;the&#39;,
 &#39;Medes&#39;,
 &#39;and&#39;,
 &#39;Persians&#39;,
 &#39;.&#39;,
 &#39;&quot;&#39;,
 &#39; &#39;,
 &#39;Possibly&#39;,
 &#39;the&#39;,
 &#39;priests&#39;,
 &#39;of&#39;,
 &#39;Bel&#39;,
 &#39;Marduk&#39;,
 &#39;knew&#39;,
 &#39;something&#39;,
 &#39;about&#39;,
 &#39;that&#39;,
 &#39;writing&#39;,
 &#39;on&#39;,
 &#39;the&#39;,
 &#39;wall&#39;,
 &#39;.&#39;,
 &#39; &#39;,
 &#39;Belshazzar&#39;,
 &#39;was&#39;,
 &#39;killed&#39;,
 &#39;that&#39;,
 &#39;night&#39;,
 &#39;,&#39;,
 &#39;says&#39;,
 &#39;the&#39;,
 &#39;Bible&#39;,
 &#39;.&#39;,
 &#39;Nabonidus&#39;,
 &#39;was&#39;,
 &#39;taken&#39;,
 &#39;prisoner&#39;,
 &#39;,&#39;,
 &#39;and&#39;,
 &#39;the&#39;,
 &#39;occupation&#39;,
 &#39;of&#39;,
 &#39;the&#39;,
 &#39;city&#39;,
 &#39;was&#39;,
 &#39;so&#39;,
 &#39;peaceful&#39;,
 &#39;that&#39;,
 &#39;the&#39;,
 &#39;services&#39;,
 &#39;of&#39;,
 &#39;Bel&#39;,
 &#39;Marduk&#39;,
 &#39;continued&#39;,
 &#39;without&#39;,
 &#39;intermission&#39;,
 &#39;.&#39;]
</pre></div>
</div>
</div>
</div>
<section id="filtering-tokens">
<h3>Filtering tokens<a class="headerlink" href="#filtering-tokens" title="Permalink to this headline">#</a></h3>
<p>After extracting the tokens, we can use some attributes and methods provided by spaCy, along with some vanilla Python methods, to filter the tokens to just the types we’re interested in analyzing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># If we&#39;re only interested in analyzing word tokens, we can remove punctuation:</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[:</span><span class="mi">20</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;TOKEN: </span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="si">:</span><span class="s1">15</span><span class="si">}</span><span class="s1"> IS_PUNCTUATION: </span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">is_punct</span><span class="si">:}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">no_punct</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span> <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">is_punct</span> <span class="o">==</span> <span class="kc">False</span><span class="p">]</span>

<span class="n">no_punct</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>TOKEN: Even            IS_PUNCTUATION: False
TOKEN: under           IS_PUNCTUATION: False
TOKEN: the             IS_PUNCTUATION: False
TOKEN: Assyrian        IS_PUNCTUATION: False
TOKEN: monarchs        IS_PUNCTUATION: False
TOKEN: and             IS_PUNCTUATION: False
TOKEN: especially      IS_PUNCTUATION: False
TOKEN: under           IS_PUNCTUATION: False
TOKEN: Sardanapalus    IS_PUNCTUATION: False
TOKEN: ,               IS_PUNCTUATION: True
TOKEN: Babylon         IS_PUNCTUATION: False
TOKEN: had             IS_PUNCTUATION: False
TOKEN: been            IS_PUNCTUATION: False
TOKEN: a               IS_PUNCTUATION: False
TOKEN: scene           IS_PUNCTUATION: False
TOKEN: of              IS_PUNCTUATION: False
TOKEN: great           IS_PUNCTUATION: False
TOKEN: intellectual    IS_PUNCTUATION: False
TOKEN: activity        IS_PUNCTUATION: False
TOKEN: .               IS_PUNCTUATION: True
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[Even,
 under,
 the,
 Assyrian,
 monarchs,
 and,
 especially,
 under,
 Sardanapalus,
 Babylon,
 had,
 been,
 a,
 scene,
 of,
 great,
 intellectual,
 activity,
  ,
 111]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># There are still some space tokens; here&#39;s how to remove spaces and newlines:</span>
<span class="n">no_punct_or_space</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span> <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">is_punct</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">token</span><span class="o">.</span><span class="n">is_space</span> <span class="o">==</span> <span class="kc">False</span><span class="p">]</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">no_punct_or_space</span><span class="p">[:</span><span class="mi">30</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Even
under
the
Assyrian
monarchs
and
especially
under
Sardanapalus
Babylon
had
been
a
scene
of
great
intellectual
activity
111
Sardanapalus
though
an
Assyrian
had
been
quite
Babylon
ized
He
made
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s say we also want to remove numbers and lowercase everything that remains</span>
<span class="n">lower_alpha</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span><span class="o">.</span><span class="n">lower_</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">no_punct_or_space</span> <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">is_alpha</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span>
<span class="n">lower_alpha</span><span class="p">[:</span><span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;even&#39;,
 &#39;under&#39;,
 &#39;the&#39;,
 &#39;assyrian&#39;,
 &#39;monarchs&#39;,
 &#39;and&#39;,
 &#39;especially&#39;,
 &#39;under&#39;,
 &#39;sardanapalus&#39;,
 &#39;babylon&#39;,
 &#39;had&#39;,
 &#39;been&#39;,
 &#39;a&#39;,
 &#39;scene&#39;,
 &#39;of&#39;,
 &#39;great&#39;,
 &#39;intellectual&#39;,
 &#39;activity&#39;,
 &#39;sardanapalus&#39;,
 &#39;though&#39;,
 &#39;an&#39;,
 &#39;assyrian&#39;,
 &#39;had&#39;,
 &#39;been&#39;,
 &#39;quite&#39;,
 &#39;babylon&#39;,
 &#39;ized&#39;,
 &#39;he&#39;,
 &#39;made&#39;,
 &#39;a&#39;]
</pre></div>
</div>
</div>
</div>
<p>One additional common filtering step is to remove stopwords. In theory, stopwords can be any words we’re not interested in analyzing, but in practice, they are often the most common words in a language that do not carry much semantic information (e.g., articles, conjunctions).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">clean</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span><span class="o">.</span><span class="n">lower_</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">no_punct_or_space</span> <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">is_alpha</span> <span class="o">==</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">token</span><span class="o">.</span><span class="n">is_stop</span> <span class="o">==</span> <span class="kc">False</span><span class="p">]</span>
<span class="n">clean</span><span class="p">[:</span><span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;assyrian&#39;,
 &#39;monarchs&#39;,
 &#39;especially&#39;,
 &#39;sardanapalus&#39;,
 &#39;babylon&#39;,
 &#39;scene&#39;,
 &#39;great&#39;,
 &#39;intellectual&#39;,
 &#39;activity&#39;,
 &#39;sardanapalus&#39;,
 &#39;assyrian&#39;,
 &#39;babylon&#39;,
 &#39;ized&#39;,
 &#39;library&#39;,
 &#39;library&#39;,
 &#39;paper&#39;,
 &#39;clay&#39;,
 &#39;tablets&#39;,
 &#39;writing&#39;,
 &#39;mesopotamia&#39;,
 &#39;early&#39;,
 &#39;sumerian&#39;,
 &#39;days&#39;,
 &#39;collection&#39;,
 &#39;unearthed&#39;,
 &#39;precious&#39;,
 &#39;store&#39;,
 &#39;historical&#39;,
 &#39;material&#39;,
 &#39;world&#39;]
</pre></div>
</div>
</div>
</div>
<p>We’ve used spaCy’s built-in stopword list; membership in this list determines the property <code class="docutils literal notranslate"><span class="pre">is_stop</span></code> for each token. It’s good practice to be wary of any built-in stopword list, however – there’s a good chance you will want to remove some words that aren’t on the list and to include some that are, especially if you’re working with specialized texts.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We&#39;ll just pick a couple of words we know are in the example</span>
<span class="n">custom_stopwords</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;assyrian&quot;</span><span class="p">,</span> <span class="s2">&quot;babylon&quot;</span><span class="p">]</span>

<span class="n">custom_clean</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">clean</span> <span class="k">if</span> <span class="n">token</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">custom_stopwords</span><span class="p">]</span>
<span class="n">custom_clean</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;monarchs&#39;,
 &#39;especially&#39;,
 &#39;sardanapalus&#39;,
 &#39;scene&#39;,
 &#39;great&#39;,
 &#39;intellectual&#39;,
 &#39;activity&#39;,
 &#39;sardanapalus&#39;,
 &#39;ized&#39;,
 &#39;library&#39;,
 &#39;library&#39;,
 &#39;paper&#39;,
 &#39;clay&#39;,
 &#39;tablets&#39;,
 &#39;writing&#39;,
 &#39;mesopotamia&#39;,
 &#39;early&#39;,
 &#39;sumerian&#39;,
 &#39;days&#39;,
 &#39;collection&#39;,
 &#39;unearthed&#39;,
 &#39;precious&#39;,
 &#39;store&#39;,
 &#39;historical&#39;,
 &#39;material&#39;,
 &#39;world&#39;,
 &#39;chaldean&#39;,
 &#39;line&#39;,
 &#39;babylonian&#39;,
 &#39;monarchs&#39;,
 &#39;nabonidus&#39;,
 &#39;keener&#39;,
 &#39;literary&#39;,
 &#39;tastes&#39;,
 &#39;patronized&#39;,
 &#39;antiquarian&#39;,
 &#39;researches&#39;,
 &#39;date&#39;,
 &#39;worked&#39;,
 &#39;investigators&#39;,
 &#39;accession&#39;,
 &#39;sargon&#39;,
 &#39;commemorated&#39;,
 &#39;fact&#39;,
 &#39;inscriptions&#39;,
 &#39;signs&#39;,
 &#39;disunion&#39;,
 &#39;empire&#39;,
 &#39;sought&#39;,
 &#39;centralize&#39;,
 &#39;bringing&#39;,
 &#39;number&#39;,
 &#39;local&#39;,
 &#39;gods&#39;,
 &#39;setting&#39;,
 &#39;temples&#39;,
 &#39;device&#39;,
 &#39;practised&#39;,
 &#39;successfully&#39;,
 &#39;romans&#39;,
 &#39;later&#39;,
 &#39;times&#39;,
 &#39;roused&#39;,
 &#39;jealousy&#39;,
 &#39;powerful&#39;,
 &#39;priesthood&#39;,
 &#39;bel&#39;,
 &#39;marduk&#39;,
 &#39;dominant&#39;,
 &#39;god&#39;,
 &#39;babylonians&#39;,
 &#39;cast&#39;,
 &#39;possible&#39;,
 &#39;alternative&#39;,
 &#39;nabonidus&#39;,
 &#39;found&#39;,
 &#39;cyrus&#39;,
 &#39;persian&#39;,
 &#39;ruler&#39;,
 &#39;adjacent&#39;,
 &#39;median&#39;,
 &#39;empire&#39;,
 &#39;cyrus&#39;,
 &#39;distinguished&#39;,
 &#39;conquering&#39;,
 &#39;croesus&#39;,
 &#39;rich&#39;,
 &#39;king&#39;,
 &#39;lydia&#39;,
 &#39;eastern&#39;,
 &#39;asia&#39;,
 &#39;minor&#39;,
 &#39;came&#39;,
 &#39;battle&#39;,
 &#39;outside&#39;,
 &#39;walls&#39;,
 &#39;gates&#39;,
 &#39;city&#39;,
 &#39;opened&#39;,
 &#39;soldiers&#39;,
 &#39;entered&#39;,
 &#39;city&#39;,
 &#39;fighting&#39;,
 &#39;crown&#39;,
 &#39;prince&#39;,
 &#39;belshazzar&#39;,
 &#39;son&#39;,
 &#39;nabonidus&#39;,
 &#39;feasting&#39;,
 &#39;bible&#39;,
 &#39;relates&#39;,
 &#39;hand&#39;,
 &#39;appeared&#39;,
 &#39;wrote&#39;,
 &#39;letters&#39;,
 &#39;fire&#39;,
 &#39;wall&#39;,
 &#39;mystical&#39;,
 &#39;words&#39;,
 &#39;mene&#39;,
 &#39;mene&#39;,
 &#39;tekel&#39;,
 &#39;upharsin&#39;,
 &#39;interpreted&#39;,
 &#39;prophet&#39;,
 &#39;daniel&#39;,
 &#39;summoned&#39;,
 &#39;read&#39;,
 &#39;riddle&#39;,
 &#39;god&#39;,
 &#39;numbered&#39;,
 &#39;thy&#39;,
 &#39;kingdom&#39;,
 &#39;finished&#39;,
 &#39;thou&#39;,
 &#39;art&#39;,
 &#39;weighed&#39;,
 &#39;balance&#39;,
 &#39;found&#39;,
 &#39;wanting&#39;,
 &#39;thy&#39;,
 &#39;kingdom&#39;,
 &#39;given&#39;,
 &#39;medes&#39;,
 &#39;persians&#39;,
 &#39;possibly&#39;,
 &#39;priests&#39;,
 &#39;bel&#39;,
 &#39;marduk&#39;,
 &#39;knew&#39;,
 &#39;writing&#39;,
 &#39;wall&#39;,
 &#39;belshazzar&#39;,
 &#39;killed&#39;,
 &#39;night&#39;,
 &#39;says&#39;,
 &#39;bible&#39;,
 &#39;nabonidus&#39;,
 &#39;taken&#39;,
 &#39;prisoner&#39;,
 &#39;occupation&#39;,
 &#39;city&#39;,
 &#39;peaceful&#39;,
 &#39;services&#39;,
 &#39;bel&#39;,
 &#39;marduk&#39;,
 &#39;continued&#39;,
 &#39;intermission&#39;]
</pre></div>
</div>
</div>
</div>
<p>At this point, we have a list of lower-cased tokens that doesn’t contain punctuation, white-space, numbers, or stopwords. Depending on your analytical goals, you may or may not want to do this much cleaning, but hopefully you have a greater appreciation for the kinds of cleaning that can be done with spaCy.</p>
</section>
<section id="counting-tokens">
<h3>Counting tokens<a class="headerlink" href="#counting-tokens" title="Permalink to this headline">#</a></h3>
<p>Now that we’ve used spaCy to tokenize and clean our text, we can begin one of the most fundamental text analysis tasks: counting words!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of tokens in document: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of tokens in cleaned document: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">clean</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of unique tokens in cleaned document: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">clean</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Number of tokens in document:  442
Number of tokens in cleaned document:  175
Number of unique tokens in cleaned document:  147
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="n">full_counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">([</span><span class="n">token</span><span class="o">.</span><span class="n">lower_</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">])</span>
<span class="n">full_counter</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;the&#39;, 36),
 (&#39;,&#39;, 26),
 (&#39;of&#39;, 20),
 (&#39;.&#39;, 16),
 (&#39; &#39;, 14),
 (&#39;and&#39;, 13),
 (&#39;in&#39;, 9),
 (&#39;a&#39;, 8),
 (&#39;was&#39;, 8),
 (&#39;to&#39;, 8),
 (&#39;he&#39;, 6),
 (&#39;by&#39;, 6),
 (&#39;babylon&#39;, 5),
 (&#39;had&#39;, 4),
 (&#39;that&#39;, 4),
 (&#39;his&#39;, 4),
 (&#39;nabonidus&#39;, 4),
 (&#39;it&#39;, 4),
 (&#39;&quot;&#39;, 4),
 (&#39;been&#39;, 3)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cleaned_counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">clean</span><span class="p">)</span>
<span class="n">cleaned_counter</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;babylon&#39;, 5),
 (&#39;nabonidus&#39;, 4),
 (&#39;bel&#39;, 3),
 (&#39;marduk&#39;, 3),
 (&#39;city&#39;, 3),
 (&#39;assyrian&#39;, 2),
 (&#39;monarchs&#39;, 2),
 (&#39;sardanapalus&#39;, 2),
 (&#39;library&#39;, 2),
 (&#39;writing&#39;, 2),
 (&#39;empire&#39;, 2),
 (&#39;god&#39;, 2),
 (&#39;found&#39;, 2),
 (&#39;cyrus&#39;, 2),
 (&#39;belshazzar&#39;, 2),
 (&#39;bible&#39;, 2),
 (&#39;wall&#39;, 2),
 (&#39;mene&#39;, 2),
 (&#39;thy&#39;, 2),
 (&#39;kingdom&#39;, 2)]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="part-of-speech-tagging">
<h2>Part-of-speech tagging<a class="headerlink" href="#part-of-speech-tagging" title="Permalink to this headline">#</a></h2>
<p>Let’s consider some other aspects of the text that spaCy exposes for us. One of the most noteworthy features is part-of-speech tagging.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># spaCy provides two levels of POS tagging. Here&#39;s the more general level.</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[:</span><span class="mi">30</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Even ADV
under ADP
the DET
Assyrian ADJ
monarchs NOUN
and CCONJ
especially ADV
under ADP
Sardanapalus PROPN
, PUNCT
Babylon PROPN
had AUX
been AUX
a DET
scene NOUN
of ADP
great ADJ
intellectual ADJ
activity NOUN
. PUNCT
  SPACE
{ PUNCT
111 NUM
} PUNCT
Sardanapalus PROPN
, PUNCT
though SCONJ
an DET
Assyrian PROPN
, PUNCT
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># spaCy also provides the more specific Penn Treenbank tags.</span>
<span class="c1"># https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[:</span><span class="mi">30</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">tag_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Even RB
under IN
the DT
Assyrian JJ
monarchs NNS
and CC
especially RB
under IN
Sardanapalus NNP
, ,
Babylon NNP
had VBD
been VBN
a DT
scene NN
of IN
great JJ
intellectual JJ
activity NN
. .
  _SP
{ -LRB-
111 CD
} -RRB-
Sardanapalus NNP
, ,
though IN
an DT
Assyrian NNP
, ,
</pre></div>
</div>
</div>
</div>
<p>We can count the occurrences of each part of speech in the text, which may be useful for document classification (fiction may have different proportions of parts of speech relative to nonfiction, for example) or stylistic analysis (more on that later).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nouns</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span> <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span> <span class="o">==</span> <span class="s2">&quot;NOUN&quot;</span><span class="p">]</span>
<span class="n">verbs</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span> <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span> <span class="o">==</span> <span class="s2">&quot;VERB&quot;</span><span class="p">]</span>
<span class="n">proper_nouns</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span> <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span> <span class="o">==</span> <span class="s2">&quot;PROPN&quot;</span><span class="p">]</span>
<span class="n">adjectives</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span> <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span> <span class="o">==</span> <span class="s2">&quot;ADJ&quot;</span><span class="p">]</span>
<span class="n">adverbs</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span> <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span> <span class="o">==</span> <span class="s2">&quot;ADV&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pos_counts</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;nouns&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">nouns</span><span class="p">),</span>
    <span class="s2">&quot;verbs&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">verbs</span><span class="p">),</span>
    <span class="s2">&quot;proper_nouns&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">proper_nouns</span><span class="p">),</span>
    <span class="s2">&quot;adjectives&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">adjectives</span><span class="p">),</span>
    <span class="s2">&quot;adverbs&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">adverbs</span><span class="p">)</span> 
<span class="p">}</span>

<span class="n">pos_counts</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;nouns&#39;: 66, &#39;verbs&#39;: 43, &#39;proper_nouns&#39;: 45, &#39;adjectives&#39;: 24, &#39;adverbs&#39;: 12}
</pre></div>
</div>
</div>
</div>
<p>spaCy performs morphosyntactic analysis of individual tokens, including lemmatizing inflected or conjugated forms to their base (dictionary) forms. Reducing words to their lemmatized forms can help to make a large corpus more manageable and is generally more effective than just stemming words (trimming the inflected/conjugated endings of words until just the base portion remains), but should only be done if the inflections are not relevant to your analysis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;NOUN&quot;</span><span class="p">,</span> <span class="s2">&quot;VERB&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">token</span><span class="o">.</span><span class="n">orth_</span> <span class="o">!=</span> <span class="n">token</span><span class="o">.</span><span class="n">lemma_</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">lemma_</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>monarchs        monarch
ized            ize
made            make
tablets         tablet
used            use
writing         write
days            day
unearthed       unearth
monarchs        monarch
had             have
tastes          taste
patronized      patronize
researches      research
worked          work
investigators   investigator
commemorated    commemorate
inscriptions    inscription
were            be
signs           sign
sought          seek
bringing        bring
gods            god
setting         set
temples         temple
practised       practise
times           time
roused          rouse
found           find
distinguished   distinguish
conquering      conquer
came            come
was             be
walls           wall
gates           gate
opened          open
soldiers        soldier
entered         enter
fighting        fight
feasting        feast
relates         relate
appeared        appear
wrote           write
letters         letter
words           word
interpreted     interpret
summoned        summon
numbered        number
finished        finish
weighed         weigh
found           find
wanting         want
given           give
priests         priest
knew            know
killed          kill
says            say
taken           take
services        service
continued       continue
</pre></div>
</div>
</div>
</div>
<section id="parsing">
<h3>Parsing<a class="headerlink" href="#parsing" title="Permalink to this headline">#</a></h3>
<p>spaCy’s trained models also provide full dependency parsing, tagging word tokens with their syntactic relations to other tokens. This functionality drives spaCy’s built-in senticization as well.</p>
<p>We won’t spend much time exploring this feature, but it’s useful to see how it enables the extraction of multi-word “noun chunks” from the text. Note also that textacy (discussed below) has a built-in function to extract subject-verb-object triples from sentences.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">noun_chunks</span><span class="p">,</span> <span class="mi">20</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>the Assyrian monarchs
Sardanapalus
Babylon
a scene
great intellectual activity
 {111} Sardanapalus
an Assyrian
He
a library
a library
paper
the clay tablets
that
Mesopotamia
early Sumerian days
His collection
the most precious store
historical material
the world
 The last
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="named-entity-recognition">
<h2>Named-entity recognition<a class="headerlink" href="#named-entity-recognition" title="Permalink to this headline">#</a></h2>
<p>spaCy’s models do a pretty good job of identifying and classifying named entities (people, places, organizations).</p>
<p>It is also fairly easy to customize and fine-tune these models by providing additional training data (e.g., texts with entities labeled according to the desired scheme), but that’s out of the scope of this workshop.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">ents</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ent</span><span class="o">.</span><span class="n">text</span><span class="si">:</span><span class="s1">20</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">ent</span><span class="o">.</span><span class="n">label_</span><span class="si">:</span><span class="s1">15</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">spacy</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="n">ent</span><span class="o">.</span><span class="n">label_</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Assyrian             NORP            Nationalities or religious or political groups
Sardanapalus         WORK_OF_ART     Titles of books, songs, etc.
Babylon              GPE             Countries, cities, states
111                  CARDINAL        Numerals that do not fall under another type
Assyrian             NORP            Nationalities or religious or political groups
Babylon              ORG             Companies, agencies, institutions, etc.
Mesopotamia          LOC             Non-GPE locations, mountain ranges, bodies of water
early Sumerian days  DATE            Absolute or relative dates or periods
Chaldean             NORP            Nationalities or religious or political groups
Babylonian           NORP            Nationalities or religious or political groups
Nabonidus            ORG             Companies, agencies, institutions, etc.
Sargon               ORG             Companies, agencies, institutions, etc.
Romans               NORP            Nationalities or religious or political groups
Babylon              GPE             Countries, cities, states
Bel Marduk           PERSON          People, including fictional
Babylonians          NORP            Nationalities or religious or political groups
Nabonidus            ORG             Companies, agencies, institutions, etc.
Persian              NORP            Nationalities or religious or political groups
Croesus              PERSON          People, including fictional
Lydia                PERSON          People, including fictional
Eastern Asia Minor   LOC             Non-GPE locations, mountain ranges, bodies of water
112                  CARDINAL        Numerals that do not fall under another type
Babylon              ORG             Companies, agencies, institutions, etc.
538                  CARDINAL        Numerals that do not fall under another type
B.C.                 GPE             Countries, cities, states
Nabonidus            PERSON          People, including fictional
Bible                WORK_OF_ART     Titles of books, songs, etc.
Mene                 PERSON          People, including fictional
Tekel                ORG             Companies, agencies, institutions, etc.
Upharsin             PERSON          People, including fictional
Medes                NORP            Nationalities or religious or political groups
Persians             NORP            Nationalities or religious or political groups
Bel Marduk           PERSON          People, including fictional
that night           TIME            Times smaller than a day
Bible                WORK_OF_ART     Titles of books, songs, etc.
Nabonidus            PERSON          People, including fictional
Bel Marduk           PERSON          People, including fictional
</pre></div>
</div>
</div>
</div>
<p>What if we only care about geo-political entities or locations?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ent_filtered</span> <span class="o">=</span> <span class="p">[(</span><span class="n">ent</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">ent</span><span class="o">.</span><span class="n">label_</span><span class="p">)</span> <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">ents</span> <span class="k">if</span> <span class="n">ent</span><span class="o">.</span><span class="n">label_</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;GPE&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">]]</span>
<span class="n">ent_filtered</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;Babylon&#39;, &#39;GPE&#39;),
 (&#39;Mesopotamia&#39;, &#39;LOC&#39;),
 (&#39;Babylon&#39;, &#39;GPE&#39;),
 (&#39;Eastern Asia Minor&#39;, &#39;LOC&#39;),
 (&#39;B.C.&#39;, &#39;GPE&#39;)]
</pre></div>
</div>
</div>
</div>
<section id="visualizing-parses">
<h3>Visualizing Parses<a class="headerlink" href="#visualizing-parses" title="Permalink to this headline">#</a></h3>
<p>The built-in displaCy visualizer can render the results of the named-entity recognition, as well as the dependency parser.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">spacy</span> <span class="kn">import</span> <span class="n">displacy</span>
<span class="n">displacy</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;ent&quot;</span><span class="p">,</span> <span class="n">jupyter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span class="tex2jax_ignore"><div class="entities" style="line-height: 2.5; direction: ltr">Even under the 
<mark class="entity" style="background: #c887fb; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Assyrian
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">NORP</span>
</mark>
 monarchs and especially under 
<mark class="entity" style="background: #f0d0ff; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Sardanapalus
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">WORK_OF_ART</span>
</mark>
, 
<mark class="entity" style="background: #feca74; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Babylon
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">GPE</span>
</mark>
 had been a scene of great intellectual activity.  {
<mark class="entity" style="background: #e4e7d2; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    111
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">CARDINAL</span>
</mark>
} Sardanapalus, though an 
<mark class="entity" style="background: #c887fb; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Assyrian
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">NORP</span>
</mark>
, had been quite 
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Babylon
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
-ized.  He made a library, a library not of paper but of the clay tablets that were used for writing in 
<mark class="entity" style="background: #ff9561; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Mesopotamia
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">LOC</span>
</mark>
 since 
<mark class="entity" style="background: #bfe1d9; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    early Sumerian days
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">DATE</span>
</mark>
.  His collection has been unearthed and is perhaps the most precious store of historical material in the world.  The last of the 
<mark class="entity" style="background: #c887fb; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Chaldean
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">NORP</span>
</mark>
 line of 
<mark class="entity" style="background: #c887fb; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Babylonian
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">NORP</span>
</mark>
 monarchs, 
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Nabonidus
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
, had even keener literary tastes.  He patronized antiquarian researches, and when a date was worked out by his investigators for the accession of 
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Sargon
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
 I he commemorated the fact by inscriptions.  But there were many signs of disunion in his empire, and he sought to centralize it by bringing a number of the various local gods to Babylon and setting up temples to them there.  This device was to be practised quite successfully by the 
<mark class="entity" style="background: #c887fb; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Romans
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">NORP</span>
</mark>
 in later times, but in 
<mark class="entity" style="background: #feca74; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Babylon
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">GPE</span>
</mark>
 it roused the jealousy of the powerful priesthood of 
<mark class="entity" style="background: #aa9cfc; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Bel Marduk
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">PERSON</span>
</mark>
, the dominant god of the 
<mark class="entity" style="background: #c887fb; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Babylonians
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">NORP</span>
</mark>
.  They cast about for a possible alternative to 
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Nabonidus
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
 and found it in Cyrus the 
<mark class="entity" style="background: #c887fb; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Persian
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">NORP</span>
</mark>
, the ruler of the adjacent Median Empire.  Cyrus had already distinguished himself by conquering 
<mark class="entity" style="background: #aa9cfc; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Croesus
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">PERSON</span>
</mark>
, the rich king of 
<mark class="entity" style="background: #aa9cfc; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Lydia
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">PERSON</span>
</mark>
 in 
<mark class="entity" style="background: #ff9561; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Eastern Asia Minor
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">LOC</span>
</mark>
.  {
<mark class="entity" style="background: #e4e7d2; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    112
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">CARDINAL</span>
</mark>
} He came up against 
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Babylon
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
, there was a battle outside the walls, and the gates of the city were opened to him (
<mark class="entity" style="background: #e4e7d2; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    538
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">CARDINAL</span>
</mark>

<mark class="entity" style="background: #feca74; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    B.C.
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">GPE</span>
</mark>
).  His soldiers entered the city without fighting.  The crown prince Belshazzar, the son of 
<mark class="entity" style="background: #aa9cfc; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Nabonidus
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">PERSON</span>
</mark>
, was feasting, the 
<mark class="entity" style="background: #f0d0ff; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Bible
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">WORK_OF_ART</span>
</mark>
 relates, when a hand appeared and wrote in letters of fire upon the wall these mystical words: _&quot;Mene, 
<mark class="entity" style="background: #aa9cfc; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Mene
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">PERSON</span>
</mark>
, 
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Tekel
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
, 
<mark class="entity" style="background: #aa9cfc; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Upharsin
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">PERSON</span>
</mark>
,&quot;_ which was interpreted by the prophet Daniel, whom he summoned to read the riddle, as &quot;God has numbered thy kingdom and finished it; thou art weighed in the balance and found wanting and thy kingdom is given to the 
<mark class="entity" style="background: #c887fb; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Medes
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">NORP</span>
</mark>
 and 
<mark class="entity" style="background: #c887fb; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Persians
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">NORP</span>
</mark>
.&quot;  Possibly the priests of 
<mark class="entity" style="background: #aa9cfc; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Bel Marduk
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">PERSON</span>
</mark>
 knew something about that writing on the wall.  Belshazzar was killed 
<mark class="entity" style="background: #bfe1d9; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    that night
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">TIME</span>
</mark>
, says the 
<mark class="entity" style="background: #f0d0ff; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Bible
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">WORK_OF_ART</span>
</mark>
. 
<mark class="entity" style="background: #aa9cfc; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Nabonidus
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">PERSON</span>
</mark>
 was taken prisoner, and the occupation of the city was so peaceful that the services of 
<mark class="entity" style="background: #aa9cfc; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Bel Marduk
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">PERSON</span>
</mark>
 continued without intermission.</div></span></div></div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="corpus-level-analysis-with-textacy">
<h1>Corpus-level analysis with <code class="docutils literal notranslate"><span class="pre">textacy</span></code><a class="headerlink" href="#corpus-level-analysis-with-textacy" title="Permalink to this headline">#</a></h1>
<p>Let’s shift to thinking about a whole corpus rather than a single document. We could analyze multiple documents with spaCy and then knit the results together with some extra Python. Instead, though, we’re going to take advantage of textacy, a library built on spaCy that adds corpus analysis features.</p>
<p>For reference, here’s the <a class="reference external" href="https://textacy.readthedocs.io/en/stable/api_reference/root.html">online documentation for textacy</a>.</p>
<section id="generating-corpora">
<h2>Generating corpora<a class="headerlink" href="#generating-corpora" title="Permalink to this headline">#</a></h2>
<p>We’ll use some of the data that is included in textacy as our corpus. It is certainly possible to build your own corpus by importing data from files in plain text, XML, JSON, CSV or other formats, but working with one of textacy’s “pre-cooked” datasets simplifies things a bit.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">textacy.datasets</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We&#39;ll work with a dataset of ~8,400 (&quot;almost all&quot;) U.S. Supreme Court</span>
<span class="c1"># decisions from November 1946 through June 2016</span>
<span class="c1"># https://github.com/bdewilde/textacy-data/releases/tag/supreme_court_py3_v1.0</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">textacy</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">SupremeCourt</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">download</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>The documentation indicates the metadata that is available with each text.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">textacy</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">supreme_court</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on module textacy.datasets.supreme_court in textacy.datasets:

NAME
    textacy.datasets.supreme_court

DESCRIPTION
    Supreme Court decisions
    -----------------------
    
    A collection of ~8.4k (almost all) decisions issued by the U.S. Supreme Court
    from November 1946 through June 2016 -- the &quot;modern&quot; era.
    
    Records include the following data:
    
        - ``text``: Full text of the Court&#39;s decision.
        - ``case_name``: Name of the court case, in all caps.
        - ``argument_date``: Date on which the case was argued before the Court, as
          an ISO-formatted string (&quot;YYYY-MM-DD&quot;).
        - ``decision_date``: Date on which the Court&#39;s decision was announced, as
          an ISO-formatted string (&quot;YYYY-MM-DD&quot;).
        - ``decision_direction``: Ideological direction of the majority&#39;s decision:
          one of &quot;conservative&quot;, &quot;liberal&quot;, or &quot;unspecifiable&quot;.
        - ``maj_opinion_author``: Name of the majority opinion&#39;s author, if available
          and identifiable, as an integer code whose mapping is given in
          :attr:`SupremeCourt.opinion_author_codes`.
        - ``n_maj_votes``: Number of justices voting in the majority.
        - ``n_min_votes``: Number of justices voting in the minority.
        - ``issue``: Subject matter of the case&#39;s core disagreement (e.g. &quot;affirmative
          action&quot;) rather than its legal basis (e.g. &quot;the equal protection clause&quot;),
          as a string code whose mapping is given in :attr:`SupremeCourt.issue_codes`.
        - ``issue_area``: Higher-level categorization of the issue (e.g. &quot;Civil Rights&quot;),
          as an integer code whose mapping is given in :attr:`SupremeCourt.issue_area_codes`.
        - ``us_cite_id``: Citation identifier for each case according to the official
          United States Reports. Note: There are ~300 cases with duplicate ids,
          and it&#39;s not clear if that&#39;s &quot;correct&quot; or a data quality problem.
    
    The text in this dataset was derived from FindLaw&#39;s searchable database of court
    cases: http://caselaw.findlaw.com/court/us-supreme-court.
    
    The metadata was extracted without modification from the Supreme Court Database:
    Harold J. Spaeth, Lee Epstein, et al. 2016 Supreme Court Database, Version 2016
    Release 1. http://supremecourtdatabase.org. Its license is CC BY-NC 3.0 US:
    https://creativecommons.org/licenses/by-nc/3.0/us/.
    
    This dataset&#39;s creation was inspired by a blog post by Emily Barry:
    http://www.emilyinamillion.me/blog/2016/7/13/visualizing-supreme-court-topics-over-time.
    
    The two datasets were merged through much munging and a carefully
    trained model using the ``dedupe`` package. The model&#39;s duplicate threshold
    was set so as to maximize the F-score where precision had twice as much
    weight as recall. Still, given occasionally baffling inconsistencies in case
    naming, citation ids, and decision dates, a very small percentage of texts
    may be incorrectly matched to metadata. (Sorry.)

CLASSES
    textacy.datasets.base.Dataset(builtins.object)
        SupremeCourt
    
    class SupremeCourt(textacy.datasets.base.Dataset)
     |  SupremeCourt(data_dir: Union[str, pathlib.Path] = PosixPath(&#39;/Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages/textacy/data/supreme_court&#39;))
     |  
     |  Stream a collection of US Supreme Court decisions from a compressed json file on disk,
     |  either as texts or text + metadata pairs.
     |  
     |  Download the data (one time only!) from the textacy-data repo
     |  (https://github.com/bdewilde/textacy-data), and save its contents to disk::
     |  
     |      &gt;&gt;&gt; import textacy.datasets
     |      &gt;&gt;&gt; ds = textacy.datasets.SupremeCourt()
     |      &gt;&gt;&gt; ds.download()
     |      &gt;&gt;&gt; ds.info
     |      {&#39;name&#39;: &#39;supreme_court&#39;,
     |       &#39;site_url&#39;: &#39;http://caselaw.findlaw.com/court/us-supreme-court&#39;,
     |       &#39;description&#39;: &#39;Collection of ~8.4k decisions issued by the U.S. Supreme Court between November 1946 and June 2016.&#39;}
     |  
     |  Iterate over decisions as texts or records with both text and metadata::
     |  
     |      &gt;&gt;&gt; for text in ds.texts(limit=3):
     |      ...     print(text[:500], end=&quot;\n\n&quot;)
     |      &gt;&gt;&gt; for text, meta in ds.records(limit=3):
     |      ...     print(&quot;\n{} ({})\n{}&quot;.format(meta[&quot;case_name&quot;], meta[&quot;decision_date&quot;], text[:500]))
     |  
     |  Filter decisions by a variety of metadata fields and text length::
     |  
     |      &gt;&gt;&gt; for text, meta in ds.records(opinion_author=109, limit=3):  # Notorious RBG!
     |      ...     print(meta[&quot;case_name&quot;], meta[&quot;decision_direction&quot;], meta[&quot;n_maj_votes&quot;])
     |      &gt;&gt;&gt; for text, meta in ds.records(decision_direction=&quot;liberal&quot;,
     |      ...                              issue_area={1, 9, 10}, limit=3):
     |      ...     print(meta[&quot;case_name&quot;], meta[&quot;maj_opinion_author&quot;], meta[&quot;n_maj_votes&quot;])
     |      &gt;&gt;&gt; for text, meta in ds.records(opinion_author=102, date_range=(&#39;1985-02-11&#39;, &#39;1986-02-11&#39;)):
     |      ...     print(&quot;\n{} ({})&quot;.format(meta[&quot;case_name&quot;], meta[&quot;decision_date&quot;]))
     |      ...     print(ds.issue_codes[meta[&quot;issue&quot;]], &quot;=&gt;&quot;, meta[&quot;decision_direction&quot;])
     |      &gt;&gt;&gt; for text in ds.texts(min_len=250000):
     |      ...     print(len(text))
     |  
     |  Stream decisions into a :class:`textacy.Corpus &lt;textacy.corpus.Corpus&gt;`::
     |  
     |      &gt;&gt;&gt; textacy.Corpus(&quot;en&quot;, data=ds.records(limit=25))
     |      Corpus(25 docs; 136696 tokens)
     |  
     |  Args:
     |      data_dir (str or :class:`pathlib.Path`): Path to directory on disk
     |          under which the data is stored, i.e. ``/path/to/data_dir/supreme_court``.
     |  
     |  Attributes:
     |      full_date_range: First and last dates for which decisions are available,
     |          each as an ISO-formatted string (YYYY-MM-DD).
     |      decision_directions: All distinct decision directions, e.g. &quot;liberal&quot;.
     |      opinion_author_codes: Mapping of majority opinion authors,
     |          from id code to full name.
     |      issue_area_codes: Mapping of high-level issue area of the case&#39;s core disagreement,
     |          from id code to description.
     |      issue_codes: Mapping of the specific issue of the case&#39;s core disagreement,
     |          from id code to description.
     |  
     |  Method resolution order:
     |      SupremeCourt
     |      textacy.datasets.base.Dataset
     |      builtins.object
     |  
     |  Methods defined here:
     |  
     |  __init__(self, data_dir: Union[str, pathlib.Path] = PosixPath(&#39;/Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages/textacy/data/supreme_court&#39;))
     |      Initialize self.  See help(type(self)) for accurate signature.
     |  
     |  __iter__(self)
     |  
     |  download(self, *, force: bool = False) -&gt; None
     |      Download the data as a Python version-specific compressed json file and
     |      save it to disk under the ``data_dir`` directory.
     |      
     |      Args:
     |          force: If True, download the dataset, even if it already exists
     |              on disk under ``data_dir``.
     |  
     |  records(self, *, opinion_author: Union[int, Set[int], NoneType] = None, decision_direction: Union[str, Set[str], NoneType] = None, issue_area: Union[int, Set[int], NoneType] = None, date_range: Union[Tuple[Union[str, NoneType], Union[str, NoneType]], NoneType] = None, min_len: Union[int, NoneType] = None, limit: Union[int, NoneType] = None) -&gt; Iterable[textacy.types.Record]
     |      Iterate over decisions in this dataset, optionally filtering by a variety
     |      of metadata and/or text length, and yield text + metadata pairs,
     |      in chronological order by decision date.
     |      
     |      Args:
     |          opinion_author: Filter decisions by the name(s) of the majority opinion&#39;s author,
     |              coded as an integer whose mapping is given in
     |              :attr:`SupremeCourt.opinion_author_codes`.
     |          decision_direction: Filter decisions by the ideological direction
     |              of the majority&#39;s decision; see
     |              :attr:`SupremeCourt.decision_directions`.
     |          issue_area: Filter decisions by the issue area of the case&#39;s subject matter,
     |              coded as an integer whose mapping is given in
     |              :attr:`SupremeCourt.issue_area_codes`.
     |          date_range: Filter decisions by the date on which they were decided;
     |              both start and end date must be specified, but a null value for either
     |              will be replaced by the min/max date available for the dataset.
     |          min_len: Filter decisions by the length (# characters) of their text content.
     |          limit: Yield no more than ``limit`` decisions that match all specified filters.
     |      
     |      Yields:
     |          Text of the next decision in dataset passing all filters,
     |          and its corresponding metadata.
     |      
     |      Raises:
     |          ValueError: If any filtering options are invalid.
     |  
     |  texts(self, *, opinion_author: Union[int, Set[int], NoneType] = None, decision_direction: Union[str, Set[str], NoneType] = None, issue_area: Union[int, Set[int], NoneType] = None, date_range: Union[Tuple[Union[str, NoneType], Union[str, NoneType]], NoneType] = None, min_len: Union[int, NoneType] = None, limit: Union[int, NoneType] = None) -&gt; Iterable[str]
     |      Iterate over decisions in this dataset, optionally filtering by a variety
     |      of metadata and/or text length, and yield texts only,
     |      in chronological order by decision date.
     |      
     |      Args:
     |          opinion_author: Filter decisions by the name(s) of the majority opinion&#39;s author,
     |              coded as an integer whose mapping is given in
     |              :attr:`SupremeCourt.opinion_author_codes`.
     |          decision_direction: Filter decisions by the ideological direction
     |              of the majority&#39;s decision; see
     |              :attr:`SupremeCourt.decision_directions`.
     |          issue_area: Filter decisions by the issue area of the case&#39;s subject matter,
     |              coded as an integer whose mapping is given in
     |              :attr:`SupremeCourt.issue_area_codes`.
     |          date_range: Filter decisions by the date on which they were decided;
     |              both start and end date must be specified, but a null value for either
     |              will be replaced by the min/max date available for the dataset.
     |          min_len: Filter decisions by the length (# characters) of their text content.
     |          limit: Yield no more than ``limit`` decisions that match all specified filters.
     |      
     |      Yields:
     |          Text of the next decision in dataset passing all filters.
     |      
     |      Raises:
     |          ValueError: If any filtering options are invalid.
     |  
     |  ----------------------------------------------------------------------
     |  Readonly properties defined here:
     |  
     |  filepath
     |      Full path on disk for SupremeCourt data as compressed json file.
     |      ``None`` if file is not found, e.g. has not yet been downloaded.
     |  
     |  ----------------------------------------------------------------------
     |  Data and other attributes defined here:
     |  
     |  __annotations__ = {&#39;decision_directions&#39;: typing.Set[str], &#39;full_date_...
     |  
     |  decision_directions = {&#39;conservative&#39;, &#39;liberal&#39;, &#39;unspecifiable&#39;}
     |  
     |  full_date_range = (&#39;1946-11-18&#39;, &#39;2016-06-27&#39;)
     |  
     |  issue_area_codes = {-1: None, 1: &#39;Criminal Procedure&#39;, 2: &#39;Civil Right...
     |  
     |  issue_codes = {&#39;100010&#39;: &#39;federal-state ownership dispute (cf. Submerg...
     |  
     |  opinion_author_codes = {-1: None, 1: &#39;Jay, John&#39;, 2: &#39;Rutledge, John&#39;,...
     |  
     |  ----------------------------------------------------------------------
     |  Methods inherited from textacy.datasets.base.Dataset:
     |  
     |  __repr__(self)
     |      Return repr(self).
     |  
     |  ----------------------------------------------------------------------
     |  Readonly properties inherited from textacy.datasets.base.Dataset:
     |  
     |  info
     |  
     |  ----------------------------------------------------------------------
     |  Data descriptors inherited from textacy.datasets.base.Dataset:
     |  
     |  __dict__
     |      dictionary for instance variables (if defined)
     |  
     |  __weakref__
     |      list of weak references to the object (if defined)

DATA
    DOWNLOAD_ROOT = &#39;https://github.com/bdewilde/textacy-data/releases/dow...
    Dict = typing.Dict
    Iterable = typing.Iterable
    LOGGER = &lt;Logger textacy.datasets.supreme_court (WARNING)&gt;
    META = {&#39;description&#39;: &#39;Collection of ~8.4k decisions issued by the U....
    NAME = &#39;supreme_court&#39;
    Optional = typing.Optional
    Set = typing.Set
    Tuple = typing.Tuple
    Union = typing.Union

FILE
    /Users/evanmuzzall/opt/anaconda3/lib/python3.8/site-packages/textacy/datasets/supreme_court.py
</pre></div>
</div>
</div>
</div>
<p>textacy is based on the concept of a corpus, whereas spaCy focuses on single documents. A textacy corpus is instantiated with a spaCy language model (we’re using the one from the first half of this workshop) that is used to apply its analytical pipeline to each text in the corpus, and also given a set of records consisting of texts with metadata (if metadata is available).</p>
<p>Let’s go ahead and define a set of records (texts with metadata) that we’ll then add to our corpus. To keep the processing time of the data set a bit more manageable, we’ll just look at a set of court decisions from a short span of time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span><span class="p">,</span> <span class="n">clear_output</span>
<span class="n">corpus</span> <span class="o">=</span> <span class="n">textacy</span><span class="o">.</span><span class="n">Corpus</span><span class="p">(</span><span class="n">nlp</span><span class="p">)</span>

<span class="c1"># There are 79 docs in this range -- they&#39;ll take a minute or two to process</span>
<span class="n">recent_decisions</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">records</span><span class="p">(</span><span class="n">date_range</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;2010-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2010-12-31&#39;</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">record</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">recent_decisions</span><span class="p">):</span>
    <span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;pre&gt;</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">:</span><span class="s2">&gt;2</span><span class="si">}</span><span class="s2">/79: Adding </span><span class="si">{</span><span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;case_name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&lt;/pre&gt;&quot;</span><span class="p">))</span>
    <span class="n">corpus</span><span class="o">.</span><span class="n">add_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>

<span class="c1"># If the three lines above are taking too long to process all 79 docs,</span>
<span class="c1"># comment them out and uncomment the two lines below to download and import</span>
<span class="c1"># a preprocessed version of the corpus</span>

<span class="c1">#!wget https://github.com/sul-cidr/Workshops/raw/master/Text_Analysis_with_Python/data/scotus_2010.bin.gz</span>
<span class="c1">#corpus = textacy.Corpus.load(nlp, &quot;scotus_2010.bin.gz&quot;)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>79/79: Adding KEITH SMITH, WARDEN v. FRANK G. SPISAK, JR.</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">corpus</span><span class="p">))</span>
<span class="p">[</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">preview</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">corpus</span><span class="p">[:</span><span class="mi">5</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>79
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Doc(13007 tokens: &quot;Respondent New York City taxes the possession o...&quot;)&#39;,
 &#39;Doc(72325 tokens: &quot;As amended by §203 of the Bipartisan Campaign R...&quot;)&#39;,
 &#39;Doc(8333 tokens: &quot;Under 28 U. S. C. §2254(d)(2), a federal court ...&quot;)&#39;,
 &#39;Doc(9947 tokens: &quot;The Illegal Immigration Reform and Immigrant Re...&quot;)&#39;,
 &#39;Doc(5508 tokens: &quot;Per Curiam.  From beginning to end, judicial pr...&quot;)&#39;]
</pre></div>
</div>
</div>
</div>
<p>We can see that the type of each item in the corpus is a <code class="docutils literal notranslate"><span class="pre">Doc</span></code> - this is a processed spaCy output document, with all of the extracted features. textacy provides some capacity to work with those features via its API, and also exposes new document-level features, such as ngrams and algorithms to determine a document’s readability level, among others.</p>
<p>We can filter this corpus based on metadata attributes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">corpus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">meta</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;issue&#39;: &#39;80170&#39;,
 &#39;issue_area&#39;: 8,
 &#39;n_min_votes&#39;: 3,
 &#39;case_name&#39;: &#39;HEMI GROUP, LLC AND KAI GACHUPIN v. CITY OF NEW YORK, NEW YORK&#39;,
 &#39;maj_opinion_author&#39;: 111,
 &#39;decision_date&#39;: &#39;2010-01-25&#39;,
 &#39;decision_direction&#39;: &#39;conservative&#39;,
 &#39;n_maj_votes&#39;: 5,
 &#39;us_cite_id&#39;: &#39;559 U.S. 1&#39;,
 &#39;argument_date&#39;: &#39;2009-11-03&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Here we&#39;ll find all the cases where the number of justices voting in the majority was greater than 6. </span>
<span class="n">supermajorities</span> <span class="o">=</span> <span class="p">[</span><span class="n">doc</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">corpus</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="k">lambda</span> <span class="n">doc</span><span class="p">:</span> <span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s2">&quot;n_maj_votes&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">)]</span>
<span class="nb">len</span><span class="p">(</span><span class="n">supermajorities</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>53
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">supermajorities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">preview</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Doc(8333 tokens: &quot;Under 28 U. S. C. §2254(d)(2), a federal court ...&quot;)&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="finding-important-words-in-the-corpus">
<h2>Finding important words in the corpus<a class="headerlink" href="#finding-important-words-in-the-corpus" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;number of documents: &quot;</span><span class="p">,</span> <span class="n">corpus</span><span class="o">.</span><span class="n">n_docs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;number of sentences: &quot;</span><span class="p">,</span> <span class="n">corpus</span><span class="o">.</span><span class="n">n_sents</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;number of tokens: &quot;</span><span class="p">,</span> <span class="n">corpus</span><span class="o">.</span><span class="n">n_tokens</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>number of documents:  79
number of sentences:  42470
number of tokens:  1189205
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">corpus</span><span class="o">.</span><span class="n">word_counts</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;orth_&quot;</span><span class="p">,</span> <span class="n">filter_stops</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">filter_punct</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">filter_nums</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;Respondent&#39;: 250,
 &#39;New&#39;: 413,
 &#39;York&#39;: 284,
 &#39;City&#39;: 340,
 &#39;taxes&#39;: 56,
 &#39;the&#39;: 56729,
 &#39;possession&#39;: 216,
 &#39;of&#39;: 30659,
 &#39;cigarettes&#39;: 23,
 &#39;.&#39;: 44541,
 &#39;Petitioner&#39;: 246,
 &#39;Hemi&#39;: 82,
 &#39;Group&#39;: 37,
 &#39;,&#39;: 72059,
 &#39;based&#39;: 526,
 &#39;in&#39;: 14744,
 &#39;Mexico&#39;: 16,
 &#39;sells&#39;: 6,
 &#39;online&#39;: 49,
 &#39;to&#39;: 25427,
 &#39;residents&#39;: 25,
 &#39;Neither&#39;: 74,
 &#39;state&#39;: 1920,
 &#39;nor&#39;: 242,
 &#39;city&#39;: 48,
 &#39;law&#39;: 1899,
 &#39;requires&#39;: 352,
 &#39;out&#39;: 548,
 &#39;-&#39;: 10949,
 &#39;sellers&#39;: 13,
 &#39;such&#39;: 1571,
 &#39;as&#39;: 5683,
 &#39;charge&#39;: 102,
 &#39;collect&#39;: 35,
 &#39;or&#39;: 5809,
 &#39;remit&#39;: 7,
 &quot;&#39;s&quot;: 9728,
 &#39;tax&#39;: 175,
 &#39;;&#39;: 4864,
 &#39;instead&#39;: 175,
 &#39;must&#39;: 1197,
 &#39;recover&#39;: 50,
 &#39;its&#39;: 2590,
 &#39;on&#39;: 5214,
 &#39;sales&#39;: 48,
 &#39;directly&#39;: 134,
 &#39;from&#39;: 2842,
 &#39;purchasers&#39;: 16,
 &#39;But&#39;: 1066,
 &#39;Jenkins&#39;: 51,
 &#39;Act&#39;: 1278,
 &#39;15&#39;: 449,
 &#39;U.&#39;: 5900,
 &#39;S.&#39;: 6072,
 &#39;C.&#39;: 1321,
 &#39;§&#39;: 6375,
 &#39;375&#39;: 37,
 &#39;378&#39;: 36,
 &#39;submit&#39;: 57,
 &#39;customer&#39;: 9,
 &#39;information&#39;: 310,
 &#39;States&#39;: 2256,
 &#39;into&#39;: 572,
 &#39;which&#39;: 2646,
 &#39;they&#39;: 1302,
 &#39;ship&#39;: 22,
 &#39;and&#39;: 15113,
 &#39;State&#39;: 1262,
 &#39;has&#39;: 2191,
 &#39;agreed&#39;: 176,
 &#39;forward&#39;: 51,
 &#39;that&#39;: 18373,
 &#39;That&#39;: 507,
 &#39;helps&#39;: 26,
 &#39;track&#39;: 19,
 &#39;down&#39;: 115,
 &#39;cigarette&#39;: 14,
 &#39;who&#39;: 1201,
 &#39;do&#39;: 1015,
 &#39;not&#39;: 8499,
 &#39;pay&#39;: 124,
 &#39;their&#39;: 1507,
 &#39;Against&#39;: 27,
 &#39;backdrop&#39;: 10,
 &#39;filed&#39;: 402,
 &#39;this&#39;: 3792,
 &#39;lawsuit&#39;: 51,
 &#39;under&#39;: 2030,
 &#39;Racketeer&#39;: 6,
 &#39;Influenced&#39;: 6,
 &#39;Corrupt&#39;: 6,
 &#39;Organizations&#39;: 11,
 &#39;(&#39;: 14766,
 &#39;RICO&#39;: 99,
 &#39;)&#39;: 18634,
 &#39;alleging&#39;: 33,
 &#39;failure&#39;: 216,
 &#39;file&#39;: 195,
 &#39;reports&#39;: 84,
 &#39;with&#39;: 3669,
 &#39;constituted&#39;: 41,
 &#39;mail&#39;: 76,
 &#39;wire&#39;: 37,
 &#39;fraud&#39;: 328,
 &#39;are&#39;: 2675,
 &#39;defined&#39;: 144,
 &#39;&quot;&#39;: 30807,
 &#39;racketeering&#39;: 5,
 &#39;activit[ies&#39;: 1,
 &#39;]&#39;: 3140,
 &#39;18&#39;: 499,
 &#39;1961(1&#39;: 4,
 &#39;subject&#39;: 502,
 &#39;enforcement&#39;: 148,
 &#39;civil&#39;: 198,
 &#39;1964(c&#39;: 12,
 &#39;The&#39;: 5952,
 &#39;District&#39;: 1052,
 &#39;Court&#39;: 5729,
 &#39;dismissed&#39;: 61,
 &#39;claims&#39;: 611,
 &#39;but&#39;: 1669,
 &#39;Second&#39;: 481,
 &#39;Circuit&#39;: 695,
 &#39;vacated&#39;: 47,
 &#39;judgment&#39;: 1061,
 &#39;remanded&#39;: 129,
 &#39;Among&#39;: 37,
 &#39;other&#39;: 1491,
 &#39;things&#39;: 81,
 &#39;Appeals&#39;: 794,
 &#39;held&#39;: 625,
 &#39;asserted&#39;: 113,
 &#39;injury&#39;: 174,
 &#39;—&#39;: 1921,
 &#39;lost&#39;: 60,
 &#39;revenue&#39;: 51,
 &#39;came&#39;: 32,
 &#39;about&#39;: 767,
 &#39;by&#39;: 4551,
 &#39;reason&#39;: 416,
 &#39;predicate&#39;: 75,
 &#39;frauds&#39;: 23,
 &#39;It&#39;: 1106,
 &#39;accordingly&#39;: 30,
 &#39;determined&#39;: 150,
 &#39;had&#39;: 1656,
 &#39;stated&#39;: 232,
 &#39;a&#39;: 18294,
 &#39;valid&#39;: 136,
 &#39;claim&#39;: 938,
 &#39;Held&#39;: 68,
 &#39;:&#39;: 1401,
 &#39;is&#39;: 9354,
 &#39;reversed&#39;: 181,
 &#39;case&#39;: 1985,
 &#39;541&#39;: 78,
 &#39;F.&#39;: 1407,
 &#39;3d&#39;: 1008,
 &#39;425&#39;: 32,
 &#39;Chief&#39;: 146,
 &#39;Justice&#39;: 872,
 &#39;Roberts&#39;: 124,
 &#39;delivered&#39;: 157,
 &#39;opinion&#39;: 1212,
 &#39;part&#39;: 695,
 &#39;concluding&#39;: 116,
 &#39;because&#39;: 1303,
 &#39;can&#39;: 1523,
 &#39;show&#39;: 217,
 &#39;it&#39;: 4838,
 &#39;alleged&#39;: 202,
 &#39;violation&#39;: 393,
 &#39;Pp&#39;: 393,
 &#39;5&#39;: 623,
 &#39;To&#39;: 306,
 &#39;establish&#39;: 166,
 &#39;an&#39;: 4200,
 &#39;plaintiff&#39;: 258,
 &#39;offense&#39;: 354,
 &#39;only&#39;: 1770,
 &#39;was&#39;: 3521,
 &quot;&#39;&quot;: 4309,
 &#39;for&#39;: 7978,
 &#39;cause&#39;: 375,
 &#39;his&#39;: 1845,
 &#39;proximate&#39;: 26,
 &#39;well&#39;: 492,
 &#39;Holmes&#39;: 34,
 &#39;v.&#39;: 4345,
 &#39;Securities&#39;: 57,
 &#39;Investor&#39;: 6,
 &#39;Protection&#39;: 60,
 &#39;Corporation&#39;: 43,
 &#39;503&#39;: 63,
 &#39;258&#39;: 22,
 &#39;268&#39;: 37,
 &#39;Proximate&#39;: 2,
 &#39;purposes&#39;: 294,
 &#39;should&#39;: 1012,
 &#39;be&#39;: 4659,
 &#39;evaluated&#39;: 12,
 &#39;light&#39;: 286,
 &#39;common&#39;: 264,
 &#39;foundations&#39;: 7,
 &#39;thus&#39;: 437,
 &#39;some&#39;: 736,
 &#39;direct&#39;: 161,
 &#39;relation&#39;: 65,
 &#39;between&#39;: 624,
 &#39;injurious&#39;: 5,
 &#39;conduct&#39;: 686,
 &#39;Ibid&#39;: 461,
 &#39;A&#39;: 857,
 &#39;link&#39;: 22,
 &#39;too&#39;: 179,
 &#39;remote&#39;: 23,
 &#39;purely&#39;: 34,
 &#39;contingent&#39;: 12,
 &#39;indirec[t&#39;: 2,
 &#39;insufficient&#39;: 68,
 &#39;Id.&#39;: 1254,
 &#39;at&#39;: 9800,
 &#39;271&#39;: 14,
 &#39;274&#39;: 39,
 &#39;causal&#39;: 12,
 &#39;theory&#39;: 205,
 &#39;satisfy&#39;: 106,
 &#39;relationship&#39;: 136,
 &#39;requirement&#39;: 376,
 &#39;Indeed&#39;: 196,
 &#39;here&#39;: 652,
 &#39;far&#39;: 204,
 &#39;more&#39;: 1214,
 &#39;attenuated&#39;: 12,
 &#39;than&#39;: 1270,
 &#39;one&#39;: 1262,
 &#39;rejected&#39;: 248,
 &#39;According&#39;: 80,
 &#39;committed&#39;: 136,
 &#39;selling&#39;: 17,
 &#39;failing&#39;: 51,
 &#39;required&#39;: 397,
 &#39;Without&#39;: 38,
 &#39;could&#39;: 1033,
 &#39;pass&#39;: 41,
 &#39;even&#39;: 910,
 &#39;if&#39;: 1636,
 &#39;been&#39;: 1138,
 &#39;so&#39;: 1158,
 &#39;inclined&#39;: 8,
 &#39;Some&#39;: 67,
 &#39;customers&#39;: 53,
 &#39;legally&#39;: 61,
 &#39;obligated&#39;: 10,
 &#39;failed&#39;: 197,
 &#39;Because&#39;: 307,
 &#39;did&#39;: 1303,
 &#39;receive&#39;: 130,
 &#39;determine&#39;: 326,
 &#39;pursue&#39;: 78,
 &#39;those&#39;: 1158,
 &#39;payment&#39;: 52,
 &#39;thereby&#39;: 85,
 &#39;injured&#39;: 30,
 &#39;amount&#39;: 258,
 &#39;portion&#39;: 78,
 &#39;back&#39;: 130,
 &#39;were&#39;: 1191,
 &#39;never&#39;: 247,
 &#39;collected&#39;: 7,
 &#39;As&#39;: 716,
 &#39;reiterated&#39;: 20,
 &#39;[&#39;: 3078,
 &#39;t]he&#39;: 180,
 &#39;general&#39;: 417,
 &#39;tendency&#39;: 12,
 &#39;regard&#39;: 62,
 &#39;damages&#39;: 174,
 &#39;least&#39;: 289,
 &#39;go&#39;: 94,
 &#39;beyond&#39;: 230,
 &#39;first&#39;: 718,
 &#39;step&#39;: 94,
 &#39;i&#39;: 1008,
 &#39;d.&#39;: 975,
 &#39;272&#39;: 29,
 &#39;applies&#39;: 365,
 &#39;full&#39;: 243,
 &#39;force&#39;: 233,
 &#39;inquiries&#39;: 17,
 &#39;e.g.&#39;: 879,
 &#39;ibid&#39;: 207,
 &#39;causation&#39;: 23,
 &#39;move&#39;: 26,
 &#39;suffers&#39;: 15,
 &#39;same&#39;: 765,
 &#39;defect&#39;: 17,
 &#39;Anza&#39;: 20,
 &#39;Ideal&#39;: 19,
 &#39;Steel&#39;: 25,
 &#39;Supply&#39;: 10,
 &#39;Corp.&#39;: 207,
 &#39;547&#39;: 76,
 &#39;451&#39;: 41,
 &#39;458&#39;: 59,
 &#39;461&#39;: 50,
 &#39;where&#39;: 588,
 &#39;causing&#39;: 13,
 &#39;harm&#39;: 146,
 &#39;distinct&#39;: 73,
 &#39;giving&#39;: 86,
 &#39;rise&#39;: 60,
 &#39;see&#39;: 1707,
 &#39;disconnect&#39;: 2,
 &#39;sharper&#39;: 2,
 &#39;In&#39;: 1893,
 &#39;party&#39;: 520,
 &#39;both&#39;: 465,
 &#39;engaged&#39;: 65,
 &#39;harmful&#39;: 22,
 &#39;fraudulent&#39;: 38,
 &#39;act&#39;: 231,
 &#39;Here&#39;: 107,
 &#39;liability&#39;: 247,
 &#39;rests&#39;: 65,
 &#39;just&#39;: 333,
 &#39;separate&#39;: 209,
 &#39;actions&#39;: 258,
 &#39;carried&#39;: 38,
 &#39;parties&#39;: 678,
 &#39;extend&#39;: 71,
 &#39;situations&#39;: 32,
 &#39;defendant&#39;: 613,
 &#39;third&#39;: 159,
 &#39;made&#39;: 653,
 &#39;easier&#39;: 33,
 &#39;fourth&#39;: 41,
 &#39;taxpayer&#39;: 11,
 &#39;taxpayers&#39;: 13,
 &#39;caused&#39;: 112,
 &#39;place&#39;: 389,
 &#39;decided&#39;: 169,
 &#39;Put&#39;: 8,
 &#39;simply&#39;: 305,
 &#39;obligation&#39;: 81,
 &#39;before&#39;: 826,
 &#39;stretched&#39;: 4,
 &#39;chain&#39;: 26,
 &#39;declines&#39;: 15,
 &#39;today&#39;: 275,
 &#39;See&#39;: 3037,
 &#39;460&#39;: 41,
 &#39;9&#39;: 509,
 &#39;b&#39;: 120,
 &#39;attempts&#39;: 59,
 &#39;avoid&#39;: 218,
 &#39;conclusion&#39;: 453,
 &#39;characterizing&#39;: 9,
 &#39;merely&#39;: 201,
 &#39;systematic&#39;: 37,
 &#39;scheme&#39;: 133,
 &#39;defraud&#39;: 39,
 &#39;escape&#39;: 26,
 &#39;embraced&#39;: 14,
 &#39;all&#39;: 1495,
 &#39;indirectly&#39;: 20,
 &#39;harmed&#39;: 15,
 &#39;precedent&#39;: 165,
 &#39;would&#39;: 2822,
 &#39;become&#39;: 106,
 &#39;mere&#39;: 81,
 &#39;pleading&#39;: 45,
 &#39;rule&#39;: 715,
 &#39;makes&#39;: 276,
 &#39;clear&#39;: 455,
 &#39;compensable&#39;: 5,
 &#39;flowing&#39;: 5,
 &#39;...&#39;: 1600,
 &#39;necessarily&#39;: 133,
 &#39;acts&#39;: 187,
 &#39;supra&#39;: 994,
 &#39;457&#39;: 31,
 &#39;led&#39;: 63,
 &#39;injuries&#39;: 28,
 &#39;also&#39;: 1734,
 &#39;errs&#39;: 17,
 &#39;relying&#39;: 43,
 &#39;Bridge&#39;: 14,
 &#39;Phoenix&#39;: 3,
 &#39;Bond&#39;: 5,
 &#39;&amp;&#39;: 499,
 &#39;Indemnity&#39;: 8,
 &#39;Co.&#39;: 462,
 &#39;553&#39;: 61,
 &#39;_&#39;: 2073,
 &#39;There&#39;: 268,
 &#39;plaintiffs&#39;: 336,
 &#39;straightforward&#39;: 45,
 &#39;involved&#39;: 144,
 &#39;easily&#39;: 77,
 &#39;identifiable&#39;: 4,
 &#39;connection&#39;: 70,
 &#39;issue&#39;: 788,
 &#39;there&#39;: 795,
 &#39;petitioners&#39;: 370,
 &#39;misrepresentations&#39;: 16,
 &#39;no&#39;: 1984,
 &#39;independent&#39;: 312,
 &#39;factors&#39;: 215,
 &#39;account[ed&#39;: 3,
 &#39;anything&#39;: 112,
 &#39;Multiple&#39;: 4,
 &#39;steps&#39;: 56,
 &#39;And&#39;: 721,
 &#39;contrast&#39;: 109,
 &#39;certainly&#39;: 79,
 &#39;10&#39;: 567,
 &#39;14&#39;: 413,
 &#39;J.&#39;: 1306,
 &#39;Scalia&#39;: 334,
 &#39;Thomas&#39;: 223,
 &#39;Alito&#39;: 154,
 &#39;JJ&#39;: 104,
 &#39;joined&#39;: 184,
 &#39;Ginsburg&#39;: 118,
 &#39;concurring&#39;: 560,
 &#39;Breyer&#39;: 176,
 &#39;dissenting&#39;: 483,
 &#39;Stevens&#39;: 381,
 &#39;Kennedy&#39;: 228,
 &#39;Sotomayor&#39;: 120,
 &#39;took&#39;: 146,
 &#39;consideration&#39;: 157,
 &#39;decision&#39;: 1001,
 &#39;HEMI&#39;: 3,
 &#39;GROUP&#39;: 3,
 &#39;LLC&#39;: 25,
 &#39;KAI&#39;: 3,
 &#39;GACHUPIN&#39;: 3,
 &#39;PETITIONERS&#39;: 68,
 &#39;CITY&#39;: 12,
 &#39;OF&#39;: 57,
 &#39;NEW&#39;: 8,
 &#39;YORK&#39;: 6,
 &#39;writ&#39;: 286,
 &#39;certiorari&#39;: 374,
 &#39;united&#39;: 168,
 &#39;states&#39;: 313,
 &#39;court&#39;: 2667,
 &#39;appeals&#39;: 221,
 &#39;second&#39;: 420,
 &#39;circuit&#39;: 174,
 &#39;January&#39;: 58,
 &#39;25&#39;: 197,
 &#39;2010&#39;: 352,
 &#39;seldom&#39;: 5,
 &#39;own&#39;: 406,
 &#39;Federal&#39;: 681,
 &#39;however&#39;: 606,
 &#39;vendors&#39;: 6,
 &#39;argues&#39;: 158,
 &#39;constitutes&#39;: 72,
 &#39;lose&#39;: 25,
 &#39;tens&#39;: 7,
 &#39;millions&#39;: 15,
 &#39;dollars&#39;: 18,
 &#39;unrecovered&#39;: 1,
 &#39;we&#39;: 1960,
 &#39;hold&#39;: 205,
 &#39;We&#39;: 899,
 &#39;therefore&#39;: 414,
 &#39;reverse&#39;: 63,
 &#39;contrary&#39;: 247,
 &#39;I&#39;: 1534,
 &#39;This&#39;: 818,
 &#39;arises&#39;: 26,
 &#39;motion&#39;: 320,
 &#39;dismiss&#39;: 90,
 &#39;accept&#39;: 144,
 &#39;true&#39;: 206,
 &#39;factual&#39;: 154,
 &#39;allegations&#39;: 57,
 &#39;amended&#39;: 139,
 &#39;complaint&#39;: 177,
 &#39;Leatherman&#39;: 1,
 &#39;Tarrant&#39;: 1,
 &#39;County&#39;: 123,
 &#39;Narcotics&#39;: 5,
 &#39;Intelligence&#39;: 4,
 &#39;Coordination&#39;: 3,
 &#39;Unit&#39;: 2,
 &#39;507&#39;: 43,
 &#39;163&#39;: 29,
 &#39;164&#39;: 30,
 &#39;1993&#39;: 96,
 &#39;authorizes&#39;: 79,
 &#39;impose&#39;: 182,
 &#39;N.&#39;: 260,
 &#39;Y.&#39;: 84,
 &#39;Unconsol&#39;: 2,
 &#39;Law&#39;: 303,
 &#39;Ann&#39;: 196,
 &#39;9436(1&#39;: 2,
 &#39;West&#39;: 131,
 &#39;Supp&#39;: 333,
 &#39;2009&#39;: 563,
 &#39;Under&#39;: 214,
 &#39;authority&#39;: 532,
 &#39;levied&#39;: 3,
 &#39;$&#39;: 227,
 &#39;1.50&#39;: 1,
 &#39;per&#39;: 215,
 &#39;pack&#39;: 3,
 &#39;each&#39;: 307,
 &#39;standard&#39;: 410,
 &#39;possessed&#39;: 24,
 &#39;within&#39;: 601,
 &#39;sale&#39;: 67,
 &#39;use&#39;: 505,
 &#39;Admin&#39;: 11,
 &#39;Code&#39;: 355,
 &#39;11&#39;: 518,
 &#39;1302(a&#39;: 1,
 &#39;2008&#39;: 437,
 &#39;Record&#39;: 81,
 &#39;A1016&#39;: 1,
 &#39;When&#39;: 243,
 &#39;buy&#39;: 10,
 &#39;seller&#39;: 12,
 &#39;responsible&#39;: 68,
 &#39;charging&#39;: 24,
 &#39;collecting&#39;: 47,
 &#39;remitting&#39;: 1,
 &#39;Tax&#39;: 17,
 &#39;471(2&#39;: 1,
 &#39;Out&#39;: 1,
 &#39;Smokes-Spirits.com&#39;: 3,
 &#39;Inc.&#39;: 546,
 &#39;432&#39;: 26,
 &#39;433&#39;: 20,
 &#39;CA2&#39;: 124,
 &#39;Instead&#39;: 129,
 &#39;recovering&#39;: 2,
 &#39;sold&#39;: 31,
 &#39;outside&#39;: 167,
 &#39;difficult&#39;: 148,
 &#39;often&#39;: 211,
 &#39;reluctant&#39;: 14,
 &#39;tough&#39;: 2,
 &#39;One&#39;: 98,
 &#39;way&#39;: 281,
 &#39;gather&#39;: 8,
 &#39;assist&#39;: 16,
 &#39;through&#39;: 426,
 &#39;63&#39;: 65,
 &#39;Stat&#39;: 412,
 &#39;884&#39;: 6,
 &#39;69&#39;: 34,
 &#39;627&#39;: 10,
 &#39;register&#39;: 74,
 &#39;report&#39;: 114,
 &#39;tobacco&#39;: 12,
 &#39;administrators&#39;: 15,
 &#39;listing&#39;: 41,
 &#39;name&#39;: 80,
 &#39;address&#39;: 246,
 &#39;quantity&#39;: 12,
 &#39;purchased&#39;: 18,
 &#39;have&#39;: 3351,
 &#39;executed&#39;: 25,
 &#39;agreement&#39;: 420,
 &#39;undertake&#39;: 32,
 &#39;cooperate&#39;: 12,
 &#39;fully&#39;: 87,
 &#39;keep&#39;: 250,
 &#39;promptly&#39;: 19,
 &#39;informed&#39;: 95,
 &#39;reference&#39;: 119,
 &#39;any&#39;: 2359,
 &#39;person&#39;: 421,
 &#39;transaction&#39;: 36,
 &#39;including&#39;: 397,
 &#39;i]nformation&#39;: 1,
 &#39;obtained&#39;: 83,
 &#39;may&#39;: 1890,
 &#39;result&#39;: 353,
 &#39;additional&#39;: 214,
 &#39;provided&#39;: 261,
 &#39;disclosure&#39;: 280,
 &#39;permissible&#39;: 48,
 &#39;existing&#39;: 105,
 &#39;laws&#39;: 397,
 &#39;agreements&#39;: 70,
 &#39;A1003&#39;: 1,
 &#39;asserts&#39;: 84,
 &#39;forwards&#39;: 1,
 &#39;A998&#39;: 1,
 &#39;Amended&#39;: 8,
 &#39;Compl&#39;: 5,
 &#39;¶54&#39;: 1,
 &#39;¶¶58&#39;: 2,
 &#39;59&#39;: 49,
 &#39;company&#39;: 103,
 &#39;does&#39;: 1700,
 &#39;alleges&#39;: 24,
 &#39;cost&#39;: 43,
 &#39;hundreds&#39;: 20,
 &#39;year&#39;: 356,
 &#39;excise&#39;: 5,
 &#39;A996&#39;: 3,
 &#39;Based&#39;: 35,
 &#39;federal&#39;: 1542,
 &#39;B&#39;: 206,
 &#39;provides&#39;: 363,
 &#39;private&#39;: 339,
 &#39;action&#39;: 606,
 &#39;a]ny&#39;: 17,
 &#39;business&#39;: 445,
 &#39;property&#39;: 652,
 &#39;section&#39;: 200,
 &#39;1962&#39;: 18,
 &#39;chapter&#39;: 48,
 &#39;Section&#39;: 267,
 &#39;turn&#39;: 125,
 &#39;contains&#39;: 75,
 &#39;criminal&#39;: 495,
 &#39;provisions&#39;: 483,
 &#39;Specifically&#39;: 22,
 &#39;1962(c&#39;: 2,
 &#39;invokes&#39;: 22,
 &#39;unlawful&#39;: 90,
 &#39;employed&#39;: 52,
 &#39;associated&#39;: 35,
 &#39;enterprise&#39;: 19,
 &#39;activities&#39;: 218,
 &#39;affect&#39;: 77,
 &#39;interstate&#39;: 88,
 &#39;commerce&#39;: 83,
 &#39;participate&#39;: 35,
 &#39;affairs&#39;: 31,
 &#39;pattern&#39;: 22,
 &#39;activity&#39;: 154,
 &#39;R]acketeering&#39;: 1,
 &#39;include&#39;: 214,
 &#39;number&#39;: 220,
 &#39;called&#39;: 103,
 &#39;two&#39;: 757,
 &#39;identifying&#39;: 41,
 &#39;constitute&#39;: 120,
 &#39;offenses&#39;: 123,
 &#39;A980&#39;: 4,
 &#39;Invoking&#39;: 5,
 &#39;suffered&#39;: 53,
 &#39;form&#39;: 197,
 &#39;terms--&quot;by&#39;: 1,
 &#39;contest&#39;: 21,
 &#39;characterization&#39;: 26,
 &#39;violations&#39;: 109,
 &#39;actionable&#39;: 7,
 &#39;assume&#39;: 108,
 &#39;without&#39;: 736,
 &#39;deciding&#39;: 106,
 &#39;material&#39;: 172,
 &#39;serve&#39;: 111,
 &#39;determining&#39;: 172,
 &#39;owner&#39;: 40,
 &#39;officer&#39;: 105,
 &#39;Kai&#39;: 1,
 &#39;Gachupin&#39;: 3,
 &#39;individual&#39;: 316,
 &#39;duty&#39;: 194,
 &#39;Nexicon&#39;: 1,
 &#39;No&#39;: 393,
 &#39;03&#39;: 5,
 &#39;CV&#39;: 1,
 &#39;383&#39;: 38,
 &#39;DAB&#39;: 1,
 &#39;2006&#39;: 287,
 &#39;WL&#39;: 20,
 &#39;647716&#39;: 1,
 &#39;*&#39;: 387,
 &#39;7-*8&#39;: 1,
 &#39;SDNY&#39;: 24,
 &#39;Mar.&#39;: 48,
 &#39;formed&#39;: 60,
 &#39;7-*10&#39;: 1,
 &#39;ground&#39;: 196,
 &#39;whether&#39;: 1708,
 &#39;loss&#39;: 58,
 &#39;1964&#39;: 45,
 &#39;further&#39;: 411,
 &#39;proceedings&#39;: 325,
 &#39;established&#39;: 290,
 &#39;operated&#39;: 29,
 &#39;447&#39;: 50,
 &#39;448&#39;: 15,
 &#39;444&#39;: 47,
 &#39;445&#39;: 42,
 &#39;concluded&#39;: 310,
 &#39;440&#39;: 25,
 &#39;viable&#39;: 5,
 &#39;Judge&#39;: 102,
 &#39;Winter&#39;: 15,
 &#39;dissented&#39;: 11,
 &#39;petition&#39;: 473,
 &#39;asking&#39;: 53,
 &#39;Pet&#39;: 233,
 &#39;Cert&#39;: 205,
 &#39;i.&#39;: 13,
 &#39;granted&#39;: 316,
 &#39;556&#39;: 72,
 &#39;II&#39;: 307,
 &#39;Though&#39;: 26,
 &#39;framed&#39;: 16,
 &#39;single&#39;: 202,
 &#39;question&#39;: 966,
 &#39;raises&#39;: 43,
 &#39;issues&#39;: 125,
 &#39;First&#39;: 800,
 &#39;allegedly&#39;: 49,
 &#39;decide&#39;: 301,
 &#39;1992&#39;: 105,
 &#39;set&#39;: 342,
 &#39;forth&#39;: 168,
 &#39;addressed&#39;: 110,
 &#39;brought&#39;: 178,
 &#39;SIPC&#39;: 8,
 &#39;against&#39;: 799,
 &#39;defendants&#39;: 177,
 &#39;whom&#39;: 156,
 &#39;manipulated&#39;: 4,
 &#39;stock&#39;: 38,
 &#39;prices&#39;: 33,
 &#39;262&#39;: 20,
 &#39;263&#39;: 42,
 &#39;reimburse&#39;: 2,
 &#39;certain&#39;: 445,
 &#39;registered&#39;: 87,
 &#39;broker&#39;: 8,
 &#39;dealers&#39;: 47,
 &#39;event&#39;: 105,
 &#39;unable&#39;: 44,
 &#39;meet&#39;: 64,
 &#39;financial&#39;: 80,
 &#39;obligations&#39;: 52,
 &#39;261&#39;: 19,
 &#39;conspiracy&#39;: 59,
 &#39;manipulators&#39;: 1,
 &#39;detected&#39;: 2,
 &#39;collapsed&#39;: 5,
 &#39;insurer&#39;: 1,
 &#39;ultimately&#39;: 76,
 &#39;hook&#39;: 2,
 &#39;nearly&#39;: 73,
 &#39;13&#39;: 452,
 &#39;million&#39;: 63,
 &#39;cover&#39;: 87,
 &#39;conspirators&#39;: 6,
 &#39;phrase&#39;: 187,
 &#39;used&#39;: 324,
 &#39;explained&#39;: 261,
 &#39;Applying&#39;: 43,
 &#39;hand&#39;: 92,
 &#39;quoting&#39;: 424,
 &#39;Associated&#39;: 7,
 &#39;Gen.&#39;: 42,
 &#39;Contractors&#39;: 4,
 &#39;Cal&#39;: 71,
 &#39;Carpenters&#39;: 1,
 &#39;459&#39;: 44,
 &#39;519&#39;: 42,
 &#39;534&#39;: 55,
 &#39;1983&#39;: 137,
 &#39;Southern&#39;: 38,
 &#39;Pacific&#39;: 90,
 &#39;Darnell&#39;: 1,
 &#39;Taenzer&#39;: 1,
 &#39;Lumber&#39;: 2,
 &#39;245&#39;: 15,
 &#39;531&#39;: 44,
 &#39;533&#39;: 70,
 &#39;1918&#39;: 5,
 &#39;internal&#39;: 412,
 &#39;quotation&#39;: 395,
 &#39;marks&#39;: 398,
 &#39;omitted&#39;: 484,
 &#39;Our&#39;: 158,
 &#39;cases&#39;: 934,
 &#39;confirm&#39;: 38,
 &#39;slip&#39;: 349,
 &#39;op&#39;: 346,
 &#39;19&#39;: 240,
 &#39;us&#39;: 462,
 &#39;confirms&#39;: 28,
 &#39;indirect&#39;: 9,
 &#39;considered&#39;: 217,
 &#39;competitor&#39;: 10,
 &#39;National&#39;: 215,
 &#39;defrauded&#39;: 9,
 &#39;able&#39;: 116,
 &#39;undercut&#39;: 11,
 &#39;lower&#39;: 128,
 &#39;offered&#39;: 58,
 &#39;contended&#39;: 20,
 &#39;allowed&#39;: 105,
 &#39;attract&#39;: 11,
 &#39;expense&#39;: 17,
 &#39;Finding&#39;: 24,
 &#39;victim&#39;: 66,
 &#39;being&#39;: 186,
 &#39;recognized&#39;: 245,
 &#39;harms&#39;: 35,
 &#39;when&#39;: 1284,
 &#39;applicable&#39;: 184,
 &#39;offering&#39;: 10,
 &#39;entirely&#39;: 116,
 &#39;defrauding&#39;: 3,
 &#39;constituting&#39;: 33,
 &#39;Thus&#39;: 258,
 &#39;viewed&#39;: 48,
 &#39;point&#39;: 360,
 &#39;important&#39;: 232,
 &#39;nevertheless&#39;: 53,
 &#39;found&#39;: 348,
 &#39;distinction&#39;: 113,
 &#39;relevant&#39;: 386,
 &#39;sufficient&#39;: 207,
 &#39;defeat&#39;: 28,
 &#39;decline&#39;: 53,
 &#39;cf&#39;: 120,
 &#39;n.&#39;: 894,
 &#39;46&#39;: 97,
 &#39;finding&#39;: 240,
 &#39;antitrust&#39;: 30,
 &#39;context&#39;: 325,
 &#39;stems&#39;: 7,
 &#39;most&#39;: 431,
 &#39;persons&#39;: 247,
 &#39;victims&#39;: 59,
 &#39;highlighted&#39;: 9,
 &#39;better&#39;: 85,
 &#39;situated&#39;: 14,
 &#39;incentive&#39;: 33,
 &#39;sue&#39;: 49,
 &#39;269&#39;: 16,
 &#39;270&#39;: 21,
 &#39;seek&#39;: 211,
 &#39;recovery&#39;: 43,
 &#39;imposes&#39;: 87,
 &#39;2.75&#39;: 1,
 &#39;double&#39;: 34,
 &#39;what&#39;: 783,
 &#39;charges&#39;: 80,
 &#39;471(1&#39;: 1,
 &#39;opine&#39;: 2,
 &#39;bring&#39;: 71,
 &#39;Suffice&#39;: 3,
 &#39;say&#39;: 221,
 &#39;concrete&#39;: 29,
 &#39;incentives&#39;: 18,
 &#39;try&#39;: 31,
 &#39;accuses&#39;: 2,
 &#39;Anzas&#39;: 1,
 &#39;substantial&#39;: 213,
 &#39;money&#39;: 134,
 &#39;If&#39;: 429,
 &#39;expected&#39;: 39,
 &#39;appropriate&#39;: 227,
 &#39;remedies&#39;: 79,
 &#39;dissent&#39;: 470,
 &#39;foreseeability&#39;: 6,
 &#39;rather&#39;: 317,
 &#39;existence&#39;: 97,
 &#39;sufficiently&#39;: 94,
 &#39;find&#39;: 233,
 &#39;satisfied&#39;: 77,
 &#39;foreseeable&#39;: 23,
 &#39;consequence&#39;: 79,
 &#39;intended&#39;: 231,
 &#39;indeed&#39;: 87,
 &#39;desired&#39;: 13,
 &#39;falls&#39;: 55,
 &#39;risks&#39;: 36,
 &#39;Congress&#39;: 1679,
 &#39;sought&#39;: 242,
 &#39;prevent&#39;: 189,
 &#39;Post&#39;: 202,
 &#39;6&#39;: 594,
 &#39;line&#39;: 163,
 &#39;reasoning&#39;: 102,
 &#39;sounds&#39;: 10,
 &#39;familiar&#39;: 33,
 &#39;precisely&#39;: 50,
 &#39;argument&#39;: 541,
 &#39;lodged&#39;: 7,
 &#39;majority&#39;: 415,
 &#39;criticized&#39;: 16,
 &#39;view&#39;: 556,
 &#39;permit[ting&#39;: 1,
 &#39;evade&#39;: 9,
 &#39;consequences&#39;: 158,
 &#39;behavior&#39;: 76,
 &#39;470&#39;: 56,
 &#39;carry&#39;: 60,
 &#39;day&#39;: 202,
 &#39;asked&#39;: 146,
 &#39;revisit&#39;: 12,
 &#39;concepts&#39;: 6,
 &#39;course&#39;: 264,
 &#39;many&#39;: 355,
 &#39;shapes&#39;: 5,
 &#39;precedents&#39;: 218,
 &#39;make&#39;: 467,
 &#39;focus&#39;: 62,
 &#39;directness&#39;: 4,
 &#39;mention&#39;: 42,
 &#39;concept&#39;: 62,
 &#39;offers&#39;: 59,
 &#39;responses&#39;: 32,
 &#39;challenges&#39;: 140,
 &#39;our&#39;: 1019,
 &#39;Brief&#39;: 919,
 &#39;42&#39;: 177,
 &#39;Having&#39;: 25,
 &#39;broadly&#39;: 48,
 &#39;contends&#39;: 153,
 &#39;Otherwise&#39;: 13,
 &#39;example&#39;: 331,
 &#39;give&#39;: 215,
 &#39;competitive&#39;: 22,
 &#39;advantage&#39;: 34,
 &#39;over&#39;: 456,
 &#39;454&#39;: 52,
 &#39;455&#39;: 49,
 &#39;allegation&#39;: 16,
 &#39;circumvent&#39;: 10,
 &#39;claiming&#39;: 39,
 &#39;aim&#39;: 42,
 &#39;increase&#39;: 54,
 &#39;market&#39;: 167,
 &#39;share&#39;: 54,
 &#39;460.1&#39;: 1,
 &#39;moreover&#39;: 80,
 &#39;Sedima&#39;: 2,
 &#39;P.&#39;: 107,
 &#39;R.&#39;: 263,
 &#39;L.&#39;: 350,
 &#39;Imrex&#39;: 2,
 &#39;473&#39;: 60,
 &#39;479&#39;: 68,
 &#39;497&#39;: 28,
 &#39;1985&#39;: 74,
 &#39;statement&#39;: 264,
 &#39;went&#39;: 39,
 &#39;allege&#39;: 24,
 &#39;assertion&#39;: 65,
 &#39;legal&#39;: 414,
 &#39;very&#39;: 226,
 &#39;relies&#39;: 92,
 &#39;reaffirmed&#39;: 24,
 &#39;wrongful&#39;: 42,
 &#39;competing&#39;: 32,
 &#39;bidders&#39;: 7,
 &#39;county&#39;: 48,
 &#39;lien&#39;: 4,
 &#39;auction&#39;: 18,
 &#39;liens&#39;: 5,
 &#39;profitable&#39;: 3,
 &#39;lowest&#39;: 8,
 &#39;possible&#39;: 180,
 &#39;bid&#39;: 7,
 &#39;multiple&#39;: 48,
 &#39;low&#39;: 22,
 &#39;bidding&#39;: 4,
 &#39;percentage&#39;: 28,
 &#39;penalty&#39;: 200,
 &#39;bidder&#39;: 6,
 &#39;require&#39;: 330,
 &#39;0&#39;: 4,
 &#39;%&#39;: 135,
 &#39;awarded&#39;: 56,
 &#39;devised&#39;: 11,
 &#39;plan&#39;: 163,
 &#39;allocate&#39;: 3,
 &#39;rotational&#39;: 2,
 &#39;basis&#39;: 381,
 &#39;3&#39;: 747,
 &#39;noted&#39;: 256,
 &#39;created&#39;: 157,
 &#39;perverse&#39;: 9,
 &#39;Bidders&#39;: 1,
 &#39;addition&#39;: 121,
 &#39;themselves&#39;: 141,
 &#39;sen[t&#39;: 1,
 &#39;agents&#39;: 19,
 &#39;behalf&#39;: 110,
 &#39;obtain&#39;: 106,
 &#39;disproportionate&#39;: 29,
 &#39;prohibited&#39;: 108,
 ...}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">show_doc_counts</span><span class="p">(</span><span class="n">input_corpus</span><span class="p">,</span> <span class="n">weighting</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
    <span class="n">doc_counts</span> <span class="o">=</span> <span class="n">input_corpus</span><span class="o">.</span><span class="n">word_doc_counts</span><span class="p">(</span><span class="n">weighting</span><span class="o">=</span><span class="n">weighting</span><span class="p">,</span> <span class="n">filter_stops</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">&quot;orth_&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">doc_counts</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="n">limit</span><span class="p">]))</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">word_doc_counts</span></code> provides a few ways of quantifying the prevalence of individual words across the corpus: whether a word appears many times in most documents, just a few times in a few documents, many times in a few documents, or just a few times in most documents.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;# DOCS APPEARING IN / TOTAL # DOCS&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;-----------&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">show_doc_counts</span><span class="p">(</span><span class="n">corpus</span><span class="p">,</span> <span class="s2">&quot;freq&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;LOG(TOTAL # DOCS / # DOCS APPEARING IN)&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;-----------&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">show_doc_counts</span><span class="p">(</span><span class="n">corpus</span><span class="p">,</span> <span class="s2">&quot;idf&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span># DOCS APPEARING IN / TOTAL # DOCS
-----------
Court           0.9873417721518988
case            0.9873417721518988
certiorari      0.9873417721518988
granted         0.9873417721518988
U.              0.9746835443037974
S.              0.9746835443037974
judgment        0.9746835443037974
v.              0.9746835443037974
decision        0.9746835443037974
court           0.9746835443037974
C.              0.9620253164556962
held            0.9620253164556962
opinion         0.9620253164556962
2009            0.9620253164556962
1               0.9620253164556962
F.              0.9493670886075949
Justice         0.9493670886075949
Id.             0.9493670886075949
e.g.            0.9493670886075949
issue           0.9493670886075949

LOG(TOTAL # DOCS / # DOCS APPEARING IN)
-----------
cigarettes      4.382026634673881
Hemi            4.382026634673881
cigarette       4.382026634673881
RICO            4.382026634673881
racketeering    4.382026634673881
activit[ies     4.382026634673881
1964(c          4.382026634673881
Proximate       4.382026634673881
indirec[t       4.382026634673881
Anza            4.382026634673881
Ideal           4.382026634673881
disconnect      4.382026634673881
sharper         4.382026634673881
Phoenix         4.382026634673881
account[ed      4.382026634673881
HEMI            4.382026634673881
GROUP           4.382026634673881
KAI             4.382026634673881
GACHUPIN        4.382026634673881
YORK            4.382026634673881
</pre></div>
</div>
</div>
</div>
<p>textacy provides implementations of algorithms for identifying words and phrases that are representative of a document (aka <strong>keyterm extraction</strong>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">textacy.extract</span> <span class="kn">import</span> <span class="n">keyterms</span> <span class="k">as</span> <span class="n">ke</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">corpus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Respondent New York City taxes the possession of cigarettes. Petitioner Hemi Group, based in New Mexico, sells cigarettes online to residents of the City. Neither state nor city law requires out-of-state sellers such as Hemi to charge, collect, or remit the City\&#39;s tax; instead, the City must recover its tax on out-of-state sales directly from the purchasers. But the Jenkins Act, 15 U. S. C. §§375-378, requires out-of-state sellers to submit customer information to the States into which they ship cigarettes, and New York State has agreed to forward that information to the City. That information helps the City track down cigarette purchasers who do not pay their taxes. Against that backdrop, the City filed this lawsuit under the Racketeer Influenced and Corrupt Organizations Act (RICO), alleging that Hemi\&#39;s failure to file the Jenkins Act reports with the State constituted mail and wire fraud, which are defined as &quot;racketeering activit[ies],&quot; 18 U. S. C. §1961(1), subject to enforcement under civil RICO, §1964(c). The District Court dismissed the claims, but the Second Circuit vacated the judgment and remanded. Among other things, the Court of Appeals held that the City\&#39;s asserted injury — lost tax revenue — came about &quot;by reason of&quot; the predicate mail and wire frauds. It accordingly determined that the City had stated a valid RICO claim. Held: The judgment is reversed, and the case is remanded.\n541 F. 3d 425, reversed and remanded.\n Chief Justice Roberts delivered the opinion of the Court in part, concluding that because the City cannot show that it lost tax revenue &quot;by reason of&quot; the alleged RICO violation, it cannot state a RICO claim. Pp. 5-15.\n (a) To establish that an injury came about &quot;by reason of&quot; a RICO violation, a plaintiff must show that a predicate offense &quot;not only was a \&#39;but for\&#39; cause of his injury, but was the proximate cause as well.&quot; Holmes v. Securities Investor Protection Corporation, 503 U. S. 258, 268. Proximate cause for RICO purposes should be evaluated in light of its common-law foundations; it thus requires &quot;some direct relation between the injury asserted and the injurious conduct alleged.&quot; Ibid. A link that is &quot;too remote,&quot; &quot;purely contingent,&quot; or &quot;indirec[t]&quot; is insufficient. Id., at 271, 274. The City\&#39;s causal theory cannot satisfy RICO\&#39;s direct relationship requirement. Indeed, the causal link here is far more attenuated than the one the Court rejected as &quot;purely contingent&quot; and &quot;too remote&quot; in Holmes. Id., at 271. According to the City, Hemi committed fraud by selling cigarettes to city residents and failing to submit the required customer information to the State. Without the reports from Hemi, the State could not pass on the information to the City, even if it had been so inclined. Some of the customers legally obligated to pay the cigarette tax to the City failed to do so. Because the City did not receive the customer information, it could not determine which customers had failed to pay the tax. The City thus could not pursue those customers for payment. The City thereby was injured in the amount of the portion of back taxes that were never collected. As the Court reiterated in Holmes, &quot;[t]he general tendency of the law, in regard to damages at least, is not to go beyond the first step,&quot; id., at 271-272, and that &quot;general tendency&quot; applies with full force to proximate cause inquiries under RICO, e.g., ibid. Because the City\&#39;s causation theory requires the Court to move well beyond the first step, that theory cannot satisfy RICO\&#39;s direct relationship requirement. The City\&#39;s claim suffers from the same defect as the RICO claim rejected in Anza v. Ideal Steel Supply Corp., 547 U. S. 451, 458-461, where the conduct directly causing the harm was distinct from the conduct giving rise to the fraud, see id., at 458. Indeed, the disconnect between the asserted injury and the alleged fraud in this case is even sharper. In Anza, the same party had both engaged in the harmful conduct and committed the fraudulent act. Here, the City\&#39;s theory of liability rests not just on separate actions, but separate actions carried out by separate parties. The City\&#39;s theory thus requires that the Court extend RICO liability to situations where the defendant\&#39;s fraud on the third party (the State) has made it easier for a fourth party (the taxpayer) to cause harm to the plaintiff (the City). Indeed, the fourth-party taxpayers here only caused harm to the City in the first place if they decided not to pay taxes they were legally obligated to pay. Put simply, Hemi\&#39;s obligation was to file Jenkins Act reports with the State, not the City, and the City\&#39;s harm was directly caused by the customers, not Hemi. The Court has never before stretched the causal chain of a RICO violation so far, and declines to do so today. See, e.g., id., at 460-461. Pp. 5-9.\n (b) The City attempts to avoid this conclusion by characterizing the violation not merely as Hemi\&#39;s failure to file Jenkins Act reports with the State, but as a more general systematic scheme to defraud the City of tax revenue. But if the City could escape the proximate-cause requirement merely by alleging that the fraudulent scheme embraced all those indirectly harmed by the alleged conduct, the Court\&#39;s RICO proximate cause precedent would become a mere pleading rule. That precedent makes clear that &quot;the compensable injury flowing from a [RICO] violation ... \&#39;necessarily is the harm caused by [the] predicate acts.\&#39; &quot; Anza, supra, at 457. Because the only fraudulent conduct alleged here is a violation of the Jenkins Act, the City must, but cannot, show that Hemi\&#39;s failure to file the Jenkins Act reports led directly to its injuries. The City also errs in relying on Bridge v. Phoenix Bond &amp; Indemnity Co., 553 U. S. ___. There, the plaintiffs\&#39; causation theory was &quot;straightforward&quot;: The causal link in Bridge involved a direct and easily identifiable connection between the fraud at issue and the plaintiffs\&#39; injury, id., at ___; the plaintiffs there &quot;were the only parties injured by petitioners\&#39; misrepresentations,&quot; id., at ___; and there were &quot;no independent factors that account[ed] for [the] injury,&quot; id., at ___. The City\&#39;s theory in this case is anything but straightforward: Multiple steps separate the alleged fraud from the asserted injury. And in contrast to Bridge, where there were &quot;no independent factors that account[ed] for [the plaintiffs\&#39;] injury,&quot; id., at ___, here there certainly were: The City\&#39;s theory of liability rests on the independent actions of third and even fourth parties. Pp. 10-14.\n Roberts, C. J., delivered the opinion of the Court in part, in which Scalia, Thomas, and Alito, JJ., joined, and in which Ginsburg, J., joined in part. Ginsburg, J., filed an opinion concurring in part and concurring in the judgment. Breyer, J., filed a dissenting opinion, in which Stevens and Kennedy, JJ., joined. Sotomayor, J., took no part in the consideration or decision of the case. HEMI GROUP, LLC and KAI GACHUPIN,PETITIONERS v. CITY OF NEW YORK,NEW YORK\non writ of certiorari to the united states court of appeals for the second circuit\n[January 25, 2010]\n Chief Justice Roberts delivered the opinion of the Court in part.\n The City of New York taxes the possession of cigarettes. Hemi Group, based in New Mexico, sells cigarettes online to residents of the City. Neither state nor city law requires Hemi to charge, collect, or remit the tax, and the purchasers seldom pay it on their own. Federal law, however, requires out-of-state vendors such as Hemi to submit customer information to the States into which they ship the cigarettes.\n Against that backdrop, the City filed this lawsuit under the Racketeer Influenced and Corrupt Organizations Act (RICO), alleging that Hemi failed to file the required customer information with the State. That failure, the City argues, constitutes mail and wire fraud, which caused it to lose tens of millions of dollars in unrecovered cigarette taxes. Because the City cannot show that it lost the tax revenue &quot;by reason of&quot; the alleged RICO violation, 18 U. S. C. §1964(c), we hold that the City cannot state a claim under RICO. We therefore reverse the Court of Appeals\&#39; decision to the contrary.\nI\nA\n This case arises from a motion to dismiss, and so we accept as true the factual allegations in the City\&#39;s second amended complaint. See Leatherman v. Tarrant County Narcotics Intelligence and Coordination Unit, 507 U. S. 163, 164 (1993).\n New York State authorizes the City of New York to impose its own taxes on cigarettes. N. Y. Unconsol. Law Ann. §9436(1) (West Supp. 2009). Under that authority, the City has levied a $1.50 per pack tax on each standard pack of cigarettes possessed within the City for sale or use. N. Y. C. Admin. Code §11-1302(a) (2008); see also Record A1016. When purchasers buy cigarettes from in-state vendors, the seller is responsible for charging, collecting, and remitting the tax. N. Y. Tax Law Ann. §471(2) (West Supp. 2009). Out-of-state vendors, however, are not. Ibid.; see City of New York v. Smokes-Spirits.com, Inc., 541 F. 3d 425, 432-433 (CA2 2008). Instead, the City is responsible for recovering, directly from the customers, use taxes on cigarettes sold outside New York. That can be difficult, as those customers are often reluctant to pay and tough to track down. One way the City can gather information that would assist it in collecting the back taxes is through the Jenkins Act, 63 Stat. 884, as amended by 69 Stat. 627. That Act requires out-of-state cigarette sellers to register and to file a report with state tobacco tax administrators listing the name, address, and quantity of cigarettes purchased by state residents. 15 U. S. C. §§375-378.\n New York State and the City have executed an agreement under which both parties undertake to &quot;cooperate fully with each other and keep each other fully and promptly informed with reference to any person or transaction subject to both State and City cigarette taxes including [i]nformation obtained which may result in additional cigarette tax revenue to the State or City provided that the disclosure of that information is permissible under existing laws and agreements.&quot; Record A1003. The City asserts that under that agreement, the State forwards Jenkins Act information to the City. Id., at A998; Second Amended Compl. ¶54. That information helps the City track down purchasers who do not pay their taxes. Id., ¶¶58-59.\n Hemi Group is a New Mexico company that sells cigarettes online. Hemi, however, does not file Jenkins Act information with the State. The City alleges that this failure has cost it &quot;tens if not hundreds of millions of dollars a year in cigarette excise tax revenue.&quot; Record A996. Based on Hemi\&#39;s failure to file the information with the State, the City filed this federal RICO claim.\nB\n RICO provides a private cause of action for &quot;[a]ny person injured in his business or property by reason of a violation of section 1962 of this chapter.&quot; 18 U. S. C. §1964(c). Section 1962, in turn, contains RICO\&#39;s criminal provisions. Specifically, §1962(c), which the City invokes here, makes it &quot;unlawful for any person employed by or associated with any enterprise engaged in, or the activities of which affect, interstate ... commerce, to conduct or participate, directly or indirectly, in the conduct of such enterprise\&#39;s affairs through a pattern of racketeering activity.&quot; &quot;[R]acketeering activity&quot; is defined to include a number of so-called predicate acts, including the two at issue in this case — mail and wire fraud. See §1961(1).\n The City alleges that Hemi\&#39;s &quot;interstate sale of cigarettes and the failure to file Jenkins Act reports identifying those sales&quot; constitute the RICO predicate offenses of mail and wire fraud in violation of §1962(c), for which §1964(c) provides a private cause of action. Record A980. Invoking that private cause of action, the City asserts that it has suffered injury in the form of lost tax revenue — its &quot;business or property&quot; in RICO terms--&quot;by reason of&quot; Hemi\&#39;s fraud.\n Hemi does not contest the City\&#39;s characterization of the Jenkins Act violations as predicate offenses actionable under §1964(c). (We therefore assume, without deciding, that failure to file Jenkins Act material can serve as a RICO predicate offense.) Instead, Hemi argues that the City\&#39;s asserted injury — lost tax revenue — is not &quot;business or property&quot; under RICO, and that the City cannot show that it suffered any injury &quot;by reason of&quot; the failure to file Jenkins Act reports.\n The District Court dismissed the City\&#39;s RICO claims, determining that Hemi owner and officer Kai Gachupin did not have an individual duty to file Jenkins Act reports, and thus could not have committed the alleged predicate acts. City of New York v. Nexicon, Inc., No. 03 CV 383 (DAB), 2006 WL 647716, *7-*8 (SDNY, Mar. 15, 2006). The District Court therefore held that the City could not establish that Hemi and Gachupin formed an &quot;enterprise&quot; as required to establish RICO liability. Id., at *7-*10. Because it dismissed on that ground, the District Court did not address whether the City\&#39;s loss of tax revenue constitutes an injury to its &quot;business or property&quot; under §1964, or whether that injury was caused &quot;by reason of&quot; Hemi\&#39;s failure to file the Jenkins Act reports.\n The Second Circuit vacated the District Court\&#39;s judgment and remanded for further proceedings. The Court of Appeals held that the City had established that Gachupin and Hemi operated as an &quot;enterprise&quot; and that the enterprise committed the predicate RICO acts of mail and wire fraud, based on the failure to file the Jenkins Act material with the State. 541 F. 3d, at 447-448. The court also determined that the City\&#39;s asserted injury, lost tax revenue, was &quot;business or property&quot; under RICO. Id., at 444-445. And that injury, the court concluded, came about &quot;by reason of&quot; the predicate mail and wire frauds. Id., at 440-444. The City thus had stated a viable RICO claim. Judge Winter dissented on the ground that the alleged RICO violation was not the proximate cause of the City\&#39;s injury. Id., at 458-461.\n Hemi filed a petition for certiorari, asking this Court to determine whether the City had been &quot;directly injured in its \&#39;business or property\&#39; &quot; by reason of the alleged mail and wire frauds. Pet. for Cert. i. We granted that petition. 556 U. S. __ (2009).\nII\n Though framed as a single question, Hemi\&#39;s petition for certiorari raises two distinct issues: First, whether a loss in tax revenue is &quot;business or property&quot; under 18 U. S. C. §1964(c); and second, whether the City\&#39;s asserted injury came about &quot;by reason of&quot; the allegedly fraudulent conduct, as required by §1964(c). We determine that the City cannot satisfy the causation requirement — that any injury the City suffered must be &quot;by reason of&quot; the alleged frauds — and therefore do not decide whether the City\&#39;s allegations of lost tax revenue constitute an injury to its &quot;business or property.&quot;\nA\n In Holmes v. Securities Investor Protection Corporation, 503 U. S. 258 (1992), we set forth the standard of causation that applies to civil RICO claims. In that case, we addressed a RICO claim brought by Securities Investor Protection Corporation (SIPC) against defendants whom SIPC alleged had manipulated stock prices. Id., at 262-263. SIPC had a duty to reimburse customers of certain registered broker-dealers in the event the broker-dealers were unable to meet their financial obligations. Id., at 261. When the conspiracy by the stock manipulators was detected, stock prices collapsed, and two broker-dealers were unable to meet their obligations to their customers. SIPC, as insurer against that loss, ultimately was on the hook for nearly $13 million to cover the customers\&#39; claims. The Court held that SIPC could not recover against the conspirators because it could not establish that it was injured &quot;by reason of&quot; the alleged fraud, as that phrase is used in RICO.\n We explained that, to state a claim under civil RICO, the plaintiff is required to show that a RICO predicate offense &quot;not only was a \&#39;but for\&#39; cause of his injury, but was the proximate cause as well.&quot; Id., at 268. Proximate cause for RICO purposes, we made clear, should be evaluated in light of its common-law foundations; proximate cause thus requires &quot;some direct relation between the injury asserted and the injurious conduct alleged.&quot; Ibid. A link that is &quot;too remote,&quot; &quot;purely contingent,&quot; or &quot;indirec[t]&quot; is insufficient. Id., at 271, 274.\n Applying that standard, we rejected SIPC\&#39;s RICO claim. The alleged conspiracy, we held, directly harmed only the broker-dealers; SIPC\&#39;s injury, on the other hand, was &quot;purely contingent&quot; on that harm. Id., at 271. The connection between the alleged conspiracy and SIPC\&#39;s injury was therefore &quot;too remote&quot; to satisfy RICO\&#39;s direct relationship requirement. Ibid.\n The City\&#39;s causal theory is far more attenuated than the one we rejected in Holmes. According to the City, Hemi committed fraud by selling cigarettes to city residents and failing to submit the required customer information to the State. Without the reports from Hemi, the State could not pass on the information to the City, even if it had been so inclined. Some of the customers legally obligated to pay the cigarette tax to the City failed to do so. Because the City did not receive the customer information, the City could not determine which customers had failed to pay the tax. The City thus could not pursue those customers for payment. The City thereby was injured in the amount of the portion of back taxes that were never collected. See Record A996.\n But as we reiterated in Holmes, &quot;[t]he general tendency of the law, in regard to damages at least, is not to go beyond the first step.&quot; 503 U. S., at 271-272 (quoting Associated Gen. Contractors of Cal., Inc. v. Carpenters, 459 U. S. 519, 534 (1983), in turn quoting Southern Pacific Co. v. Darnell-Taenzer Lumber Co., 245 U. S. 531, 533 (1918), internal quotation marks omitted). Our cases confirm that the &quot;general tendency&quot; applies with full force to proximate cause inquiries under RICO. Holmes, supra, at 271-272; see also Bridge v. Phoenix Bond &amp; Indemnity Co., 553 U. S. __, __ (2008) (slip op., at 18-19); Anza v. Ideal Steel Supply Corp., 547 U. S. 451, 460-461 (2006). Because the City\&#39;s theory of causation requires us to move well beyond the first step, that theory cannot meet RICO\&#39;s direct relationship requirement.\n Our decision in Anza, supra, confirms that the City\&#39;s theory of causation is far too indirect. There we considered a RICO claim brought by Ideal Steel Supply against its competitor, National Steel Supply. Ideal alleged that National had defrauded New York State by failing to charge and remit sales taxes, and that National was thus able to undercut Ideal\&#39;s prices. The lower prices offered by National, Ideal contended, allowed National to attract customers at Ideal\&#39;s expense. Id., at 458.\n Finding the link between the fraud alleged and injury suffered to be &quot;attenuated,&quot; we rejected Ideal\&#39;s claim. Id., at 459. &quot;The direct victim of this conduct,&quot; we held, was &quot;the State of New York, not Ideal.&quot; Id., at 458. &quot;It was the State that was being defrauded and the State that lost tax revenue as a result.&quot; Ibid. We recognized that Ideal had asserted &quot;its own harms when [National] failed to charge customers for the applicable sales tax.&quot; Ibid. But the cause of Ideal\&#39;s harm was &quot;a set of actions (offering lower prices) entirely distinct from the alleged RICO violation (defrauding the State).&quot; Ibid. The alleged violation therefore had not &quot;led directly to the plaintiff\&#39;s injuries,&quot; and Ideal accordingly had failed to meet RICO\&#39;s &quot;requirement of a direct causal connection&quot; between the predicate offense and the alleged harm. Id., at 460-461.\n The City\&#39;s claim suffers from the same defect as the claim in Anza. Here, the conduct directly responsible for the City\&#39;s harm was the customers\&#39; failure to pay their taxes. And the conduct constituting the alleged fraud was Hemi\&#39;s failure to file Jenkins Act reports. Thus, as in Anza, the conduct directly causing the harm was distinct from the conduct giving rise to the fraud. See id., at 458.\n Indeed, the disconnect between the asserted injury and the alleged fraud in this case is even sharper than in Anza. There, we viewed the point as important because the same party — National Steel — had both engaged in the harmful conduct and committed the fraudulent act. We nevertheless found the distinction between the relevant acts sufficient to defeat Ideal\&#39;s RICO claim. Here, the City\&#39;s theory of liability rests not just on separate actions, but separate actions carried out by separate parties.\n The City\&#39;s theory thus requires that we extend RICO liability to situations where the defendant\&#39;s fraud on the third party (the State) has made it easier for a fourth party (the taxpayer) to cause harm to the plaintiff (the City). Indeed, the fourth-party taxpayers here only caused harm to the City in the first place if they decided not to pay taxes they were legally obligated to pay. Put simply, Hemi\&#39;s obligation was to file the Jenkins Act reports with the State, not the City, and the City\&#39;s harm was directly caused by the customers, not Hemi. We have never before stretched the causal chain of a RICO violation so far, and we decline to do so today. See id., at 460-461; cf. Associated Gen. Contractors, supra, at 541, n. 46 (finding no proximate cause in the antitrust context where the plaintiff\&#39;s &quot;harm stems most directly from the conduct of persons who are not victims of the conspiracy&quot;).\n One consideration we have highlighted as relevant to the RICO &quot;direct relationship&quot; requirement is whether better situated plaintiffs would have an incentive to sue. See Holmes, supra, at 269-270. The State certainly is better situated than the City to seek recovery from Hemi. And the State has an incentive to sue — the State imposes its own $2.75 per pack tax on cigarettes possessed within the State, nearly double what the City charges. N. Y. Tax Law Ann. §471(1) (West Supp. 2009). We do not opine on whether the State could bring a RICO action for any lost tax revenue. Suffice it to say that the State would have concrete incentives to try. See Anza, supra, at 460 (&quot;Ideal accuses the Anzas of defrauding the State of New York out of a substantial amount of money. If the allegations are true, the State can be expected to pursue appropriate remedies&quot;). The dissent would have RICO\&#39;s proximate cause requirement turn on foreseeability, rather than on the existence of a sufficiently &quot;direct relationship&quot; between the fraud and the harm. It would find that the City has satisfied that requirement because &quot;the harm is foreseeable; it is a consequence that Hemi intended, indeed desired; and it falls well within the set of risks that Congress sought to prevent.&quot; Post, at 6 (opinion of Breyer, J.). If this line of reasoning sounds familiar, it should. It is precisely the argument lodged against the majority opinion in Anza. There, the dissent criticized the majority\&#39;s view for &quot;permit[ting] a defendant to evade liability for harms that are not only foreseeable, but the intended consequences of the defendant\&#39;s unlawful behavior.&quot; 547 U. S., at 470 (Thomas, J., concurring in part and dissenting in part). But the dissent there did not carry the day, and no one has asked us to revisit Anza.\n The concepts of direct relationship and foreseeability are of course two of the &quot;many shapes [proximate cause] took at common law,&quot; Holmes, supra, at 268. Our precedents make clear that in the RICO context, the focus is on the directness of the relationship between the conduct and the harm. Indeed, Anza and Holmes never even mention the concept of foreseeability. B\n The City offers a number of responses. It first challenges our characterization of the violation at issue. In the City\&#39;s view, the violation is not merely Hemi\&#39;s failure to file Jenkins Act information with the State, but a more general &quot;systematic scheme to defraud the City of tax revenue.&quot; Brief for Respondent 42. Having broadly defined the violation, the City contends that it has been directly harmed by reason of that systematic scheme. Ibid.\n But the City cannot escape the proximate cause requirement merely by alleging that the fraudulent scheme embraced all those indirectly harmed by the alleged conduct. Otherwise our RICO proximate cause precedent would become a mere pleading rule. In Anza, for example, Ideal alleged that National\&#39;s scheme &quot;was to give National a competitive advantage over Ideal.&quot; 547 U. S., at 454-455. But that allegation did not prevent the Court from concluding that National\&#39;s fraud directly harmed only the State, not Ideal. As the Court explained, Ideal could not &quot;circumvent the proximate-cause requirement simply by claiming that the defendant\&#39;s aim was to increase market share at a competitor\&#39;s expense.&quot; Id., at 460.1\n Our precedent makes clear, moreover, that &quot;the compensable injury flowing from a [RICO] violation ... \&#39;necessarily is the harm caused by [the] predicate acts.\&#39; &quot; Id., at 457 (quoting Sedima, S. P. R. L. v. Imrex Co., 473 U. S. 479, 497 (1985)). In its RICO statement, the City alleged that Hemi\&#39;s failure to file Jenkins Act reports constituted the predicate act of mail and wire fraud. Record A980. The City went on to allege that this predicate act &quot;directly caused&quot; its harm, id., at A996, but that assertion is a legal conclusion about proximate cause — indeed, the very legal conclusion before us. The only fraudulent conduct alleged here is a violation of the Jenkins Act. See 541 F. 3d, at 459 (Winter, J., dissenting). Thus, the City must show that Hemi\&#39;s failure to file the Jenkins Act reports with the State led directly to its injuries. This it cannot do.\n The City also relies on Bridge, 553 U. S. ___. Bridge reaffirmed the requirement that there must be &quot;a sufficiently direct relationship between the defendant\&#39;s wrongful conduct and the plaintiff\&#39;s injury.&quot; Id., at ___ (slip op., at 18). The case involved competing bidders at a county tax-lien auction. Because the liens were profitable even at the lowest possible bid, multiple bidders offered that low bid. (The bidding took the form of the percentage tax penalty the bidder would require the property owner to pay, so the lowest possible bid was 0%.) To decide which bidder would be awarded the lien, the county devised a plan to allocate the liens &quot;on a rotational basis.&quot; Id., at ___ (slip op., at 3) (internal quotation marks omitted). But as we noted in that case, this created a &quot;perverse incentive&quot;: &quot;Bidders who, in addition to bidding themselves, sen[t] agents to bid on their behalf [would] obtain a disproportionate share of liens.&quot; Ibid. The county therefore prohibited bidders from using such agents. Ibid.\n A losing bidder alleged that a competitor had defrauded the county by employing shadow bidders to secure a greater proportion of liens than it was due. We held that the bidder-plaintiff had met RICO\&#39;s causation requirement. Distinguishing that claim from the one at issue in Anza, we noted that the plaintiff\&#39;s theory of causation in Bridge was &quot;straightforward&quot;: Because of the zero-sum nature of the auction, and because the county awarded bids on a rotational basis, each time a fraud-induced bid was awarded, a particular legitimate bidder was necessarily passed over. 553 U. S., at ___ (slip op., at 18). The losing bidders, moreover, &quot;were the only parties injured by petitioners\&#39; misrepresentations.&quot; Ibid. The county was not; it received the same revenue regardless of which bidder prevailed.\n The City\&#39;s theory in this case is anything but straightforward: Multiple steps, as we have detailed, separate the alleged fraud from the asserted injury. And in contrast to Bridge, where there were &quot;no independent factors that account[ed] for [the plaintiff\&#39;s] injury,&quot; ibid., here there certainly were: The City\&#39;s theory of liability rests on the independent actions of third and even fourth parties.\n The City at various points during the proceedings below described its injury as the lost &quot;opportunity to tax&quot; rather than &quot;lost tax revenue.&quot; It is not clear that there is a substantive distinction between the two descriptions. In any event, before this Court, the City\&#39;s argument turned on lost revenue, not a lost opportunity to collect it. See, e.g., Brief for Respondent i (&quot;Counter-Question Presented[:] Does the City of New York have standing under RICO because lost tax revenue constitutes a direct injury to the City\&#39;s \&#39;business or property\&#39; in accord with the statute, 18 U. S. C. §1964(c), and this Court\&#39;s authority?&quot;); id., at 40 (&quot;[T]he City alleges that it has been injured (the loss of tax revenues) by defendants\&#39; RICO violations&quot;). Indeed, in its entire brief on the merits, the City never uses the word &quot;opportunity&quot; (or anything similar) to describe its injury.\n Perhaps the City articulated its argument in terms of the lost revenue itself to meet Hemi\&#39;s contention that an injury to the mere &quot;opportunity to collect&quot; taxes fell short of RICO\&#39;s injury to &quot;property&quot; requirement. Brief for Petitioners 25 (&quot;The opportunity to collect taxes from those who did owe them ... falls within a class of expectation interests that do not qualify as injury to business or property and therefore do not confer civil RICO standing&quot; (internal quotation marks omitted)); see Cleveland v. United States, 531 U. S. 12, 15 (2000) (&quot;It does not suffice ... that the object of the fraud may become property in the recipient\&#39;s hands; for purposes of the mail fraud statute, the thing obtained must be property in the hands of the victim&quot;).\n That is not to say, however, that the City would fare any better on the causation question had it framed its argument in terms of a lost opportunity. Hemi\&#39;s filing obligation would still be to the State, and any harm to the City would still be caused directly by the customers\&#39; failure to pay their taxes. See 541 F. 3d, at 461 (Winter, J., dissenting). Whatever the City\&#39;s reasons for framing its merits arguments as it has, we will not reformulate them for it now.2\n In a final effort to save its claim, the City has shifted course before this Court. In its second amended complaint and RICO statement, the City relied solely on Hemi\&#39;s failure to file Jenkins Act reports with the State to form the basis of the predicate act mail and wire frauds. See Second Amended Compl. ¶¶99, 101, 118, 125; Record A980-A982. Before this Court, however, the City contends that Hemi made affirmative misrepresentations to City residents, which, the City now argues, comprise part of the RICO predicate mail and wire frauds. See Brief for Respondent 42-43. The City\&#39;s counsel pressed the point at oral argument, asserting that the City\&#39;s injury was &quot;caused by the seller\&#39;s misrepresentation, which encourages the purchasers not to pay taxes.&quot; Tr. of Oral Arg. 44.\n The City, however, affirmatively disavowed below any reliance on misrepresentations to form the predicate RICO violation. The alleged false statements, the City there stated, &quot;are evidence of the scheme to defraud, but are not part of the fraud itself. ... [T]he scheme to defraud would exist even absent the statements.&quot; Record A980. The City reiterated the point: &quot;The scheme consists of the interstate sale of cigarettes and the failure to file Jenkins Act reports indentifying those sales.&quot; Ibid. &quot;Related to the fraud, but not a circumstance \&#39;constituting\&#39; the fraud, the defendants inform customers that [their] purchases will be concealed, and also seek to convince their customers that no taxes are owed by claiming, falsely, that the sales are tax-free.&quot; Id., at A982. Not only did the City disclaim any reliance upon misrepresentations to the customers to form the predicate acts under RICO, but the City made clear in its second amended complaint that its two RICO claims rested solely on the Jenkins Act violations as the predicate acts. See Second Amended Compl. ¶¶ 118, 125. Because the City defined the predicate act before the District Court as Hemi\&#39;s failure to file the Jenkins Act reports, and expressly disavowed reliance on the alleged misrepresentations themselves as predicate acts, we decline to consider Hemi\&#39;s alleged misstatements as predicate acts at this late stage.\n* * *\n It bears remembering what this case is about. It is about the RICO liability of a company for lost taxes it had no obligation to collect, remit, or pay, which harmed a party to whom it owed no duty. It is about imposing such liability to substitute for or complement a governing body\&#39;s uncertain ability or desire to collect taxes directly from those who owe them. And it is about the fact that the liability comes with treble damages and attorney\&#39;s fees attached. This Court has interpreted RICO broadly, consistent with its terms, but we have also held that its reach is limited by the &quot;requirement of a direct causal connection&quot; between the predicate wrong and the harm. Anza, 547 U. S., at 460. The City\&#39;s injuries here were not caused directly by the alleged fraud, and thus were not caused &quot;by reason of&quot; it. The City, therefore, has no RICO claim.\n The judgment of the Court of Appeals for the Second Circuit is reversed, and the case is remanded for further proceedings consistent with this opinion.\nIt is so ordered.\n Justice Sotomayor took no part in the consideration or decision of this case.\nHEMI GROUP, LLC and KAI GACHUPIN, PETITIONERS v. CITY OF NEW YORK, NEW YORK\non writ of certiorari to the united states court of appeals for the second circuit\n[January 25, 2010]\n Justice Ginsburg, concurring in part and concurring in the judgment.\n As the Court points out, this is a case &quot;about the RICO liability of a company for lost taxes it had no obligation to collect, remit, or pay.&quot; Ante, at 15. New York City (or City) cannot, consistent with the Commerce Clause, compel Hemi Group, an out-of-state seller, to collect a City sales or use tax. See Quill Corp. v. North Dakota, 504 U. S. 298, 301 (1992); National Bellas Hess, Inc. v. Department of Revenue of Ill., 386 U. S. 753, 758 (1967). Unable to impose its tax on Hemi Group, or to require Hemi Group to collect its tax, New York City is attempting to use the Racketeer Influenced and Corrupt Act (RICO), 18 U. S. C. §1964(c), in combination with the Jenkins Act, 15 U. S. C. §§375-378, to overcome that disability.\n Hemi Group committed fraud only insofar as it violated the Jenkins Act by failing to report the names and addresses of New York purchasers to New York State. There is no other grounding for the City\&#39;s charge that it was defrauded by Hemi Group. &quot;Absent the Jenkins Act, [Hemi Group] would have owed no duty to disclose [its] sales to anyone, and [its] failure to disclose could not conceivably be deemed fraud of any kind.&quot; City of New York v. Smokes-Spirits.com, Inc., 541 F. 3d 425, 460 (CA2 2008) (Winter, J., dissenting in part and concurring in part).\n Because &quot;the alleged fraud is based on violations of ... the Jenkins Act, ... the nature and consequences of the fraud are [properly] determined solely by the scope of that Act.&quot; Id., at 459. But &quot;conspicuously absent from the City\&#39;s pleadings is any claim brought pursuant to the Jenkins Act itself, rather than RICO, seeking enforcement of the Jenkins Act.&quot; Id., at 460. The City thus effectively admits that its claim is outside the scope of the very statute on which it builds its RICO suit.\n I resist reading RICO to allow the City to end-run its lack of authority to collect tobacco taxes from Hemi Group or to reshape the &quot;quite limited remedies&quot; Congress has provided for violations of the Jenkins Act, see ante, at 13, n. 2. Without subscribing to the broader range of the Court\&#39;s proximate cause analysis, I join the Court\&#39;s opinion to the extent it is consistent with the above-stated view, and I concur in the Court\&#39;s judgment.\nHEMI GROUP, LLC and KAI GACHUPIN, PETITIONERS v. CITY OF NEW YORK, NEW YORK\non writ of certiorari to the united states court of appeals for the second circuit\n[January 25, 2010]\n Justice Breyer, with whom Justice Stevens and Justice Kennedy join, dissenting.\n In my view, the Hemi Group\&#39;s failure to provide New York State with the names and addresses of its New York City cigarette customers proximately caused New York City to lose tobacco tax revenue. I dissent from the Court\&#39;s contrary holding.\nI\nA\n Although the ultimate legal issue is a simple one, the statutory framework within which it arises is complex. As the majority points out, ante, at 3, the Racketeer Influenced and Corrupt Organizations Act (RICO), 18 U. S. C. §§1961-1968, provides a private cause of action (and treble damages) to &quot;[a]ny person injured in&quot; that person\&#39;s &quot;business or property by reason of&quot; conduct that involves a &quot;pattern of racketeering activity.&quot; §§1964(c) (emphasis added), 1962. RICO defines &quot;racketeering activity&quot; to include violations of various predicate criminal statutes including mail and wire fraud. §1961(1). The &quot;pattern of racketeering&quot; at issue here consists of repeated instances of mail fraud, which in turn consist largely of violations of the federal Jenkins Act, 15 U. S. C. §§375-378. That Act seeks to help States collect tobacco taxes by requiring out-of-state cigarette sellers, such as Hemi, to file reports with state tobacco tax administrators identifying the names and addresses of in-state customers and the amounts they purchased. The violations consist of Hemi\&#39;s intentional failure to do so.\n As the majority points out, we must assume for present purposes that an intentional failure to file Jenkins Act reports counts as mail fraud (at least where the failure is part of a scheme that includes use of the mails). Ante, at 4. Lower courts have sometimes so held. See United States v. Melvin, 544 F. 2d 767, 773-777 (CA5 1977); United States v. Brewer, 528 F. 2d 492, 497-498 (CA4 1975). The Court of Appeals here so held. City of New York v. Smokes-Spirits.com, Inc., 541 F. 3d 425, 446 (CA2 2008). And no one has challenged that holding.\n We must also assume that Hemi\&#39;s &quot;intentiona[l] conceal[ment]&quot; of the name/address/purchase information, Second Am. Compl. ¶¶103, 104, is the legal equivalent of an affirmative representation that Hemi had no New York City customers. See Restatement (Second) of Torts §551, p. 119 (1976) (a person &quot;who fails to disclose ... a fact&quot; may be &quot;subject to ... liability&quot; as if &quot;he had represented the nonexistence of the matter that he has failed to disclose&quot;); cf. Stewart v. Wyoming Cattle Ranche Co., 128 U. S. 383, 388 (1888) (concealment or suppression of material fact equivalent to a false representation). On these assumptions, the question before us is whether New York City\&#39;s loss of tax revenues constitutes an injury to its &quot;business or property by reason of&quot; Hemi\&#39;s Jenkins Act misrepresentations.\nB\n The case arises as a result of the District Court\&#39;s dismissal of New York City\&#39;s RICO complaint. Fed. Rule Civ. Proc. 12(b)(6). Hence we must answer the question in light of the facts alleged, taking as true the facts pleaded in the complaint (along with the &quot;RICO statement&quot; submitted pursuant to the District Court\&#39;s rule). Bridge v. Phoenix Bond &amp; Indemnity Co., 553 U. S. ___, ___, n. 1 (2008) (slip op., at 1, n. 1). Those facts (as I interpret them) include the following:\n 1. New York State (or State) and New York City (or City) both impose tobacco taxes on New York cigarette buyers. Second Am. Compl. ¶37.\n 2. Both City and State normally collect the taxes from in-state cigarette sellers, who, in turn, charge retail customers. Id., ¶¶4, 6.\n 3. Hemi, an out-of-state company, sells cigarettes over the Internet to in-state buyers at prices that are lower than in-state cigarette prices. The difference in price is almost entirely attributable to the fact that Hemi\&#39;s prices do not include any charge for New York taxes. Hemi advertises its cigarettes as &quot;tax free&quot; and often adds that it &quot;does not report any sales activity to any State taxing authority.&quot; Id., ¶¶2, 6, 108b (internal quotation marks omitted; emphasis deleted).\n 4. New York State normally receives Jenkins Act reports from out-of-state sellers. It is contractually obliged to pass the information on to New York City (and I assume it normally does so). Id., ¶¶8-9, 11, 54-57.\n 5. When it receives Jenkins-Act-type information, New York City writes letters to resident customers asking them to pay the tobacco tax they owe. As a result, New York City collects about 40% of the tax due. (By doing so, in 2005 the City obtained $400,000 out of $1 million owed.) Id., ¶¶58-59.\n 6. Hemi has consistently and intentionally failed to file Jenkins Act reports in order to prevent both State and City from collecting the tobacco taxes that Hemi\&#39;s in-state customers owe and which otherwise many of those customers would pay. Id., ¶¶13, 24, 58.\nII\nA\n The majority asks whether New York City stated a valid cause of action in alleging that it lost tobacco tax revenue &quot;by reason of&quot; Hemi\&#39;s unlawful misrepresentations. The facts just set forth make clear that we must answer that question affirmatively. For one thing, no one denies that Hemi\&#39;s misrepresentation was a &quot;but-for&quot; condition of New York City\&#39;s loss. In the absence of the misrepresentation, i.e., had Hemi told New York State the truth about its New York City customers, New York City would have written letters to the purchasers and obtained a significant share of the tobacco taxes buyers owed.\n For another thing, New York City\&#39;s losses are &quot;reasonably foreseeable&quot; results of the misrepresentation. It is foreseeable that, without the name/address/purchase information, New York City would not be able to write successful dunning letters, and it is foreseeable that, with that information, it would be able to write successful dunning letters. Indeed, that is a natural inference from, among other things, the complaint\&#39;s assertion that Hemi advertised that it did not &quot;report&quot; sales information to &quot;State taxing authorit[ies].&quot; See, e.g., Smith v. Bolles, 132 U. S. 125, 130 (1889) (for causation purposes, &quot; \&#39;those results are proximate which the wrong-doer from his position must have contemplated as the probable consequence of his fraud or breach of contract\&#39; &quot; (quoting Crater v. Binninger, 33 N. J. L. 513, 518 (Ct. Errors and Appeals 1869)); see also W. Keeton, D. Dobbs, R. Keeton, &amp; D. Owen, Prosser and Keeton on Law of Torts §110, p. 767 (5th ed. 1984) (hereinafter Prosser and Keeton); 3 S. Speiser, C. Krause, &amp; A. Gans, The American Law of Torts §11:3, p. 68 (2003) (&quot;By far the most treated and most discussed aspect of the law of proximate or legal cause is the so-called doctrine of foreseeability&quot;). But cf. ante, at 9 (&quot;The dissent would have RICO\&#39;s proximate cause requirement turn on foreseeability ...&quot;).\n Further, Hemi misrepresented the relevant facts in order to bring about New York City\&#39;s relevant loss. It knew the loss would occur; it intended the loss to occur; one might even say it desired the loss to occur. It is difficult to find common-law cases denying liability for a wrongdoer\&#39;s intended consequences, particularly where those consequences are also foreseeable. Cf. Bridge, supra, at ___-___ (slip op., at 9-10) (&quot;[S]uppose an enterprise that wants to get rid of rival businesses mails representations about them to their customers and suppliers, but not to the rivals themselves. If the rival businesses lose money as a result of the misrepresentations, it would certainly seem that they were injured in their business \&#39;by reason of\&#39; a pattern of mail fraud ...&quot;); N. M. ex rel. Caleb v. Daniel E., 2008 UT 1, ¶7, n. 3, 175 P. 3d 566, 569, n. 3 (&quot;[I]f an unskilled marksman were to shoot a single bullet at a distant individual with the intent of killing her, that individual\&#39;s injury or death may not be the natural and probable consequence of the [shooter\&#39;s] act[,] ... [but] the harm would not be an accident because the shooter intended the harm, even though the likelihood of success was improbable&quot;); 1 F. Harper &amp; F. James, The Law of Torts, §7.13, p. 584 (1956) (explaining that, ordinarily, &quot;all intended consequences&quot; of an intentional act &quot;are proximate&quot;).\n In addition, New York City\&#39;s revenue loss falls squarely within the bounds of the kinds of harms that the Jenkins Act (essentially the predicate statute) seeks to prevent. The statute is entitled &quot;An Act To assist States in collecting sales and use taxes on cigarettes.&quot; 63 Stat. 884. I have no reason to believe the Act intends any different result with respect to collection of a city\&#39;s tobacco tax assessed under the authority of state law. See N. Y. Unconsol. Law Ann. §9436(1) (West Supp. 2009) (authorizing cities with over one million inhabitants to impose their own cigarette taxes). The Restatement (Second) of Torts explains that where\n&quot;a statute requires information to be furnished ... for the protection of a particular class of persons, one who makes a fraudulent misrepresentation ... is subject to liability to the persons for pecuniary loss ... in a transaction of the kind in which the statute is intended to protect them.&quot; §536, at 77 (1976).\nSee also §536, Appendix (citing supporting cases in the Reporter\&#39;s Note).\n Finally, we have acknowledged that &quot;Congress modeled §1964(c) on the civil-action provision of the federal antitrust laws,&quot; and we have therefore looked to those laws as an interpretive aid in RICO cases. Holmes v. Securities Investor Protection Corporation, 503 U. S. 258, 267, 268 (1992). I can find no antitrust analogy that suggests any lack of causation here, nor has the majority referred to any such analogical antitrust circumstance.\n The upshot is that the harm is foreseeable; it is a consequence that Hemi intended, indeed desired; and it falls well within the set of risks that Congress sought to prevent. Neither antitrust analogy nor any statutory policy of which I am aware precludes a finding of &quot;proximate cause.&quot; I recognize that some of our opinions may be read to suggest that the words &quot;by reason of&quot; in RICO do not perfectly track common-law notions of proximate cause. See, e.g., Bridge, 553 U. S., at ___-___ (slip op., at 14-16). But where so much basic common law argues in favor of such a finding, how can the Court avoid that conclusion here?\nB\n The majority bases its contrary conclusion upon three special circumstances and its reading of two of this Court\&#39;s prior cases. In my view, none of the three circumstances precludes finding causation (indeed two are not even relevant to the causation issue). Nor can I find the two prior cases controlling.\n The three circumstances are the following: First, the majority seems to argue that the intervening voluntary acts of third parties, namely, the customers\&#39; own independent failures to pay the tax, cuts the causal chain. Ante, at 8 (&quot;[T]he City\&#39;s harm was directly caused by the customers, not Hemi&quot;); see Saugerties Bank v. Delaware &amp; Hudson Co., 236 N. Y. 425, 430, 141 N. E. 904, 905 (1923) (third party\&#39;s forgery of a bill of lading an intervening cause); Prosser and Keeton §44, at 313-314 (collecting cases on intervening intentional or criminal acts). But an intervening third-party act, even if criminal, does not cut a causal chain where the intervening act is foreseeable and the defendant\&#39;s conduct increases the risk of its occurrence. See Lillie v. Thompson, 332 U. S. 459, 462 (1947) (per curiam); Horan v. Watertown, 217 Mass. 185, 186, 104 N. E. 464, 465 (1914); see also Restatement (Second) of Torts §435A, at 454 (1963-1964) (intentional tortfeasor liable for intended harm &quot;except where the harm results from an outside force the risk of which is not increased by the defendant\&#39;s act&quot;). Hemi\&#39;s act here did increase the risk that New York City would not be paid; and not only was the risk foreseeable, but Hemi\&#39;s advertising strongly suggests that Hemi actually knew nonreporting would likely bring about this very harm. The majority claims that &quot;directness,&quot; rather than foreseeability, should be our guide in assessing proximate cause, and that the lack of a &quot;direct&quot; relationship in this case precludes a finding of proximate causation. Ante, at 9-10. But courts used this concept of directness in tort law to expand liability (for direct consequences) beyond what was foreseeable, not to eliminate liability for what was foreseeable. Thus, under the &quot;directness&quot; theory of proximate causation, there is liability for both &quot;all \&#39;direct\&#39; (or \&#39;directly traceable\&#39;) consequences and those indirect consequences that are foreseeable.&quot; Prosser and Keeton §42, at 273 (emphasis added); see also id., §43, at 294, and n. 17 (citing Nunan v. Bennett, 184 Ky. 591, 212 S. W. 570 (1919)). I do not read this Court\&#39;s opinions in Holmes or Anza v. Ideal Steel Supply Corp., 547 U. S. 451 (2006), to invoke anything other than this traditional understanding.\n Second, the majority correctly points out that Hemi misrepresented the situation to the State, not to the City — a circumstance which, the majority believes, significantly separates misrepresentation from harm. Ante, at 8. But how could that be so? New York State signed a contract promising to relay relevant information to the City. In respect to that relevant information, the State is a conduit, indeed roughly analogous to a postal employee. This Court has recognized specifically that &quot;under the common law a fraud may be established when the defendant has made use of a third party to reach the target of the fraud.&quot; Tanner v. United States. The treatises say the same. See, e.g., Prosser and Keeton §107, at 743-745; 26 C. J. S., Fraud §47, p. 1121 (1921) (collecting cases); see also Prosser, Misrepresentation and Third Parties, 19 Vand. L. Rev. 231, 240-241, and nn. 56-59, 62-64 (1966) (collecting cases). This Court has never suggested the contrary, namely, that a defendant is not liable for (foreseeable) harm (intentionally) caused to the target of a scheme to defraud simply because the misrepresentation was transmitted via a third (or even a fourth or fifth) party. Cf. Terry, Intent to Defraud, 25 Yale L. J. 87, 93 (1915) (&quot;When a representation is communicated through one person to another in such circumstances that it can be deemed to be directed to the latter, it makes no difference through how many persons or by how circuitous a route it reaches the latter ...&quot;).\n Third, the majority places great weight upon its view that Hemi tried to defraud the State, not the City. Ante, at 8-9. Hemi, however, sought to defraud both. Third Amended RICO Statement ¶d (explaining that &quot;[e]very other State or local government that imposes a use tax on cigarettes and whose residents purchase cigarettes&quot; from Hemi is a victim of its scheme to defraud). Hemi sought to prevent the State from collecting state taxes; and it sought to prevent the City from collecting city taxes. Here we are concerned only with the latter. In respect to the latter, the State was an information conduit. The fact that state taxes were also involved is beside the point.\n The two Supreme Court cases to which the majority refers involve significantly different causal circumstances. Ante, at 5-8. The predicate acts in Holmes — the defendant\&#39;s acts that led to the plaintiff\&#39;s harm — consisted of securities frauds. The defendant misrepresented the prospects of one company and misled the investing public into falsely believing that it could readily buy and sell the stock of another. When the truth came out, stock prices fell, investors (specifically, stockbrokers) lost money, and since the stockbrokers could not pay certain creditors, those creditors also lost money. 503 U. S., at 262-263. Claiming subrogation to stand in the shoes of the creditors, the Securities Investor Protection Corporation sued. Id., at 270-271.\n Since the creditors had not bought the securities, there was little reason to believe the defendant intended their harm. And the securities statutes seek, first and foremost, to protect investors, not creditors of those who sell stock to those investors. The latter harm (a broker\&#39;s creditor\&#39;s loss) differs in kind from the harm that the &quot;predicate act&quot; statute primarily seeks to avoid and that its violation would ordinarily cause (namely, investors\&#39; stock-related monetary losses). As Part II-A, supra, points out, neither of these circumstances is present here.\n In Anza, the plaintiff was a business competitor of the defendants. The plaintiff claimed that the defendants falsely told state officials that they did not owe sales tax. The plaintiff added that, had the defendants paid the tax they owed, the defendants would have had less money available to run their business, and the plaintiff consequently would have been able to compete against them more effectively. 547 U. S., at 454, 457-458.\n Again, in Anza the kind of harm that the plaintiff alleged is not the kind of harm that the tax statutes primarily seek to prevent. Rather, it alleged a kind of harm (competitive injury) that tax violations do not ordinarily cause and which ordinarily flows from the regular operation of a competitive marketplace. Thus, in both Holmes and Anza, unlike the present case, plaintiffs alleged special harm, neither squarely within the class of harms at which the relevant statutes were directed, nor of a kind that typical violators would intend or even foresee.\n Bridge, which the majority seeks to distinguish, ante, at 11-12, is a more closely analogous case. The defendants in that case directed agents to misrepresent to a county that they qualified as independent bidders at a county-run property auction. They consequently participated in the auction. And the plaintiffs, facing additional bidders, lost some of the property that they otherwise would have won — all to their financial disadvantage. 553 U. S., at ___-___ (slip op., at 3-4). The harm was foreseeable; it was intended; and it was precisely the kind of harm that the county\&#39;s bidding rules sought to prevent. Thus this Court held that the harm was &quot;a foreseeable and natural consequence of [the defendants\&#39;] scheme.&quot; Id., at ___ (slip op., at 18).\n In sum, the majority recognizes that &quot;[p]roximate cause for RICO purposes ... should be evaluated in light of its common law foundations,&quot; ante, at 6, but those foundations do not support the majority\&#39;s view. Moreover, the majority\&#39;s rationale would free from RICO liability defendants who would appear to fall within its intended scope. Consider, for example, a group of defendants who use a marketing firm (in RICO terms, an &quot;enterprise&quot;) to perpetrate a variation on a &quot;pump and dump&quot; scheme. See, e.g., United States v. Salmonese, 352 F. 3d 608, 612 (CA2 2003). They deliberately and repeatedly make egregiously fraudulent misrepresentations to inflate the price of securities that, unbeknownst to investors, they own. After the stock price rises, the defendants sell at an artificial profit. When the fraud is revealed, the price crashes, to the investors\&#39; detriment. Suppose the defendants have intentionally spoken directly only to intermediaries who simply repeated the information to potential investors, and have not had any contact with the investors themselves. Under the majority\&#39;s reasoning, these defendants apparently did not proximately cause the investors\&#39; losses and are not liable under RICO.\nIII\n If there is causation, we must decide whether, for RICO purposes, the City\&#39;s loss of tax revenue is &quot; \&#39;business or property\&#39; under 18 U. S. C. §1964(c).&quot; Ante, at 5 (acknowledging, but not reaching, this second issue). The question has led to concern among the lower courts. Some fear that an affirmative answer would turn RICO into a tax collection statute, permitting States to bring RICO actions and recover treble damages for behavior that amounts to no more than a failure to pay taxes due. See, e.g., Michigan, Dept. of Treasury, Revenue Div. v. Fawaz, No. 86-1809, 1988 WL 44736, *2 (CA6 1988) (holding that tax revenue is not RICO &quot;property&quot; lest district courts become &quot;collection agencies for unpaid state taxes&quot;); Illinois Dept. of Revenue v. Phillips, 771 F. 2d 312, 316, 312 (CA7 1985) (holding, &quot;reluctantly,&quot; that &quot;a state\&#39;s Department of Revenue may file suit in federal court for treble damages under [RICO] against a retailer who files fraudulent state sales tax returns&quot;).\n In a related context, however, the Department of Justice has taken steps to avoid the &quot;tax collection agency&quot; problem without reading all tax-related frauds out of similar federal criminal statutes. The Department\&#39;s prosecution guidelines require prosecutors considering a tax-related mail fraud or wire fraud or bank fraud prosecution (or a related RICO prosecution) to obtain approval from high-level Department officials. And those guidelines specify that the Department will grant that approval only where there is at issue &quot;a large fraud loss or a substantial pattern of conduct&quot; and will not do so, absent &quot;unusual circumstances,&quot; in cases involving simply &quot;one person\&#39;s tax liability.&quot; Dept. of Justice, United States Attorneys\&#39; Manual §6-4.210(A) (2007), online at http://www.justice. gov/usao/eousa/foia_reading_room/usam/title6/4mtax.htm (as visited Jan. 20, 2010, and available in Clerk of Court\&#39;s case file); see also §6-4.210(B) (explaining that the Department &quot;will not authorize the use of mail, wire or bank fraud charges to convert routine tax prosecutions into RICO ... cases&quot;).\n This case involves an extensive pattern of fraudulent conduct, large revenue losses, and many different unrelated potential taxpayers. The Department\&#39;s guidelines would appear to authorize prosecution in these circumstances. And limiting my consideration to these circumstances, I would find that this RICO complaint asserts a valid harm to &quot;business or property.&quot; I need not and do not express a view as to how or whether RICO\&#39;s civil action provisions apply to simpler instances of individual tax liability.\n This conclusion is virtually compelled by Pasquantino v. United States, 544 U. S. 349 (2005), a case that we decided only five years ago. We there pointed out that the right to uncollected taxes is an &quot;entitlement to collect money ... , the possession of which is \&#39;something of value.\&#39; &quot; Id., at 355 (quoting McNally v. United States, 483 U. S. 350, 358 (1987)). Such an entitlement &quot;has long been thought to be a species of property.&quot; 544 U. S., at 356 (citing 3 W. Blackstone, Commentaries on the Laws of England 153-155 (1768)). And &quot;fraud at common law included a scheme to deprive a victim of his entitlement to money.&quot; 544 U. S., at 356. We observed that tax evasion &quot;inflict[s] an economic injury no less than&quot; the &quot;embezzle[ment] [of] funds from the ... treasury.&quot; Ibid. And we consequently held that &quot;Canada\&#39;s right to uncollected excise taxes on the liquor petitioners imported into Canada&quot; is &quot; \&#39;property\&#39; &quot; within the terms of the mail fraud statute. Id., at 355.\n Hemi points in reply to our decision in Hawaii v. Standard Oil Co. of Cal., 405 U. S. 251 (1972). But that case involved not a loss of tax revenues, but &quot;injury to the general economy of a State&quot;--insofar as it was threatened by violations of antitrust law. Id., at 260. Hawaii\&#39;s interest, both more general and derivative of harm to individual businesses, differs significantly from the particular tax loss at issue in Pasquantino and directly at issue here.\n We have previously made clear that the compensable injury for RICO purposes is the harm caused by the predicate acts. See generally Sedima, S. P. R. L. v. Imrex Co., 473 U. S. 479, 495-496 (1985); cf. Cleveland v. United States, 531 U. S. 12, 25 (2000). I can find no convincing reason in the context of this case to distinguish in the circumstances present here between &quot;property&quot; as used in the mail fraud statute and &quot;property&quot; as used in RICO. Hence, I would postpone for another day the question whether RICO covers instances where little more than the liability of an individual taxpayer is at issue. And I would find in the respondent\&#39;s favor here.\n With respect, I dissent.\nFOOTNOTESFootnote 1 Even if we were willing to look to Hemi\&#39;s intent, as the dissent suggests we should, the City would fare no better. Hemi\&#39;s aim was not to defraud the City (or the State, for that matter) of tax revenue, but to sell more cigarettes. Hemi itself neither owed taxes nor was obliged to collect and remit them. This all suggests that Hemi\&#39;s alleged fraud was aimed at Hemi\&#39;s competitors, not the City. But Anza teaches that the competitors\&#39; injuries in such a case are too attenuated to state a RICO claim.\nFootnote 2 The dissent recognizes that its position poses the troubling specter of turning RICO into a tax collection statute. Post, at 11-12 (opinion of Breyer, J.). The dissent\&#39;s answer looks largely to prosecution policy set forth in the Federal Department of Justice Guidelines, which are, of course, not only changeable, but have no applicability whatever to state or local governments. Under the decision below and the dissent\&#39;s position, RICO could be used as a tax collection device based solely on the failure to file reports under the Jenkins Act, which itself provides quite limited remedies. See 15 U. S. C. §377 (providing that a violation of the Jenkins Act may be punished as a misdemeanor with a fine up to $1,000 and imprisonment for no more than six months). And that device would be available not only to the State, to which the reports were due, but also to the City, to which Hemi owed no duty under the Act and to which it owed no taxes.&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the Yake algorithim (Campos et al., 2018) on a given document</span>
<span class="n">key_terms_yake</span> <span class="o">=</span> <span class="n">ke</span><span class="o">.</span><span class="n">yake</span><span class="p">(</span><span class="n">corpus</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">key_terms_yake</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;New York City&#39;, 0.002288298045327596),
 (&#39;New York State&#39;, 0.0060401030525529436),
 (&#39;U. S. C.&#39;, 0.0075325125188752005),
 (&#39;Jenkins Act&#39;, 0.012460549374297763),
 (&#39;York City customer&#39;, 0.021988206972901634),
 (&#39;RICO&#39;, 0.027329026591127712),
 (&#39;Hemi Group&#39;, 0.03384924285412936),
 (&#39;York City cigarette&#39;, 0.03513697406836725),
 (&#39;Jenkins Act information&#39;, 0.03892293549952245),
 (&#39;RICO claim&#39;, 0.042756731344701926)]
</pre></div>
</div>
</div>
</div>
</section>
<section id="keyword-in-context">
<h2>Keyword in context<a class="headerlink" href="#keyword-in-context" title="Permalink to this headline">#</a></h2>
<p>Sometimes researchers find it helpful just to see a particular keyword in context.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">corpus</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;case_name&#39;</span><span class="p">),</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;case_name&#39;</span><span class="p">)),</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">textacy</span><span class="o">.</span><span class="n">extract</span><span class="o">.</span><span class="n">kwic</span><span class="o">.</span><span class="n">keyword_in_context</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;judgment&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">match</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> HEMI GROUP, LLC AND KAI GACHUPIN v. CITY OF NEW YORK, NEW YORK 
 -------------------------------------------------------------- 

ed the claims, but the Second Circuit vacated the  judgment  and remanded. Among other things, the Court of Ap
the City had stated a valid RICO claim. Held: The  judgment  is reversed, and the case is remanded. 541 F. 3d 
 opinion concurring in part and concurring in the  judgment . Breyer, J., filed a dissenting opinion, in which
  The Second Circuit vacated the District Court&#39;s  judgment  and remanded for further proceedings. The Court o
 it. The City, therefore, has no RICO claim.  The  judgment  of the Court of Appeals for the Second Circuit is
insburg, concurring in part and concurring in the  judgment .  As the Court points out, this is a case &quot;about 
he above-stated view, and I concur in the Court&#39;s  judgment . HEMI GROUP, LLC and KAI GACHUPIN, PETITIONERS v.

 CITIZENS UNITED v. FEDERAL ELECTION COMMISSION 
 ---------------------------------------------- 

ppellee Federal Election Commission (FEC) summary  judgment . Held:  1. Because the question whether §441b app
(Scalia, J., concurring in part and concurring in  judgment ). We agree with that conclusion and hold that sta
t later convened to hear the cause. The resulting  judgment  gives rise to this appeal.  Citizens United has a
m), and then granted the FEC&#39;s motion for summary  judgment , App. 261a-262a. See id., at 261a (&quot;Based on the 
or opinion, we find that the [FEC] is entitled to  judgment  as a matter of law. See Citizen[s] United v. FEC,
onnell, supra, at 339 (Kennedy, J., concurring in  judgment  in part and dissenting in part). The Snowe-Jeffor
rt&#39;s later opinion, which granted the FEC summary  judgment , was &quot;[b]ased on the reasoning of [its] prior opi
62 (Scalia, J., concurring in part, concurring in  judgment  in part, and dissenting in part); id., at 273-275
part, concurring in result in part, concurring in  judgment  in part, and dissenting in part); id., at 322-338
pore over each word of a text to see if, in their  judgment , it accords with the 11-factor test they have pro
er, 502 U. S., at 124 (Kennedy, J., concurring in  judgment ), the quoted language from WRTL provides a suffic
toral opportunities means making and implementing  judgment s about which strengths should be permitted to con
issenting); id., at 773 (White, J., concurring in  judgment ). With the advent of the Internet and the decline
S. 334, 360-361 (1995) (Thomas, J., concurring in  judgment ). Yet television networks and major newspapers ow
t 341-343; id., at 367 (Thomas, J., concurring in  judgment ). At the founding, speech was open, comprehensive
endent expenditures; if they surrender their best  judgment ; and if they put expediency before principle, the
ation&#39;s course; still others simply might suspend  judgment  on these points but decide to think more about is
nell, supra, at 341 (opinion of Kennedy, J.). The  judgment  of the District Court is reversed with respect to
ctions on corporate independent expenditures. The  judgment  is affirmed with respect to BCRA&#39;s disclaimer and
Thomas, JJ., concurring in part and concurring in  judgment ); McConnell, 540 U. S., at 247, 264, 286 (opinion
86 (Thomas, J., concurring in part, concurring in  judgment  in part, and dissenting in part).  These readings
3) (Scalia, J., concurring in part, concurring in  judgment  in part, and dissenting in part) (quoting C. Cook
 U. S. 334, 360 (1995) (Thomas, J., concurring in  judgment ); see also McConnell, 540 U. S., at 252-253 (opin
 an affirmative answer to that question is, in my  judgment , profoundly misguided. Even more misguided is the
 Comm. (NRWC), and have accepted the &quot;legislative  judgment  that the special characteristics of the corporate
 of §203. App. 23a-24a. In its motion for summary  judgment , however, Citizens United expressly abandoned its
Roberts, J., concurring in part and concurring in  judgment ).  Consider just three of the narrower grounds of
s of longstanding practice and Congress&#39; reasoned  judgment  that certain regulations which leave &quot;untouched f
precedents &quot;represent respect for the legislative  judgment  that the special characteristics of the corporate
oach taken by the majority cannot be right, in my  judgment . It disregards our constitutional history and the
erting an &quot; &#39;undue influence on an officeholder&#39;s  judgment &#39; &quot; and from creating &quot; &#39;the appearance of such in
orations).  When the McConnell Court affirmed the  judgment  of the District Court regarding §203, we did not 
ll, 540 U. S., at 306 (Kennedy, J., concurring in  judgment  in part and dissenting in part); see also id., at
63 (Scalia, J., concurring in part, concurring in  judgment  in part, and dissenting in part), a disreputable 
nted where, as here, we deal with a congressional  judgment  that has remained essentially unchanged throughou
tisfy heightened judicial scrutiny of legislative  judgment s will vary up or down with the novelty and plausi
years of bipartisan deliberation and its reasoned  judgment  on this basis, without first confirming that the 
 J., dissenting). &quot;In the meantime, a legislative  judgment  that &#39;enough is enough&#39; should command the greate
Congress&#39; factual findings and its constitutional  judgment : It acknowledges the validity of the interest in 
O, 335 U. S., at 144 (Rutledge, J., concurring in  judgment )), and this, in turn, &quot;interferes with the &#39;open 
he expansive protections afforded by the business  judgment  rule. Blair &amp; Stout 320; see also id., at 298-315
relevance of established facts and the considered  judgment s of state and federal legislatures over many deca
 corporate money in politics.  I would affirm the  judgment  of the District Court. CITIZENS UNITED, APPELLANT
3) (Thomas, J., concurring in part, concurring in  judgment  in part, and dissenting in part) (internal quotat
64 (Thomas, J., concurring in part, concurring in  judgment  in part, and dissenting in part) (quoting Nixon v
ordingly, I respectfully dissent from the Court&#39;s  judgment  upholding BCRA §§201 and 311. FOOTNOTESFootnote 1
al Election Commission&#39;s (FEC) motion for summary  judgment , App. 261a-262a, any question about statutory val
done &quot;on the basis of entirely subjective, ad hoc  judgment s,&quot; 523 U. S., at 690, that suggested anticompetit
539 U. S., at 163-164 (Kennedy, J., concurring in  judgment ). Both Courts also heard criticisms of Austin fro
concurring in part and dissenting in part). In my  judgment , such limitations may be justified to the extent 
&quot;We should defer to [the legislature&#39;s] political  judgment  that unlimited spending threatens the integrity o

 HOLLY WOOD, PETITIONER v. RICHARD F. ALLEN, COMMISSIONER, ALABAMA DEPARTMENT OF CORRECTIONS, et al. 
 --------------------------------------------------------------------------------------------------- 

de a strategic decision, but to whether counsel&#39;s  judgment  was reasonable, a question not before this Court.
onship to §2254(e)(1). Accordingly, we affirm the  judgment  of the Court of Appeals on that basis. I  In 1993
umption that counsel exercised sound professional  judgment , supported by ample reasons, not to present the i
rategic decision, but rather to whether counsel&#39;s  judgment  was reasonable — a question we do not reach. See 
ons were an unreasonable exercise of professional  judgment  and constituted deficient performance under Stric
 itself was a reasonable exercise of professional  judgment  under Strickland or whether the application of St
mination of the facts. Accordingly, we affirm the  judgment  of the Court of Appeals for the Eleventh Circuit.
ess. That was a strategic decision based on their  judgment  that the evidence would do more harm than good. B
resulted from inattention, not reasoned strategic  judgment &quot;); Strickland, 466 U. S., at 690-691. Moreover, &quot;
 itself was a reasonable exercise of professional  judgment  under Strickland or whether the application of St

 AGRON KUCANA v. ERIC H. HOLDER, JR., ATTORNEY GENERAL 
 ----------------------------------------------------- 

.  (1) The amicus defending the Seventh Circuit&#39;s  judgment  urges that regulations suffice to trigger §1252(a
laces within the no-judicial-review category &quot;any  judgment  regarding the granting of relief under section 11
ed. Alito, J., filed an opinion concurring in the  judgment . AGRON KUCANA, PETITIONER v. ERIC H. HOLDER,Jr., 
ubparagraph (D),[1] and regardless of whether the  judgment , decision, or action is made in removal proceedin
urt shall have jurisdiction to review--  &quot;(i) any  judgment  regarding the granting of relief under section 11
micus curiae, in support of the Seventh Circuit&#39;s  judgment . 557 U. S. ___ (2009). Ms. Leiter has ably discha
mmigration decisions to motions for relief from a  judgment  under Federal Rule of Civil Procedure 60(b)). Fed
Nevertheless, in defense of the Seventh Circuit&#39;s  judgment , amicus urges that regulations suffice to trigger
f for Court-Appointed Amicus Curiae in Support of  Judgment  Below 15, 17 (citing, inter alia, Florida Dept. o
laces within the no-judicial-review category &quot;any  judgment  regarding the granting of relief under section 11
  To the clause (i) enumeration of administrative  judgment s that are insulated from judicial review, Congres
dicial review. * * *  For the reasons stated, the  judgment  of the United States Court of Appeals for the Sev
nuary 20, 2010]  Justice Alito, concurring in the  judgment .  I agree that the Court of Appeals had jurisdict
f for Court-Appointed Amicus Curiae in Support of  Judgment  Below 41-42.  Amicus&#39; argument is ingenious but u
f for Court-Appointed Amicus Curiae in Support of  Judgment  Below 19, n. 8 (quoting §1229a(c)(7)(B)). One can
f for Court-Appointed Amicus Curiae in Support of  Judgment  Below. In every one of those examples, Congress e
f for Court-Appointed Amicus Curiae in Support of  Judgment  Below 21-23. But §1252(a)(2)(B)(ii) does not say 
Congress want to exclude review for discretionary  judgment s by the Attorney General that are recited explici
y in the statute, but provide judicial review for  judgment s that are just as lawfully discretionary because 
f for Court-Appointed Amicus Curiae in Support of  Judgment  Below 32-34. The report states that §1252(a)(2)(B

 MARCUS A. WELLONS v. HILTON HALL, WARDEN 
 ---------------------------------------- 

rd for an order granting certiorari, vacating the  judgment  below, and remanding the case (GVR) remains as it
ave to proceed in forma pauperis are granted. The  judgment  is vacated, and the case is remanded to the Eleve
nts Wellons&#39; petition for certiorari, vacates the  judgment  of the Eleventh Circuit, and remands (&quot;GVRs&quot;) in 
erse or set the case for argument; otherwise, the  judgment  below must stand. The same is true if (as the Cou
rits question. If they erred in that regard their  judgment  should be reversed rather than remanded &quot;in light
 we are, to vacate and send back their authorized  judgment s for inconsequential imperfection of opinion — as
 authority or development that casts doubt on the  judgment  of the court below. What the Court has done — usi
t of 1996 (AEDPA) to the &quot;Georgia Supreme Court&#39;s  judgment  as to the substance and effect of the ex parte co
</pre></div>
</div>
</div>
</div>
</section>
<section id="vectorization">
<h2>Vectorization<a class="headerlink" href="#vectorization" title="Permalink to this headline">#</a></h2>
<p>Let’s continue with corpus-level analysis by taking advantage of textacy’s vectorizer class, which wraps functionality from <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> to count the prevalence of certain tokens in each document of the corpus and to apply weights to these counts if desired. We could just work directly in <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code>, but it can be nice for mental overhead to learn one library and be able to do a great deal with it.</p>
<p>We’ll create a vectorizer, sticking with the normal term frequency defaults but discarding words that appear in fewer than 3 documents or more than 95% of documents. We’ll also limit our features to the top 500 words according to document frequency. This means our feature set, or columns, will have a higher degree of representation across the corpus. We could further scale these counts according to document frequency (or inverse document frequency) weights, or normalize the weights so that they add up to 1 for each document row (L1 norm), and so on.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">textacy.representations</span>

<span class="n">vectorizer</span> <span class="o">=</span> <span class="n">textacy</span><span class="o">.</span><span class="n">representations</span><span class="o">.</span><span class="n">Vectorizer</span><span class="p">(</span><span class="n">min_df</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">max_df</span><span class="o">=</span><span class="mf">.95</span><span class="p">,</span> <span class="n">max_n_terms</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="n">tokenized_corpus</span> <span class="o">=</span> <span class="p">[[</span><span class="n">token</span><span class="o">.</span><span class="n">orth_</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">textacy</span><span class="o">.</span><span class="n">extract</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">filter_nums</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">filter_stops</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">filter_punct</span><span class="o">=</span><span class="kc">True</span><span class="p">))]</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">corpus</span><span class="p">]</span>

<span class="n">dtm</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">tokenized_corpus</span><span class="p">)</span>
<span class="n">dtm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;79x500 sparse matrix of type &#39;&lt;class &#39;numpy.int32&#39;&gt;&#39;
	with 22870 stored elements in Compressed Sparse Row format&gt;
</pre></div>
</div>
</div>
</div>
<p>We have now have a matrix representation of our corpus, where rows are documents, and columns (or features) are words from the corpus. The value at any given point is the number of times that the word appears in that document. Once we have a document-term matrix, we could do several things with it just within textacy, though we also can pass it into different algorithms within <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> or other libraries.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s look at some of the terms</span>
<span class="n">vectorizer</span><span class="o">.</span><span class="n">terms_list</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;$&#39;,
 &#39;2d&#39;,
 &#39;3d&#39;,
 &#39;A.&#39;,
 &#39;AEDPA&#39;,
 &#39;Act&#39;,
 &#39;Amendment&#39;,
 &#39;American&#39;,
 &#39;Ann&#39;,
 &#39;Ante&#39;,
 &#39;App&#39;,
 &#39;Appeals&#39;,
 &#39;B&#39;,
 &#39;Board&#39;,
 &#39;Breyer&#39;,
 &#39;Brief&#39;,
 &#39;Cert&#39;,
 &#39;Cf&#39;,
 &#39;Circuit&#39;,
 &#39;Citizens&#39;]
</pre></div>
</div>
</div>
</div>
<p>We can see that we are still getting a number of terms which might be filtered out, such as symbols and abbreviations. The most straightforward solutions are to filter the terms against a dictionary during vectorization, which carries the risk of inadvertently filtering words that you’d prefer to keep in the dataset, or curating a custom stopword list, which can be inflexible and time consuming. Otherwise, it is often the case that the corpus analysis tools used with the vectorized texts (e.g., topic modeling or stylistic analysis – see below) have ways of recognizing and sequestering unwanted terms so that they can be excluded from the results if desired.</p>
</section>
<section id="exercise-topic-modeling">
<h2>Exercise - topic modeling<a class="headerlink" href="#exercise-topic-modeling" title="Permalink to this headline">#</a></h2>
<ol class="simple">
<li><p>Read through the below code to quickly look at one example of what we can do with a vectorized corpus. Topic modeling is very popular for semantic exploration of texts, and there are numerous implementations of it. Textacy uses implementations from scikit-learn. Our corpus is rather small for topic modeling, but just to see how it’s done here, we’ll go ahead. First, though, topic modeling works best when the texts are divided into approximately equal-sized “chunks.” A quick word-count of the corpus will show that the decisions are of quite variable lengths, which will skew the topic model.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">corpus</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span><span class="si">:</span><span class="s2"> &gt;5</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s1">&#39;case_name&#39;</span><span class="p">][:</span><span class="mi">80</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>13007  HEMI GROUP, LLC AND KAI GACHUPIN v. CITY OF NEW YORK, NEW YORK
72325  CITIZENS UNITED v. FEDERAL ELECTION COMMISSION
 8333  HOLLY WOOD, PETITIONER v. RICHARD F. ALLEN, COMMISSIONER, ALABAMA DEPARTMENT OF 
 9947  AGRON KUCANA v. ERIC H. HOLDER, JR., ATTORNEY GENERAL
 5508  MARCUS A. WELLONS v. HILTON HALL, WARDEN
 4083  ERIC PRESLEY v. GEORGIA
 7609  NRG POWER MARKETING, LLC, et al. v. MAINE PUBLIC UTILITIES COMMISSION et al.
 6983  E. K. MCDANIEL, WARDEN, et al. v. TROY BROWN
13844  MARYLAND v. MICHAEL BLAINE SHATZER, SR.
 8945  THE HERTZ CORPORATION v. MELINDA FRIEND et al.
11605  FLORIDA v. KEVIN DEWAYNE POWELL
 2343  RICK THALER, DIRECTOR, TEXAS DEPARTMENT OF CRIMINAL JUSTICE, CORRECTIONAL INSTIT
 8531  MAC&#39;S SHELL SERVICE, INC., et al. v. SHELL OIL PRODUCTS CO. LLC et al.
 8259  REED ELSEVIER, INC., et al., v. IRVIN MUCHNICK et al.
 9502  CURTIS DARNELL JOHNSON v. UNITED STATES
  281  JAMAL KIYEMBA et al. v. BARACK H. OBAMA, PRESIDENT OF THE UNITED STATES et al.
12424  MILAVETZ, GALLOP &amp; MILAVETZ, P. A., et al. v. UNITED STATES
13983  TAYLOR JAMES BLOATE v. UNITED STATES
31066  SHADY GROVE ORTHOPEDIC ASSOCIATES, P. A. v. ALLSTATE INSURANCE COMPANY
15135  JOSE PADILLA v. KENTUCKY
 8236  JERRY N. JONES, et al. v. HARRIS ASSOCIATES L. P.
 8634  MARY BERGHUIS, WARDEN v. DIAPOLIS SMITH
15018  GRAHAM COUNTY SOIL AND WATER CONSERVATION DISTRICT, et al. v. UNITED STATES ex r
 8025  UNITED STUDENT AID FUNDS, INC. v. FRANCISCO J. ESPINOSA
 5499  ESTHER HUI, et al. v. YANIRA CASTANEDA, AS PERSONAL REPRESENTATIVE OF THE ESTATE
14398  PAUL RENICO, WARDEN v. REGINALD LETT
27245  KEN L. SALAZAR, SECRETARY OF THE INTERIOR, et al. v. FRANK BUONO
16003  STOLT-NIELSEN S. A., et al. v. ANIMALFEEDS INTERNATIONAL CORP.
12015  MERCK &amp; CO., INC., et al. v. RICHARD REYNOLDS et al.
25675  KAREN L. JERMAN v. CARLISLE, MCNELLIE, RINI, KRAMER &amp; ULRICH LPA, et al.
12618  SONNY PERDUE, GOVERNOR OF GEORGIA, et al. v. KENNY A., BY HIS NEXT FRIEND LINDA 
19636  UNITED STATES v. ROBERT J. STEVENS
19849  TIMOTHY MARK CAMERON ABBOTT v. JACQUELYN VAYE ABBOTT
31417  TERRANCE JAMAR GRAHAM v. FLORIDA
23340  UNITED STATES v. GRAYDON EARL COMSTOCK, JR., et al.
   20  JOE HARRIS SULLIVAN v. FLORIDA
 8980  AMERICAN NEEDLE, INC. v. NATIONAL FOOTBALL LEAGUE et al.
 5179  ARTHUR L. LEWIS, JR., et al. v. CITY OF CHICAGO, ILLINOIS
 9721  UNITED STATES v. MARTIN O&#39;BRIEN AND ARTHUR BURGESS
 6672  BRIDGET HARDT v. RELIANCE STANDARD LIFE INSURANCE COMPANY
 5771  UNITED STATES v. GLENN MARCUS
 4438  JOHN ROBERTSON v. UNITED STATES ex rel. WYKENNA WATSON
 8687  LAWRENCE JOSEPH JEFFERSON v. STEPHEN UPTON, WARDEN
10645  MOHAMED ALI SAMANTAR v. BASHE ABDI YOUSUF et al.
17847  MARY BERGHUIS, WARDEN v. VAN CHESTER THOMPKINS
10183  RICHARD A. LEVIN, TAX COMMISSIONER OF OHIO v. COMMERCE ENERGY, INC., et al.
15010  THOMAS CARR v. UNITED STATES
12933  MICHAEL GARY BARBER, et al. v. J. E. THOMAS, WARDEN
13676  JAN HAMILTON, CHAPTER 13 TRUSTEE v. STEPHANIE KAY LANNING
 8312  WANDA KRUPSKI v. COSTA CROCIERE S. P. A.
 9987  JOSE ANGEL CARACHURI-ROSENDO v. ERIC H. HOLDER, JR., ATTORNEY GENERAL
 8029  MICHAEL J. ASTRUE, COMMISSIONER OF SOCIAL SECURITY v. CATHERINE G. RATLIFF
10821  BRIAN RUSSELL DOLAN v. UNITED STATES
17847  ALBERT HOLLAND v. FLORIDA
11172  NEW PROCESS STEEL, L. P. v. NATIONAL LABOR RELATIONS BOARD
18022  STOP THE BEACH RENOURISHMENT, INC. v. FLORIDA DEPARTMENT OF ENVIRONMENTAL PROTEC
 9320  CITY OF ONTARIO, CALIFORNIA, et al. v. JEFF QUON et al.
18128  WILLIAM G. SCHWAB v. NADEJDA REILLY
13554  PERCY DILLON v. UNITED STATES
25016  ERIC H. HOLDER, JR., ATTORNEY GENERAL, et al. v. HUMANITARIAN LAW PROJECT et al.
10471  RENT-A-CENTER, WEST, INC. v. ANTONIO JACKSON
20738  KAWASAKI KISEN KAISHA LTD. et al. v. REGAL-BELOIT CORP. et al.
18474  MONSANTO COMPANY, et al. v. GEERTSON SEED FARMS et al.
23994  JOHN DOE #1, et al. v. SAM REED, WASHINGTON SECRETARY OF STATE, et al.
16696  ROBERT MORRISON, et al. v. NATIONAL AUSTRALIA BANK LTD. et al.
14013  GRANITE ROCK COMPANY v. INTERNATIONAL BROTHERHOOD OF TEAMSTERS et al.
15751  BILLY JOE MAGWOOD v. TONY PATTERSON, WARDEN, et al.
48969  JEFFREY K. SKILLING v. UNITED STATES
 4629  CONRAD M. BLACK, JOHN A. BOULTBEE, AND MARK S. KIPNIS v. UNITED STATES
39727  FREE ENTERPRISE FUND AND BECKSTEAD AND WATTS, LLP v. PUBLIC COMPANY ACCOUNTING O
29263  BERNARD L. BILSKI AND RAND A. WARSAW v. DAVID J. KAPPOS, UNDER SECRETARY OF COMM
33725  CHRISTIAN LEGAL SOCIETY CHAPTER OF THE UNIVERSITY OF CALIFORNIA, HASTINGS COLLEG
87587  OTIS MCDONALD, et al. v. CITY OF CHICAGO, ILLINOIS, et al.
 8126  DEMARCUS ALI SEARS v. STEPHEN UPTON, WARDEN
 2242  BILL K. WILSON, SUPERINTENDENT, INDIANA STATE PRISON, PETITIONER v. JOSEPH E. CO
 8986  KEVIN ABBOTT, PETITIONER v. UNITED STATES
 4244  LOS ANGELES COUNTY, CALIFORNIA, PETITIONER v. CRAIG ARTHUR HUMPHRIES et al.
   29  COSTCO WHOLESALE CORPORATION, PETITIONER v. OMEGA, S.A.
10250  KEITH SMITH, WARDEN v. FRANK G. SPISAK, JR.
</pre></div>
</div>
</div>
</div>
<p>We’ll re-chunk the texts into documents of not more than 500 words and then recompute the document-term matrix.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">chunked_corpus_unflattened</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">text</span><span class="p">[</span><span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">+</span><span class="mi">500</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">),</span> <span class="mi">500</span><span class="p">)]</span> <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">tokenized_corpus</span>
<span class="p">]</span>
<span class="n">chunked_corpus</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">chunked_corpus_unflattened</span><span class="p">))</span>
<span class="n">chunked_dtm</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">chunked_corpus</span><span class="p">)</span>
<span class="n">chunked_dtm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;1006x500 sparse matrix of type &#39;&lt;class &#39;numpy.int32&#39;&gt;&#39;
	with 91636 stored elements in Compressed Sparse Row format&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">textacy.tm</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">textacy</span><span class="o">.</span><span class="n">tm</span><span class="o">.</span><span class="n">TopicModel</span><span class="p">(</span><span class="s2">&quot;lda&quot;</span><span class="p">,</span> <span class="n">n_topics</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">chunked_dtm</span><span class="p">)</span>
<span class="n">doc_topic_matrix</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">chunked_dtm</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">topic_idx</span><span class="p">,</span> <span class="n">top_terms</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">top_topic_terms</span><span class="p">(</span><span class="n">vectorizer</span><span class="o">.</span><span class="n">id_to_term</span><span class="p">,</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic_idx</span><span class="si">:</span><span class="s2"> &gt;2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">topic_weights</span><span class="p">(</span><span class="n">doc_topic_matrix</span><span class="p">)[</span><span class="n">topic_idx</span><span class="p">]</span><span class="si">:</span><span class="s2"> &gt;3.0%</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;|&quot;</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">top_terms</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> 0  8% | right, rights, Clause, States, Justice, state, Amendment, bear, Constitution, law
 1  4% | fees, carrier, party, attorney, fee, award, services, filed, $, Rule
 2  4% | rights, child, right, Convention, State, custody, Ann, States, Stat, A.
 3  4% | debtor, income, value, felony, delay, time, claimed, Code, property, exempt
 4  8% | sentence, sentencing, time, life, habeas, year, State, federal, years, application
 5  5% | counsel, attorney, Miranda, state, suspect, interrogation, police, right, evidence, advice
 6  1% | business, Director, Office, General, place, corporation, patent, Fed, method, State
 7  4% | Footnote, arbitration, agreement, parties, contract, dispute, clause, Inc., question, Brief
 8  6% | process, petition, disclosure, plaintiffs, challenge, test, applied, referendum, claim, State
 9 11% | Amendment, speech, Hastings, J., public, political, interest, policy, Government, corporations
10  9% | jury, trial, Id., jurors, d., evidence, District, App, judge, reasonable
11 11% | Congress, Board, States, United, statute, power, Act, Commission, authority, foreign
12  8% | F., United, States, 3d, statute, Congress, law, error, criminal, conduct
13 12% | state, federal, law, courts, Act, action, class, Rule, claims, City
14  3% | cross, debt, District, injunction, relief, land, transfer, Government, bankruptcy, agency
</pre></div>
</div>
</div>
</div>
</section>
<section id="document-similarity-with-word2vec-and-clustering">
<h2>Document similarity with word2vec and clustering<a class="headerlink" href="#document-similarity-with-word2vec-and-clustering" title="Permalink to this headline">#</a></h2>
<p>spaCy and textacy provide several built-in methods for measuring the degree of similarity between two documents, including a <code class="docutils literal notranslate"><span class="pre">word2vec</span></code>-based approach that computes the semantic similarity between documents based on the word vector model included with the spaCy language model. This technique is capable of inferring, for example, that two documents are topically related even if they don’t share any words but use synonyms for a shared concept.</p>
<p>To evaluate this similarity comparison, we’ll compute the similarity of each pair of docs in the corpus, and then branch out into <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> a bit to look for clusters based on these similarity measurements.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">dim</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">n_docs</span>

<span class="n">distance_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">dim</span><span class="p">,</span><span class="n">dim</span><span class="p">))</span>
    
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">doc_i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">corpus</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">doc_j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">corpus</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="p">:</span>
            <span class="k">continue</span> <span class="c1"># defaults to 0</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">:</span>
            <span class="n">distance_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance_matrix</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">distance_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">doc_i</span><span class="o">.</span><span class="n">similarity</span><span class="p">(</span><span class="n">doc_j</span><span class="p">)</span>
<span class="n">distance_matrix</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0.        , 0.00428384, 0.00913349, ..., 0.0036864 , 0.05862846,
        0.00781646],
       [0.00428384, 0.        , 0.00910768, ..., 0.00630599, 0.05399509,
        0.0058778 ],
       [0.00913349, 0.00910768, 0.        , ..., 0.00614726, 0.04253501,
        0.00566699],
       ...,
       [0.0036864 , 0.00630599, 0.00614726, ..., 0.        , 0.05483739,
        0.00724887],
       [0.05862846, 0.05399509, 0.04253501, ..., 0.05483739, 0.        ,
        0.04504147],
       [0.00781646, 0.0058778 , 0.00566699, ..., 0.00724887, 0.04504147,
        0.        ]])
</pre></div>
</div>
</div>
</div>
<p>The <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.cluster.OPTICS.html">OPTICS</a> hierarchical density-based clustering algorithm only finds one cluster with its default settings, but an examination of the legal issue types coded to each decision indicates that the <code class="docutils literal notranslate"><span class="pre">word2vec</span></code>-based clustering has indeed produced a group of semantically related documents.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">OPTICS</span>

<span class="n">clustering</span> <span class="o">=</span> <span class="n">OPTICS</span><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="s1">&#39;precomputed&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">distance_matrix</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">clustering</span><span class="o">.</span><span class="n">labels_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[-1  0 -1 -1  1 -1 -1 -1  1 -1 -1 -1 -1 -1 -1 -1 -1 -1  0 -1  0 -1 -1 -1
 -1  1 -1 -1 -1  0 -1 -1 -1 -1  0 -1 -1 -1 -1 -1  1 -1 -1  0  1 -1 -1 -1
 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1  0 -1 -1 -1  0  0 -1 -1  1 -1 -1 -1  0
  0  1 -1 -1 -1 -1  1]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">groupby</span>
<span class="n">clusters</span> <span class="o">=</span> <span class="n">groupby</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">clustering</span><span class="o">.</span><span class="n">labels_</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="k">for</span> <span class="n">cluster_label</span><span class="p">,</span> <span class="n">docs</span> <span class="ow">in</span> <span class="n">clusters</span><span class="p">:</span>
    
    <span class="k">if</span> <span class="n">cluster_label</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">continue</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cluster </span><span class="si">{</span><span class="n">cluster_label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">---------&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">corpus</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s1">&#39;us_cite_id&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2"> &lt;12</span><span class="si">}</span><span class="s2"> | </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">issue_area_codes</span><span class="p">[</span><span class="n">corpus</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s1">&#39;issue_area&#39;</span><span class="p">]]</span><span class="si">:</span><span class="s2"> &lt;18</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="sa">f</span><span class="s2">&quot; | </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">issue_codes</span><span class="p">[</span><span class="n">corpus</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s1">&#39;issue&#39;</span><span class="p">]][:</span><span class="mi">60</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">docs</span>
    <span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Cluster 0 
---------
558 U.S. 310 | First Amendment    | campaign spending (cf. governmental corruption):
559 U.S. 393 | Judicial Power     | Federal Rules of Civil Procedure including Supreme Court Rul
559 U.S. 335 | Economic Activity  | federal or state regulation of securities
559 U.S. 573 | Civil Rights       | debtors&#39; rights
560 U.S. 126 | Federalism         | national supremacy: miscellaneous
560 U.S. 305 | Economic Activity  | liability, other than as in sufficiency of evidence, electio
561 U.S. 1   | First Amendment    | federal or state internal security legislation: Smith, Inter
561 U.S. 186 | Privacy            | Freedom of Information Act and related federal or state stat
561 U.S. 247 | Economic Activity  | federal or state regulation of securities
561 U.S. 661 | First Amendment    | free exercise of religion
561 U.S. 742 | Criminal Procedure | miscellaneous criminal procedure (cf. due process, prisoners



Cluster 1 
---------
558 U.S. 220 | Criminal Procedure | discovery and inspection (in the context of criminal litigat
559 U.S. 98  | Criminal Procedure | Miranda warnings
559 U.S. 766 | Criminal Procedure | habeas corpus
560 U.S. 258 | Criminal Procedure | Federal Rules of Criminal Procedure
560 U.S. 370 | Criminal Procedure | Miranda warnings
561 U.S. 358 | Criminal Procedure | statutory construction of criminal laws: fraud
561 U.S. 945 | Criminal Procedure | right to counsel (cf. indigents appointment of counsel or in
558 U.S. 139 | Criminal Procedure | cruel and unusual punishment, death penalty (cf. extra legal
</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-spacy101">
<h2>Exercise - spacy101<a class="headerlink" href="#exercise-spacy101" title="Permalink to this headline">#</a></h2>
<ol class="simple">
<li><p>Read through the spacy101 guide and begin to apply its principles to your own corpus: <a class="reference external" href="https://spacy.io/usage/spacy-101">https://spacy.io/usage/spacy-101</a></p></li>
</ol>
</section>
<section id="topic-modeling-going-further">
<h2>Topic modeling - going further<a class="headerlink" href="#topic-modeling-going-further" title="Permalink to this headline">#</a></h2>
<p>There are many different approaches to modeling abstract topics in text data, such as <a class="reference external" href="https://github.com/ddangelov/Top2Vec">top2vec</a> and <a class="reference external" href="https://github.com/cemoody/lda2vec">lda2vec</a>.</p>
<p>Click ahead to see our coverage of the BERTopic algorithm in Chapter 10!</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "EastBayEv/SSDS-TAML",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./fall2022"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="7_English_text_preprocessing_basics.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Chapter 7 - English text preprocessing basics</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="9_BERTopic.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Chapter 9 - New Developments: Topic Modeling with BERTopic!</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Software and Services for Data Science (SSDS), Stanford University<br/>
  
      &copy; Copyright 2021-2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>